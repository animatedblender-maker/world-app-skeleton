import{a as h}from"./chunk-LQQHCQP3.js";import{c as p}from"./chunk-KO5X6LCN.js";import{k as s,n as c}from"./chunk-SPQ2JWKS.js";import{a}from"./chunk-2NFLSA4Y.js";var m=class n{constructor(r){this.auth=r}endpoint=h.graphqlEndpoint||"http://localhost:3000/graphql";async query(r,t){return this.request(r,t)}async mutate(r,t){return this.request(r,t)}async request(r,t){let i=await this.auth.getAccessToken(),o=await fetch(this.endpoint,{method:"POST",headers:a({"content-type":"application/json"},i?{Authorization:`Bearer ${i}`}:{}),body:JSON.stringify({query:r,variables:t??void 0})}),e=await o.json();if(!o.ok)throw new Error(`GraphQL HTTP ${o.status}: ${JSON.stringify(e)}`);if(e.errors?.length)throw new Error(e.errors.map(u=>u.message).join(" | "));if(!e.data)throw new Error("GraphQL: missing data");return e.data}static \u0275fac=function(t){return new(t||n)(c(p))};static \u0275prov=s({token:n,factory:n.\u0275fac,providedIn:"root"})};export{m as a};
