import{a as Ee}from"./chunk-HLICNTJQ.js";import{a as we}from"./chunk-YQQ6SS3P.js";import{a as xe}from"./chunk-TS4QU3HE.js";import{a as ye,b as be}from"./chunk-JLBVTQ6O.js";import{a as ve}from"./chunk-JFWLUDT4.js";import{a as ce,b as de,e as pe,h as _e,i as me,j as fe,n as ge,o as ue}from"./chunk-KSNNJYBO.js";import{a as le}from"./chunk-57X26VKZ.js";import{a as Ce}from"./chunk-YDPXGYO4.js";import{a as he,b as Pe}from"./chunk-YRPTNGKR.js";import"./chunk-VEHW3HLT.js";import"./chunk-YQ2TA2FF.js";import"./chunk-LJDR2ADK.js";import"./chunk-7DJA5TI4.js";import"./chunk-AFJFBD4M.js";import"./chunk-LQQHCQP3.js";import{a as ae,c as se}from"./chunk-KO5X6LCN.js";import{$ as Z,C as E,Ca as ie,D as a,Da as ne,G as M,Ga as oe,H as Y,Ia as re,L as f,P as c,Q as l,R as s,S as y,V as S,W as k,Y as v,Z as g,_ as r,aa as H,ba as G,ca as B,da as A,ea as I,fa as p,ga as x,ha as h,ia as W,ja as O,ka as T,la as U,ma as J,oa as Q,p as _,q as m,qa as F,r as q,ra as D,sa as N,ua as K,v as X,xa as ee,ya as te}from"./chunk-SPQ2JWKS.js";import{a as z,b as j}from"./chunk-2NFLSA4Y.js";var Oe=["avatarInput"],Te=()=>[];function Ue(i,t){if(i&1&&y(0,"img",37),i&2){let e=r(2);A("transform",e.avatarTransform),c("src",e.avatarImage,E)}}function Ve(i,t){if(i&1&&(l(0,"div",38),p(1),s()),i&2){let e=r(2);a(),x(e.initials)}}function Le(i,t){if(i&1){let e=v();l(0,"button",44),g("click",function(){_(e);let o=r(3);return m(o.saveAvatar())}),p(1),s()}if(i&2){let e=r(3);c("disabled",e.avatarSaving),a(),h(" ",e.avatarSaving?"Saving\u2026":"Save"," ")}}function Be(i,t){i&1&&(l(0,"span",45),p(1,"Uploading..."),s())}function Re(i,t){if(i&1&&(l(0,"small",46),p(1),s()),i&2){let e=r(3);a(),x(e.avatarError)}}function ze(i,t){if(i&1){let e=v();l(0,"div",39)(1,"button",40),g("click",function(o){_(e);let d=r(2);return m(d.triggerAvatarUpload(o))}),p(2," Upload "),s(),f(3,Le,2,2,"button",41)(4,Be,2,0,"span",42)(5,Re,2,1,"small",43),s()}if(i&2){let e=r(2);a(3),c("ngIf",!!e.draftAvatarUploadUrl),a(),c("ngIf",e.avatarUploading&&!e.draftAvatarUploadUrl),a(),c("ngIf",e.avatarError)}}function Ae(i,t){if(i&1){let e=v();l(0,"button",40),g("click",function(){_(e);let o=r(3);return m(o.startNameEdit())}),p(1,"Refine name"),s()}}function Fe(i,t){i&1&&(S(0),p(1," Edit profile "),k())}function De(i,t){i&1&&(l(0,"span"),p(1,"Save"),s())}function Ne(i,t){i&1&&(l(0,"span",58)(1,"span",59),p(2,"\u2713"),s(),l(3,"span",60),p(4,"\u2197"),s(),p(5," Saved "),s())}function $e(i,t){if(i&1&&(S(0),f(1,De,2,0,"span",28)(2,Ne,6,0,"span",57),k()),i&2){let e=r(4);a(),c("ngIf",!e.profileEditSaved),a(),c("ngIf",e.profileEditSaved)}}function We(i,t){if(i&1){let e=v();l(0,"button",56),g("click",function(){_(e);let o=r(3);return m(o.onProfileEditAction())}),f(1,Fe,2,0,"ng-container",28)(2,$e,3,2,"ng-container",28),s()}if(i&2){let e=r(3);c("disabled",e.profileEditSaving),a(),c("ngIf",!e.profileEditMode),a(),c("ngIf",e.profileEditMode)}}function je(i,t){if(i&1){let e=v();l(0,"div",47)(1,"div",48),p(2),s(),y(3,"span",49),l(4,"div",50),f(5,Ae,2,0,"button",51)(6,We,3,3,"button",52),s(),l(7,"button",53),g("click",function(){_(e);let o=r(2);return m(o.copyShareLink())}),q(),l(8,"svg",54),y(9,"path",55),s()()()}if(i&2){let e=r(2);a(2),x(e.profile.display_name||e.profile.username||"User"),a(),I("online",e.profileOnline)("offline",!e.profileOnline),a(2),c("ngIf",e.isOwner&&e.profileEditMode),a(),c("ngIf",e.isOwner),a(),c("disabled",!e.shareUrl)}}function qe(i,t){if(i&1&&(l(0,"div",61),p(1),s()),i&2){let e=r(2);I("error",!!e.shareError),a(),h(" ",e.shareError||(e.shareCopied?"Link copied":"")," ")}}function Xe(i,t){if(i&1){let e=v();l(0,"div",62)(1,"input",63),U("ngModelChange",function(o){_(e);let d=r(2);return T(d.draftDisplayName,o)||(d.draftDisplayName=o),m(o)}),s(),l(2,"div",64)(3,"button",65),g("click",function(){_(e);let o=r(2);return m(o.saveDisplayName())}),p(4),s(),l(5,"button",66),g("click",function(){_(e);let o=r(2);return m(o.cancelNameEdit())}),p(6,"Cancel"),s()()()}if(i&2){let e=r(2);a(),O("ngModel",e.draftDisplayName),a(2),c("disabled",e.nameSaving),a(),h(" ",e.nameSaving?"Saving\u2026":"Save"," ")}}function Ye(i,t){if(i&1){let e=v();l(0,"button",40),g("click",function(){_(e);let o=r(3);return m(o.startUsernameEdit())}),p(1),s()}if(i&2){let e=r(3);a(),h(" ",e.profile.username?"Edit handle":"Set handle"," ")}}function Ze(i,t){if(i&1&&(l(0,"div",67)(1,"div",68),p(2),s(),f(3,Ye,2,1,"button",51),s()),i&2){let e=r(2);a(2),h(" @",e.profile.username||"username pending"," "),a(),c("ngIf",e.isOwner&&e.profileEditMode)}}function He(i,t){i&1&&(l(0,"span"),p(1,"Loading"),s())}function Ge(i,t){if(i&1&&(S(0),p(1),k()),i&2){let e=r(4);a(),h(" ",e.viewerFollowing?"Following":"Follow"," ")}}function Je(i,t){if(i&1&&(l(0,"small",46),p(1),s()),i&2){let e=r(4);a(),x(e.followError)}}function Qe(i,t){if(i&1&&(l(0,"small",46),p(1),s()),i&2){let e=r(4);a(),x(e.messageError)}}function Ke(i,t){if(i&1){let e=v();l(0,"div",74)(1,"button",75),g("click",function(){_(e);let o=r(3);return m(o.toggleFollow())}),f(2,He,2,0,"span",28)(3,Ge,2,1,"ng-container",28),s(),l(4,"button",76),g("click",function(){_(e);let o=r(3);return m(o.startConversation())}),p(5),s(),f(6,Je,2,1,"small",43)(7,Qe,2,1,"small",43),s()}if(i&2){let e=r(3);a(),I("following",e.viewerFollowing),c("disabled",e.followBusy||e.followMetaLoading),a(),c("ngIf",e.followMetaLoading&&!e.viewerFollowing),a(),c("ngIf",!e.followMetaLoading||e.viewerFollowing),a(),c("disabled",e.messageBusy),a(),h(" ",e.messageBusy?"Opening...":"Message"," "),a(),c("ngIf",e.followError),a(),c("ngIf",e.messageError)}}function et(i,t){if(i&1&&(l(0,"div",69)(1,"div",70)(2,"div",71),p(3),s(),l(4,"div",72),p(5,"Followers"),s()(),l(6,"div",70)(7,"div",71),p(8),s(),l(9,"div",72),p(10,"Following"),s()(),f(11,Ke,8,9,"div",73),s()),i&2){let e=r(2);a(3),h(" ",e.followMetaLoading&&e.followersCount===null?"\u2026":e.followersCount??"\u2014"," "),a(5),h(" ",e.followMetaLoading&&e.followingCount===null?"\u2026":e.followingCount??"\u2014"," "),a(3),c("ngIf",!e.isOwner)}}function tt(i,t){if(i&1&&(l(0,"small",46),p(1),s()),i&2){let e=r(3);a(),x(e.usernameError)}}function it(i,t){if(i&1){let e=v();l(0,"div",62)(1,"input",77),U("ngModelChange",function(o){_(e);let d=r(2);return T(d.draftUsername,o)||(d.draftUsername=o),m(o)}),g("ngModelChange",function(){_(e);let o=r(2);return m(o.onUsernameDraftChange())}),s(),l(2,"small",45),p(3," Use 3-24 letters, numbers, dots, or underscores. No spaces. "),s(),l(4,"div",64)(5,"button",65),g("click",function(){_(e);let o=r(2);return m(o.saveUsername())}),p(6),s(),l(7,"button",66),g("click",function(){_(e);let o=r(2);return m(o.cancelUsernameEdit())}),p(8,"Cancel"),s(),f(9,tt,2,1,"small",43),s()()}if(i&2){let e=r(2);a(),O("ngModel",e.draftUsername),a(4),c("disabled",e.usernameSaving),a(),h(" ",e.usernameSaving?"Saving...":"Save handle"," "),a(3),c("ngIf",e.usernameError)}}function nt(i,t){if(i&1&&(l(0,"span"),p(1),s()),i&2){let e=r(2);a(),x(e.profile.country_name)}}function ot(i,t){if(i&1&&(l(0,"span"),p(1),s()),i&2){let e=r(2);a(),h("\u2022 ",e.profile.city_name)}}function rt(i,t){if(i&1){let e=v();l(0,"button",40),g("click",function(){_(e);let o=r(3);return m(o.startBioEdit())}),p(1,"Refine bio"),s()}}function at(i,t){if(i&1&&(l(0,"div",78)(1,"div"),p(2),s(),f(3,rt,2,0,"button",51),s()),i&2){let e=r(2);a(2),x(e.bio||"No bio yet."),a(),c("ngIf",e.isOwner&&e.profileEditMode)}}function st(i,t){if(i&1){let e=v();l(0,"div",62)(1,"textarea",79),U("ngModelChange",function(o){_(e);let d=r(2);return T(d.draftBio,o)||(d.draftBio=o),m(o)}),s(),l(2,"div",64)(3,"button",65),g("click",function(){_(e);let o=r(2);return m(o.saveBio())}),p(4),s(),l(5,"button",66),g("click",function(){_(e);let o=r(2);return m(o.cancelBioEdit())}),p(6,"Cancel"),s()()()}if(i&2){let e=r(2);a(),O("ngModel",e.draftBio),a(2),c("disabled",e.bioSaving),a(),h(" ",e.bioSaving?"Saving\u2026":"Save bio"," ")}}function lt(i,t){if(i&1&&y(0,"img",93),i&2){let e=r(3);c("src",e.avatarImage,E)}}function ct(i,t){if(i&1&&(l(0,"div",94),p(1),s()),i&2){let e=r(3);a(),x(e.initials)}}function dt(i,t){if(i&1){let e=v();l(0,"button",95),g("click",function(){_(e);let o=r(3);return o.profileComposerOpen=!1,m(o.clearProfileMedia())}),p(1," Cancel "),s()}}function pt(i,t){if(i&1){let e=v();l(0,"button",96),g("click",function(){_(e);let o=r(3);return m(o.profileComposerOpen=!0)}),p(1),s()}if(i&2){let e=r(3);a(),h(" What's new in ",e.profile.country_name,"? ")}}function _t(i,t){if(i&1){let e=v();l(0,"button",95),g("click",function(){_(e);let o=r(4);return m(o.clearProfileMedia())}),p(1," Remove "),s()}}function mt(i,t){if(i&1&&(l(0,"span",104),p(1),s()),i&2){let e=r(4);a(),h(" ",e.postMediaFile.name," ")}}function ft(i,t){if(i&1&&(l(0,"div",105),p(1),s()),i&2){let e=r(4);a(),h(" ",e.postMediaError," ")}}function gt(i,t){if(i&1&&y(0,"img",109),i&2){let e=r(5);c("src",e.postMediaPreview,E)}}function ut(i,t){if(i&1&&y(0,"video",110),i&2){let e=r(5);c("src",e.postMediaPreview,E)}}function vt(i,t){if(i&1&&(l(0,"div",106),f(1,gt,1,1,"img",107)(2,ut,1,1,"video",108),s()),i&2){let e=r(4);a(),c("ngIf",e.postMediaType==="image"),a(),c("ngIf",e.postMediaType==="video")}}function xt(i,t){if(i&1){let e=v();S(0),l(1,"input",97),U("ngModelChange",function(o){_(e);let d=r(3);return T(d.postTitle,o)||(d.postTitle=o),m(o)}),s(),l(2,"textarea",98),U("ngModelChange",function(o){_(e);let d=r(3);return T(d.postBody,o)||(d.postBody=o),m(o)}),s(),l(3,"div",99)(4,"input",100,2),g("change",function(o){_(e);let d=r(3);return m(d.onProfileMediaSelect(o))}),s(),l(6,"button",95),g("click",function(){_(e);let o=B(5);return m(o.click())}),p(7," Add media "),s(),f(8,_t,2,0,"button",90)(9,mt,2,1,"span",101),s(),f(10,ft,2,1,"div",102)(11,vt,3,2,"div",103),k()}if(i&2){let e=r(3);a(),O("ngModel",e.postTitle),a(),c("placeholder",J("Tell ",e.profile.country_name," what's happening...")),O("ngModel",e.postBody),a(6),c("ngIf",e.postMediaFile),a(),c("ngIf",e.postMediaFile),a(),c("ngIf",e.postMediaError),a(),c("ngIf",e.postMediaPreview)}}function ht(i,t){if(i&1&&(l(0,"div",113),p(1),s()),i&2){let e=r(4);I("error",!!e.postError),a(),h(" ",e.postError||e.postFeedback," ")}}function Pt(i,t){if(i&1){let e=v();l(0,"div",111)(1,"button",65),g("click",function(){_(e);let o=r(3);return m(o.submitProfilePost())}),p(2),s(),f(3,ht,2,3,"div",112),s()}if(i&2){let e=r(3);a(),c("disabled",e.postBusy||!e.canPostFromProfile),a(),h(" ",e.postBusy?"Posting\u2026":"Post to "+e.profile.country_name," "),a(),c("ngIf",e.postError||e.postFeedback)}}function Ct(i,t){if(i&1&&(l(0,"div",80)(1,"div",81)(2,"div",82),f(3,lt,1,1,"img",83)(4,ct,2,1,"div",84),s(),l(5,"div",85)(6,"div",86)(7,"div")(8,"div",87),p(9),s(),l(10,"div",88),p(11),s()(),l(12,"div",89),f(13,dt,2,0,"button",90),s()(),f(14,pt,2,1,"button",91)(15,xt,12,8,"ng-container",28),s()(),f(16,Pt,4,3,"div",92),s()),i&2){let e=r(2);a(3),c("ngIf",e.avatarImage),a(),c("ngIf",!e.avatarImage),a(5),h("Share with ",e.profile.country_name),a(2),h("Posts appear in ",e.profile.country_name,"'s live feed."),a(2),c("ngIf",e.profileComposerOpen),a(),c("ngIf",!e.profileComposerOpen),a(),c("ngIf",e.profileComposerOpen),a(),c("ngIf",e.profileComposerOpen)}}function yt(i,t){i&1&&(l(0,"div",114),p(1,"Loading posts\u2026"),s())}function bt(i,t){if(i&1&&(l(0,"div",115),p(1),s()),i&2){let e=r(2);a(),h(" ",e.profilePostsError," ")}}function wt(i,t){i&1&&(l(0,"div",114),p(1," No posts yet. "),s())}function Et(i,t){if(i&1&&y(0,"img",93),i&2){let e=r().$implicit;c("src",e.author==null?null:e.author.avatar_url,E)}}function Mt(i,t){if(i&1&&(l(0,"div",137),p(1),s()),i&2){let e=r().$implicit,n=r(3);a(),h(" ",((e.author==null?null:e.author.display_name)||(e.author==null?null:e.author.username)||n.profile.display_name||"You").slice(0,2).toUpperCase()," ")}}function It(i,t){if(i&1&&(l(0,"span",138),p(1),s()),i&2){let e=r().$implicit,n=r(3);a(),h(" \xB7 ",n.visibilityLabel(e.visibility)," ")}}function St(i,t){if(i&1){let e=v();l(0,"div",148)(1,"div",149),p(2,"Delete this post?"),s(),l(3,"div",150)(4,"button",151),g("click",function(){_(e);let o=r(7);return m(o.cancelPostDelete())}),p(5,"Cancel"),s(),l(6,"button",146),g("click",function(){_(e);let o=r(4).$implicit,d=r(3);return m(d.deletePost(o))}),p(7,"Delete"),s()()()}}function kt(i,t){if(i&1){let e=v();S(0),l(1,"button",145),g("click",function(){_(e);let o=r(3).$implicit,d=r(3);return m(d.startPostEdit(o))}),p(2,"Edit"),s(),l(3,"button",145),g("click",function(){_(e);let o=r(3).$implicit,d=r(3);return m(d.startPostEdit(o))}),p(4,"Privacy"),s(),l(5,"button",146),g("click",function(){_(e);let o=r(3).$implicit,d=r(3);return m(d.requestPostDelete(o))}),p(6,"Delete"),s(),f(7,St,8,0,"div",147),k()}if(i&2){let e=r(3).$implicit,n=r(3);a(7),c("ngIf",n.confirmDeletePostId===e.id)}}function Ot(i,t){if(i&1&&(l(0,"div",158),p(1),s()),i&2){let e=r(8);a(),x(e.reportError)}}function Tt(i,t){if(i&1&&(l(0,"div",159),p(1),s()),i&2){let e=r(8);a(),x(e.reportFeedback)}}function Ut(i,t){if(i&1){let e=v();l(0,"div",153)(1,"textarea",154),U("ngModelChange",function(o){_(e);let d=r(7);return T(d.reportReason,o)||(d.reportReason=o),m(o)}),s(),l(2,"div",150)(3,"button",151),g("click",function(){_(e);let o=r(7);return m(o.cancelReport())}),p(4,"Cancel"),s(),l(5,"button",155),g("click",function(){_(e);let o=r(4).$implicit,d=r(3);return m(d.submitReport(o))}),p(6),s()(),f(7,Ot,2,1,"div",156)(8,Tt,2,1,"div",157),s()}if(i&2){let e=r(7);a(),O("ngModel",e.reportReason),a(4),c("disabled",e.reportBusy),a(),h(" ",e.reportBusy?"Sending...":"Send report"," "),a(),c("ngIf",e.reportError),a(),c("ngIf",e.reportFeedback)}}function Vt(i,t){if(i&1){let e=v();l(0,"button",145),g("click",function(){_(e);let o=r(3).$implicit,d=r(3);return m(d.toggleReport(o.id))}),p(1,"Report"),s(),f(2,Ut,9,5,"div",152)}if(i&2){let e=r(3).$implicit,n=r(3);a(2),c("ngIf",n.reportingPostId===e.id)}}function Lt(i,t){if(i&1&&(l(0,"div",143),f(1,kt,8,1,"ng-container",144)(2,Vt,3,1,"ng-template",null,3,N),s()),i&2){let e=B(3),n=r(5);a(),c("ngIf",n.isOwner)("ngIfElse",e)}}function Bt(i,t){if(i&1){let e=v();l(0,"div",139),g("click",function(o){return _(e),m(o.stopPropagation())}),l(1,"span",140),p(2),s(),l(3,"button",141),g("click",function(o){_(e);let d=r().$implicit,u=r(3);return m(u.togglePostMenu(d.id,o))}),p(4," \u22EF "),s(),f(5,Lt,4,2,"div",142),s()}if(i&2){let e=r().$implicit,n=r(3);a(2),x(n.visibilityIcon(e.visibility)),a(3),c("ngIf",n.openPostMenuId===e.id)}}function Rt(i,t){if(i&1&&(l(0,"div",163),p(1),s()),i&2){let e=r(2).$implicit;a(),x(e.title)}}function zt(i,t){if(i&1){let e=v();l(0,"button",166),g("click",function(o){_(e);let d=r(3).$implicit,u=r(3);return m(u.togglePostExpanded(d.id,o))}),p(1," See more "),s()}}function At(i,t){if(i&1){let e=v();l(0,"p",164),g("click",function(o){_(e);let d=r(2).$implicit,u=r(3);return m(u.onPostTextClick(d.id,o))}),l(1,"span"),p(2),s(),f(3,zt,2,0,"button",165),s()}if(i&2){let e=r(2).$implicit,n=r(3);I("clamped",!n.isPostExpanded(e.id)&&n.isTextExpandable(e.body)),a(2),x(n.isPostExpanded(e.id)?e.body:n.postPreview(e.body)),a(),c("ngIf",!n.isPostExpanded(e.id)&&n.isTextExpandable(e.body))}}function Ft(i,t){if(i&1&&(l(0,"div",160),f(1,Rt,2,1,"div",161)(2,At,4,4,"p",162),s()),i&2){let e=r().$implicit,n=r(3);a(),c("ngIf",e.title),a(),c("ngIf",e.body&&(!e.media_url||e.media_type==="none"||!n.postHasVideo(e)))}}function Dt(i,t){if(i&1&&y(0,"img",93),i&2){let e=r().ngIf;c("src",e.author==null?null:e.author.avatar_url,E)}}function Nt(i,t){if(i&1&&(l(0,"div",179),p(1),s()),i&2){let e=r().ngIf;a(),h(" ",((e.author==null?null:e.author.display_name)||(e.author==null?null:e.author.username)||"User").slice(0,2).toUpperCase()," ")}}function $t(i,t){if(i&1&&(l(0,"span"),p(1),s()),i&2){let e=r().ngIf;a(),h(" - ",e.country_name||e.country_code)}}function Wt(i,t){if(i&1&&(l(0,"div",180),p(1),s()),i&2){let e=r().ngIf;a(),x(e.title)}}function jt(i,t){if(i&1&&(l(0,"div",181),p(1),s()),i&2){let e=r().ngIf,n=r(4);a(),x(n.postPreview(e.body))}}function qt(i,t){if(i&1&&y(0,"img",185),i&2){let e=r(2).ngIf;c("src",e[0],E)}}function Xt(i,t){if(i&1&&y(0,"img",189),i&2){let e=r(5).ngIf;c("src",e.thumb_url,E)}}function Yt(i,t){if(i&1&&(l(0,"div",186),f(1,Xt,1,1,"img",187),l(2,"div",188),p(3,"Video"),s()()),i&2){let e=r(4).ngIf;a(),c("ngIf",e.thumb_url)}}function Zt(i,t){if(i&1&&(S(0),f(1,qt,1,1,"img",183)(2,Yt,4,1,"div",184),k()),i&2){let e=t.ngIf;a(),c("ngIf",e[0]==="image"),a(),c("ngIf",e[0]==="video")}}function Ht(i,t){if(i&1&&(S(0),f(1,Zt,3,2,"ng-container",28),k()),i&2){let e=r(2).ngIf,n=r(4);a(),c("ngIf",n.postMediaTypes(e))}}function Gt(i,t){if(i&1&&(l(0,"div",182),f(1,Ht,2,1,"ng-container",28),s()),i&2){let e=r().ngIf,n=r(4);a(),c("ngIf",n.postMediaUrls(e))}}function Jt(i,t){if(i&1){let e=v();l(0,"div",167)(1,"div",168),p(2,"Shared post"),s(),l(3,"div",169),g("click",function(o){let d=_(e).ngIf,u=r(4);return m(u.openSharedPost(d,o))})("keyup.enter",function(o){let d=_(e).ngIf,u=r(4);return m(u.openSharedPost(d,o))}),l(4,"div",170)(5,"div",171),f(6,Dt,1,1,"img",83)(7,Nt,2,1,"div",172),s(),l(8,"div",173)(9,"div",174),p(10),s(),l(11,"div",175),p(12),F(13,"date"),f(14,$t,2,1,"span",28),s()()(),f(15,Wt,2,1,"div",176)(16,jt,2,1,"div",177)(17,Gt,2,1,"div",178),s()()}if(i&2){let e=t.ngIf;a(6),c("ngIf",e.author==null?null:e.author.avatar_url),a(),c("ngIf",!(e.author!=null&&e.author.avatar_url)),a(3),x((e.author==null?null:e.author.display_name)||(e.author==null?null:e.author.username)||"Member"),a(2),W(" @",(e.author==null?null:e.author.username)||"user"," \xC2\xB7 ",D(13,9,e.created_at,"mediumDate")," "),a(2),c("ngIf",e.country_name||e.country_code),a(),c("ngIf",e.title),a(),c("ngIf",e.body),a(),c("ngIf",e.media_url&&e.media_type!=="none")}}function Qt(i,t){if(i&1){let e=v();l(0,"img",193),g("click",function(){_(e);let o=r(3).ngIf,d=r(5);return m(d.openImageLightbox(o[0]))}),s()}if(i&2){let e=r(3).ngIf;c("src",e[0],E)}}function Kt(i,t){if(i&1){let e=v();l(0,"app-video-player",194),g("viewed",function(){_(e);let o=r(5).$implicit,d=r(3);return m(d.recordView(o))})("videoTap",function(){_(e);let o=r(5).$implicit,d=r(3);return m(d.onPostVideoTap(o))}),s()}if(i&2){let e=r(3).ngIf,n=r(2).$implicit,o=r(3);c("src",e[0])("tapBehavior",o.postIsReel(n)?"emit":"toggle")}}function ei(i,t){if(i&1&&(S(0),f(1,Qt,1,1,"img",191)(2,Kt,1,2,"app-video-player",192),k()),i&2){let e=r().ngIf;a(),c("ngIf",e[0]==="image"),a(),c("ngIf",e[0]==="video")}}function ti(i,t){if(i&1){let e=v();l(0,"app-video-player",194),g("viewed",function(){_(e);let o=r(6).$implicit,d=r(3);return m(d.recordView(o))})("videoTap",function(){_(e);let o=r(6).$implicit,d=r(3);return m(d.onPostVideoTap(o))}),s()}if(i&2){let e=r().$implicit,n=r(5).$implicit,o=r(3);c("src",e)("tapBehavior",o.postIsReel(n)?"emit":"toggle")}}function ii(i,t){if(i&1){let e=v();l(0,"img",193),g("click",function(){_(e);let o=r().$implicit,d=r(8);return m(d.openImageLightbox(o))}),s()}if(i&2){let e=r().$implicit;c("src",e,E)}}function ni(i,t){if(i&1&&(l(0,"div",201),f(1,ti,1,2,"app-video-player",192)(2,ii,1,1,"img",191),s()),i&2){let e=t.index,n=r(2).ngIf;a(),c("ngIf",n[e]==="video"),a(),c("ngIf",n[e]==="image")}}function oi(i,t){if(i&1&&y(0,"span"),i&2){let e=t.index,n=r(5).$implicit,o=r(3);I("active",e===o.postMediaIndexValue(n))}}function ri(i,t){if(i&1){let e=v();l(0,"div",195)(1,"div",196),g("scroll",function(o){_(e);let d=r(4).$implicit,u=r(3);return m(u.onPostMediaScroll(d,o))}),f(2,ni,3,2,"div",197),s(),l(3,"div",198),f(4,oi,1,2,"span",199),l(5,"span",200),p(6),s()()()}if(i&2){let e=r(2).ngIf,n=r(2).$implicit,o=r(3);a(2),c("ngForOf",e),a(2),c("ngForOf",e),a(2),W("",o.postMediaIndexValue(n)+1,"/",e.length)}}function ai(i,t){if(i&1&&(S(0),f(1,ei,3,2,"ng-container",144)(2,ri,7,4,"ng-template",null,4,N),k()),i&2){let e=B(3),n=r().ngIf;a(),c("ngIf",n.length<=1)("ngIfElse",e)}}function si(i,t){if(i&1&&(S(0),f(1,ai,4,2,"ng-container",28),k()),i&2){let e=r(2).$implicit,n=r(3);a(),c("ngIf",n.postMediaTypes(e))}}function li(i,t){if(i&1&&(l(0,"div",190),f(1,si,2,1,"ng-container",28),s()),i&2){let e=r().$implicit,n=r(3);a(),c("ngIf",n.postMediaUrls(e))}}function ci(i,t){if(i&1){let e=v();l(0,"button",166),g("click",function(o){_(e);let d=r(2).$implicit,u=r(3);return m(u.togglePostExpanded(d.id,o))}),p(1," See more "),s()}}function di(i,t){if(i&1){let e=v();l(0,"div",202),g("click",function(o){_(e);let d=r().$implicit,u=r(3);return m(u.onPostTextClick(d.id,o))}),l(1,"span"),p(2),s(),f(3,ci,2,0,"button",165),s()}if(i&2){let e=t.ngIf,n=r().$implicit,o=r(3);I("clamped",!o.isPostExpanded(n.id)&&o.isTextExpandable(e)),a(2),x(o.isPostExpanded(n.id)?e:o.postPreview(e)),a(),c("ngIf",!o.isPostExpanded(n.id)&&o.isTextExpandable(e))}}function pi(i,t){if(i&1){let e=v();l(0,"div",203)(1,"div",204)(2,"button",205),g("click",function(){_(e);let o=r().$implicit,d=r(3);return m(d.togglePostLike(o))}),l(3,"span",206),p(4),s()(),l(5,"button",207),g("click",function(){_(e);let o=r().$implicit,d=r(3);return m(d.toggleLikes(o.id))}),l(6,"span",208),p(7),s()()(),l(8,"button",209),g("click",function(){_(e);let o=r().$implicit,d=r(3);return m(d.toggleComments(o.id))}),l(9,"span",206),p(10),s(),l(11,"span",208),p(12),s()(),l(13,"div",210)(14,"span",206),p(15),s(),l(16,"span",208),p(17),s()()()}if(i&2){let e=r().$implicit,n=r(3);a(2),I("active",e.liked_by_me),c("disabled",n.likeBusy[e.id]),a(2),x(e.liked_by_me?"\u2665":"\u2661"),a(),I("active",n.likeOpen[e.id]),a(2),x(e.like_count),a(),I("active",n.commentOpen[e.id]),a(2),x("\u{1F4AC}"),a(2),x(e.comment_count),a(3),x("\u{1F441}"),a(2),x(e.view_count)}}function _i(i,t){if(i&1&&(l(0,"div",211),p(1),s()),i&2){let e=r().$implicit,n=r(3);a(),h(" ",n.postActionError[e.id]," ")}}function mi(i,t){i&1&&(l(0,"div",216),p(1,"Loading likes..."),s())}function fi(i,t){if(i&1&&(l(0,"div",217),p(1),s()),i&2){let e=r(2).$implicit,n=r(3);a(),x(n.likeErrors[e.id])}}function gi(i,t){i&1&&(l(0,"div",221),p(1,"No likes yet."),s())}function ui(i,t){if(i&1&&y(0,"img",93),i&2){let e=r().$implicit;c("src",e.user==null?null:e.user.avatar_url,E)}}function vi(i,t){if(i&1&&(l(0,"div",229),p(1),s()),i&2){let e=r().$implicit;a(),h(" ",((e.user==null?null:e.user.display_name)||(e.user==null?null:e.user.username)||"U").slice(0,2).toUpperCase()," ")}}function xi(i,t){if(i&1){let e=v();l(0,"button",222),g("click",function(){let o=_(e).$implicit,d=r(6);return m(d.openUserProfile(o.user))}),l(1,"div",223),f(2,ui,1,1,"img",83)(3,vi,2,1,"div",224),s(),l(4,"div",225)(5,"div",226),p(6),s(),l(7,"div",227),p(8),s()(),l(9,"div",228),p(10),F(11,"date"),s()()}if(i&2){let e=t.$implicit;a(2),c("ngIf",e.user==null?null:e.user.avatar_url),a(),c("ngIf",!(e.user!=null&&e.user.avatar_url)),a(3),x((e.user==null?null:e.user.display_name)||(e.user==null?null:e.user.username)||"Member"),a(2),h("@",(e.user==null?null:e.user.username)||"user"),a(2),x(D(11,5,e.created_at,"mediumDate"))}}function hi(i,t){if(i&1&&(l(0,"div",218),f(1,gi,2,0,"div",219)(2,xi,12,8,"button",220),s()),i&2){let e=r(2).$implicit,n=r(3);a(),c("ngIf",!(n.likeItems[e.id]!=null&&n.likeItems[e.id].length)),a(),c("ngForOf",n.likeItems[e.id])}}function Pi(i,t){if(i&1&&(l(0,"div",212),f(1,mi,2,0,"div",213)(2,fi,2,1,"div",214)(3,hi,3,2,"div",215),s()),i&2){let e=r().$implicit,n=r(3);a(),c("ngIf",n.likeLoading[e.id]),a(),c("ngIf",n.likeErrors[e.id]),a(),c("ngIf",!n.likeLoading[e.id]&&!n.likeErrors[e.id])}}function Ci(i,t){i&1&&(l(0,"div",235),p(1,"Loading comments..."),s())}function yi(i,t){if(i&1&&(l(0,"div",236),p(1),s()),i&2){let e=r(2).$implicit,n=r(3);a(),x(n.commentErrors[e.id])}}function bi(i,t){i&1&&(l(0,"div",240),p(1,"No comments yet."),s())}function wi(i,t){if(i&1&&y(0,"img",93),i&2){let e=r().$implicit;c("src",e.author==null?null:e.author.avatar_url,E)}}function Ei(i,t){if(i&1&&(l(0,"div",254),p(1),s()),i&2){let e=r().$implicit;a(),h(" ",((e.author==null?null:e.author.display_name)||(e.author==null?null:e.author.username)||"U").slice(0,2).toUpperCase()," ")}}function Mi(i,t){i&1&&(l(0,"span",255),p(1,"\u2661"),s())}function Ii(i,t){i&1&&(l(0,"span",256),p(1,"\u2665"),s())}function Si(i,t){if(i&1&&(l(0,"span",257),p(1),s()),i&2){let e=r().$implicit;a(),h(" ",e.like_count," ")}}function ki(i,t){if(i&1){let e=v();l(0,"div",241)(1,"div",242),f(2,wi,1,1,"img",83)(3,Ei,2,1,"div",243),s(),l(4,"div",244)(5,"div",245)(6,"span",246),p(7),s(),l(8,"span",247),p(9),F(10,"date"),s()(),l(11,"div",248),p(12),s(),l(13,"div",249)(14,"button",250),g("click",function(){let o=_(e).$implicit,d=r(3).$implicit,u=r(3);return m(u.startCommentReply(d.id,o))}),p(15," Reply "),s(),l(16,"button",250),g("click",function(){let o=_(e).$implicit,d=r(3).$implicit,u=r(3);return m(u.toggleCommentLike(d.id,o))}),f(17,Mi,2,0,"span",251)(18,Ii,2,0,"span",252)(19,Si,2,1,"span",253),s()()()()}if(i&2){let e=t.$implicit,n=r(3).$implicit,o=r(3);A("margin-left",((o.commentDepth[n.id]==null?null:o.commentDepth[n.id][e.id])??0)*18,"px"),a(2),c("ngIf",e.author==null?null:e.author.avatar_url),a(),c("ngIf",!(e.author!=null&&e.author.avatar_url)),a(4),x((e.author==null?null:e.author.display_name)||(e.author==null?null:e.author.username)||"Member"),a(2),x(D(10,14,e.created_at,"mediumDate")),a(3),x(e.body),a(2),c("disabled",o.commentBusy[n.id]),a(2),I("active",e.liked_by_me),c("disabled",o.commentLikeBusy[n.id]==null?null:o.commentLikeBusy[n.id][e.id]),a(),c("ngIf",!e.liked_by_me),a(),c("ngIf",e.liked_by_me),a(),c("ngIf",e.like_count)}}function Oi(i,t){if(i&1&&(l(0,"div",237),f(1,bi,2,0,"div",238)(2,ki,20,17,"div",239),s()),i&2){let e=r(2).$implicit,n=r(3);a(),c("ngIf",!(n.commentDisplay[e.id]!=null&&n.commentDisplay[e.id].length)),a(),c("ngForOf",n.commentDisplay[e.id]||Q(2,Te))}}function Ti(i,t){if(i&1){let e=v();l(0,"div",262),p(1," Replying to "),l(2,"span"),p(3),s(),l(4,"button",66),g("click",function(){_(e);let o=r(3).$implicit,d=r(3);return m(d.cancelCommentReply(o.id))}),p(5,"Cancel"),s()()}if(i&2){let e=t.ngIf;a(3),h("@",e.authorName)}}function Ui(i,t){if(i&1){let e=v();l(0,"div",258),f(1,Ti,6,1,"div",259),l(2,"input",260),U("ngModelChange",function(o){_(e);let d=r(2).$implicit,u=r(3);return T(u.commentDrafts[d.id],o)||(u.commentDrafts[d.id]=o),m(o)}),s(),l(3,"button",261),g("click",function(){_(e);let o=r(2).$implicit,d=r(3);return m(d.submitComment(o))}),p(4),s()()}if(i&2){let e=r(2).$implicit,n=r(3);a(),c("ngIf",n.commentReplyTarget[e.id]),a(),c("disabled",n.commentBusy[e.id]),O("ngModel",n.commentDrafts[e.id]),a(),c("disabled",n.commentBusy[e.id]),a(),h(" ",n.commentBusy[e.id]?"Sending...":"Comment"," ")}}function Vi(i,t){i&1&&(l(0,"div",263),p(1,"Sign in to comment."),s())}function Li(i,t){if(i&1&&(l(0,"div",230),f(1,Ci,2,0,"div",231)(2,yi,2,1,"div",232)(3,Oi,3,3,"div",233)(4,Ui,5,5,"div",234)(5,Vi,2,0,"ng-template",null,5,N),s()),i&2){let e=B(6),n=r().$implicit,o=r(3);a(),c("ngIf",o.commentLoading[n.id]),a(),c("ngIf",o.commentErrors[n.id]),a(),c("ngIf",!o.commentLoading[n.id]&&!o.commentErrors[n.id]),a(),c("ngIf",o.meId)("ngIfElse",e)}}function Bi(i,t){if(i&1&&(l(0,"div",276),p(1),s()),i&2){let e=r(5);a(),x(e.postEditError)}}function Ri(i,t){if(i&1){let e=v();l(0,"div",264)(1,"input",265),U("ngModelChange",function(o){_(e);let d=r(4);return T(d.editPostTitle,o)||(d.editPostTitle=o),m(o)}),s(),l(2,"textarea",266),U("ngModelChange",function(o){_(e);let d=r(4);return T(d.editPostBody,o)||(d.editPostBody=o),m(o)}),s(),l(3,"div",267)(4,"select",268),U("ngModelChange",function(o){_(e);let d=r(4);return T(d.editPostVisibility,o)||(d.editPostVisibility=o),m(o)}),l(5,"option",269),p(6,"Public"),s(),l(7,"option",270),p(8,"Only followers"),s(),l(9,"option",271),p(10,"Only me"),s()(),l(11,"div",272)(12,"button",273),g("click",function(){_(e);let o=r(4);return m(o.cancelPostEdit())}),p(13,"Cancel"),s(),l(14,"button",274),g("click",function(){_(e);let o=r().$implicit,d=r(3);return m(d.savePostEdit(o))}),p(15),s()()(),f(16,Bi,2,1,"div",275),s()}if(i&2){let e=r(4);a(),O("ngModel",e.editPostTitle),a(),O("ngModel",e.editPostBody),a(2),O("ngModel",e.editPostVisibility),a(8),c("disabled",e.postEditBusy),a(2),c("disabled",e.postEditBusy),a(),h(" ",e.postEditBusy?"Saving\u2026":"Save"," "),a(),c("ngIf",e.postEditError)}}function zi(i,t){if(i&1&&(l(0,"article",118)(1,"div",119)(2,"div",120)(3,"div",121),f(4,Et,1,1,"img",83)(5,Mt,2,1,"div",122),s(),l(6,"div",123)(7,"div",124),p(8),s(),l(9,"div",125),p(10),F(11,"date"),f(12,It,2,1,"span",126),s()()(),f(13,Bt,6,2,"div",127),s(),f(14,Ft,3,2,"div",128)(15,Jt,18,12,"div",129)(16,li,2,1,"div",130)(17,di,4,4,"div",131)(18,pi,18,13,"div",132)(19,_i,2,1,"div",133)(20,Pi,4,3,"div",134)(21,Li,7,5,"div",135)(22,Ri,17,7,"div",136),s()),i&2){let e=t.$implicit,n=r(3);I("media",!!e.media_url&&e.media_type!=="none"),a(4),c("ngIf",e.author==null?null:e.author.avatar_url),a(),c("ngIf",!(e.author!=null&&e.author.avatar_url)),a(3),x((e.author==null?null:e.author.display_name)||(e.author==null?null:e.author.username)||"You"),a(2),W(" @",(e.author==null?null:e.author.username)||"user"," \xB7 ",D(11,18,e.created_at,"mediumDate")," "),a(2),c("ngIf",e.visibility!=="public"&&e.visibility!=="country"),a(),c("ngIf",n.editingPostId!==e.id),a(),c("ngIf",n.editingPostId!==e.id),a(),c("ngIf",e.shared_post),a(),c("ngIf",n.editingPostId!==e.id&&e.media_url&&e.media_type!=="none"),a(),c("ngIf",n.editingPostId!==e.id&&e.media_url&&e.media_type!=="none"&&n.postCaptionText(e)),a(),c("ngIf",n.editingPostId!==e.id),a(),c("ngIf",n.postActionError[e.id]),a(),c("ngIf",n.likeOpen[e.id]&&n.editingPostId!==e.id),a(),c("ngIf",n.commentOpen[e.id]&&n.editingPostId!==e.id),a(),c("ngIf",n.editingPostId===e.id)}}function Ai(i,t){if(i&1&&(l(0,"div",116),f(1,zi,23,21,"article",117),s()),i&2){let e=r(2);a(),c("ngForOf",e.profilePosts)("ngForTrackBy",e.trackProfilePostById)}}function Fi(i,t){if(i&1){let e=v();l(0,"div",283),g("pointerdown",function(o){_(e);let d=r(3);return m(d.onAvatarDragStart(o))}),y(1,"img",284)(2,"span",19),s()}if(i&2){let e=r(3);I("adjusting",!0),a(),A("transform",e.draftAvatarTransform),c("src",e.draftAvatarUrl,E)}}function Di(i,t){i&1&&(l(0,"div",285),p(1,"Choose an image to begin."),s())}function Ni(i,t){i&1&&(l(0,"span",45),p(1,"Uploading..."),s())}function $i(i,t){if(i&1&&(l(0,"small",46),p(1),s()),i&2){let e=r(3);a(),x(e.avatarError)}}function Wi(i,t){if(i&1){let e=v();l(0,"div",277)(1,"div",278)(2,"div")(3,"div",32),p(4,"Avatar"),s(),l(5,"small"),p(6,"Upload a square image (PNG/JPG/WebP). Drag to position inside the circle."),s()(),l(7,"button",279),g("click",function(){_(e),r(2);let o=B(5);return m(o.click())}),p(8,"Choose image"),s()(),l(9,"div",280),f(10,Fi,3,5,"div",281)(11,Di,2,0,"div",282),s(),l(12,"div",64),f(13,Ni,2,0,"span",42),l(14,"button",66),g("click",function(){_(e);let o=r(2);return m(o.cancelAvatarEdit())}),p(15,"Cancel"),s(),f(16,$i,2,1,"small",43),s()()}if(i&2){let e=r(2);a(10),c("ngIf",e.draftAvatarUrl),a(),c("ngIf",!e.draftAvatarUrl),a(2),c("ngIf",e.avatarUploading&&!e.draftAvatarUploadUrl),a(3),c("ngIf",e.avatarError)}}function ji(i,t){if(i&1){let e=v();l(0,"div",11)(1,"div",12)(2,"div",13)(3,"button",14),g("click",function(){_(e);let o=r();return m(o.goBack())}),p(4,"Back"),s()(),l(5,"div",15),g("click",function(){_(e);let o=r();return m(o.openAvatarModal())}),l(6,"div",16),f(7,Ue,1,3,"img",17)(8,Ve,2,1,"div",18),y(9,"span",19),s(),f(10,ze,6,3,"div",20),s(),l(11,"div",21),f(12,je,10,8,"div",22)(13,qe,2,3,"div",23)(14,Xe,7,3,"div",24)(15,Ze,4,2,"div",25)(16,et,12,3,"div",26)(17,it,10,4,"div",24),l(18,"div",27),f(19,nt,2,1,"span",28)(20,ot,2,1,"span",28),s(),f(21,at,4,2,"div",29)(22,st,7,3,"div",24),s()(),f(23,Ct,17,8,"div",30),l(24,"div",31)(25,"div",32),p(26,"Posts"),s(),f(27,yt,2,0,"div",33)(28,bt,2,1,"div",34)(29,wt,2,0,"div",33)(30,Ai,2,2,"div",35),s(),f(31,Wi,17,4,"div",36),s()}if(i&2){let e=r();a(7),c("ngIf",e.avatarImage),a(),c("ngIf",!e.avatarImage),a(2),c("ngIf",e.isOwner&&e.profileEditMode),a(2),c("ngIf",!e.editingName),a(),c("ngIf",e.shareCopied||e.shareError),a(),c("ngIf",e.editingName),a(),c("ngIf",!e.editingUsername),a(),c("ngIf",e.profile),a(),c("ngIf",e.editingUsername),a(2),c("ngIf",e.profile.country_name),a(),c("ngIf",e.profile.city_name),a(),c("ngIf",!e.editingBio),a(),c("ngIf",e.editingBio),a(),c("ngIf",e.canPostFromProfile),a(4),c("ngIf",e.loadingProfilePosts),a(),c("ngIf",!e.loadingProfilePosts&&e.profilePostsError),a(),c("ngIf",!e.loadingProfilePosts&&!e.profilePosts.length&&!e.profilePostsError),a(),c("ngIf",!e.loadingProfilePosts&&e.profilePosts.length),a(),c("ngIf",e.editingAvatar)}}function qi(i,t){i&1&&(l(0,"div"),p(1,"Loading profile\u2026"),s())}function Xi(i,t){if(i&1&&(l(0,"div"),p(1),s()),i&2){let e=r(2);a(),x(e.error||"Profile not found.")}}function Yi(i,t){if(i&1&&(l(0,"div",286),f(1,qi,2,0,"div",28)(2,Xi,2,1,"div",28),s()),i&2){let e=r();a(),c("ngIf",e.loading),a(),c("ngIf",!e.loading)}}function Zi(i,t){if(i&1){let e=v();l(0,"div",287),g("click",function(){_(e);let o=r();return m(o.closeAvatarModal())}),l(1,"div",288),g("click",function(o){return _(e),m(o.stopPropagation())}),l(2,"div",289),y(3,"img",37)(4,"span",19),s(),l(5,"button",66),g("click",function(){_(e);let o=r();return m(o.closeAvatarModal())}),p(6,"Close"),s()()()}if(i&2){let e=r();a(3),A("transform",e.avatarModalTransform),c("src",e.avatarModalImage,E)}}function Hi(i,t){if(i&1){let e=v();l(0,"div",290),g("click",function(){_(e);let o=r();return m(o.closeImageLightbox())}),l(1,"button",291),g("click",function(o){return _(e),r().closeImageLightbox(),m(o.stopPropagation())}),p(2," \xD7 "),s(),l(3,"div",292),g("click",function(o){return _(e),m(o.stopPropagation())}),y(4,"img",293),s()()}if(i&2){let e=r();a(4),c("src",e.lightboxUrl,E)}}var Me=class i{constructor(t,e,n,o,d,u,b,P,C,R,w,V,L){this.route=t;this.router=e;this.profiles=n;this.auth=o;this.media=d;this.posts=u;this.postEvents=b;this.follows=P;this.messagesService=C;this.presence=R;this.location=w;this.zone=V;this.cdr=L}profile=null;loading=!1;error="";sub;postEventsCreatedSub;postEventsInsertSub;postEventsUpdatedSub;postEventsUpdateSub;postEventsDeleteSub;locationRefreshTimer=null;locationRefreshInFlight=!1;LOCATION_REFRESH_MS=10*6e4;shareUrl="";shareCopied=!1;shareError="";shareTimer=null;isOwner=!1;meId=null;meEmail=null;currentSlug="";followersCount=null;followingCount=null;followMetaLoading=!1;viewerFollowing=!1;followBusy=!1;followError="";messageBusy=!1;messageError="";followProfileId=null;postTitle="";postBody="";postMediaFile=null;postMediaPreview="";postMediaType=null;postMediaError="";postMediaIndex={};postBusy=!1;postError="";postFeedback="";profileComposerOpen=!1;editingPostId=null;editPostTitle="";editPostBody="";editPostVisibility="public";postEditBusy=!1;postEditError="";lightboxUrl=null;POST_TEXT_LIMIT=220;POST_TEXT_PREVIEW=140;expandedPosts=new Set;viewedPostIds=new Set;openPostMenuId=null;confirmDeletePostId=null;likeBusy={};likeOpen={};likeLoading={};likeErrors={};likeItems={};postActionError={};commentOpen={};commentLoading={};commentBusy={};commentErrors={};commentDrafts={};commentItems={};commentDisplay={};commentDepth={};commentReplyTarget={};commentLikeBusy={};reportingPostId=null;reportReason="";reportBusy=!1;reportError="";reportFeedback="";profilePosts=[];loadingProfilePosts=!1;profilePostsError="";profileOnline=!1;onlineIds=new Set;presenceStarted=!1;avatarImage="";avatarNormX=0;avatarNormY=0;avatarModalOpen=!1;avatarInputRef;avatarBeforeEdit="";editingName=!1;nameSaving=!1;draftDisplayName="";editingUsername=!1;usernameSaving=!1;draftUsername="";usernameError="";editingBio=!1;bioSaving=!1;draftBio="";bio="";profileEditMode=!1;profileEditSaving=!1;profileEditSaved=!1;profileEditCloseTimer=null;editingAvatar=!1;avatarSaving=!1;avatarUploading=!1;avatarError="";draftAvatarUrl="";draftAvatarUploadUrl="";avatarPreviewUrl="";AVATAR_OUT_SIZE=512;EDIT_SIZE=180;EDIT_SCALE=1.25;USERNAME_PATTERN=/^[a-z0-9._]{3,24}$/;draftNormX=0;draftNormY=0;dragging=!1;startX=0;startY=0;basePxX=0;basePxY=0;pendingPxX=0;pendingPxY=0;raf=0;async ngOnInit(){this.postEventsCreatedSub=this.postEvents.createdPost$.subscribe(e=>{this.zone.run(()=>this.handleNewProfilePost(e))}),this.postEventsInsertSub=this.postEvents.insert$.subscribe(e=>{!this.profile||e.author_id!==this.profile.user_id||this.loadProfilePosts(this.profile.user_id)}),this.postEventsUpdatedSub=this.postEvents.updatedPost$.subscribe(e=>{this.zone.run(()=>this.handleProfilePostUpdated(e))}),this.postEventsUpdateSub=this.postEvents.update$.subscribe(e=>{this.zone.run(()=>this.handleProfilePostUpdateEvent(e))}),this.postEventsDeleteSub=this.postEvents.delete$.subscribe(e=>{this.zone.run(()=>this.handleProfilePostDeleteEvent(e))});let t=await this.auth.getUser();this.meId=t?.id??null,this.meEmail=t?.email??null,this.startPresenceStatus(),this.sub=this.route.paramMap.subscribe(e=>{let n=e.get("slug")??"";this.loadProfile(n)})}ngOnDestroy(){this.sub?.unsubscribe(),this.postEventsCreatedSub?.unsubscribe(),this.postEventsInsertSub?.unsubscribe(),this.postEventsUpdatedSub?.unsubscribe(),this.postEventsUpdateSub?.unsubscribe(),this.postEventsDeleteSub?.unsubscribe();try{this.presence.stop()}catch{}this.stopLocationRefresh(),this.shareTimer&&clearTimeout(this.shareTimer),this.profileEditCloseTimer&&clearTimeout(this.profileEditCloseTimer)}get initials(){let e=(this.profile?.display_name||this.profile?.username||"U").trim().split(/\s+/).filter(Boolean),n=e[0]?.[0]??"U",o=e.length>1?e[e.length-1]?.[0]??"":"";return(n+o).toUpperCase()}get avatarTransform(){let t=this.maxOffset(110,1.2);return`translate3d(${this.avatarNormX*t}px, ${this.avatarNormY*t}px, 0)`}get draftAvatarTransform(){let t=this.maxOffset(this.EDIT_SIZE,this.EDIT_SCALE);return`translate3d(${this.draftNormX*t}px, ${this.draftNormY*t}px, 0)`}get avatarModalImage(){return this.draftAvatarUrl||this.avatarImage}get avatarModalTransform(){let t=this.maxOffset(180,1.2);return`translate3d(${this.avatarNormX*t}px, ${this.avatarNormY*t}px, 0)`}get canPostFromProfile(){if(!this.isOwner||!this.profile)return!1;let t=this.profile?.country_code,e=this.profile.country_name;return!!t&&!!e}async goHome(){await this.router.navigateByUrl("/")}async loadProfile(t){this.loading=!0,this.error="",this.profile=null,this.resetFollowState(),this.messageBusy=!1,this.messageError="",this.forceUi();try{let e=(t||"").trim();if(!e)throw new Error("Profile not found.");let n=e.startsWith("@")?e.slice(1):e;this.currentSlug=n.toLowerCase();let o=null;if(n&&(o=(await this.profiles.profileByUsername(n)).profileByUsername??null),!o&&this.meId){let u=(await this.profiles.profileById(this.meId)).profileById??null;if(u){let b=this.currentSlug,P=(u.username||"").toLowerCase(),C=(u.display_name||"").toLowerCase(),R=(u.email||"").split("@")[0].toLowerCase();(b===P||b===C||b===R)&&(o=u)}}o||(o=(await this.profiles.profileById(e)).profileById??null),o?this.applyProfile(o):this.error="Profile not found."}catch(e){this.error=e?.message??String(e)}finally{this.loading=!1,this.forceUi()}}applyProfile(t){this.profile=t,this.avatarImage=this.normalizeAvatarUrl(t?.avatar_url??""),this.bio=t?.bio??"",this.draftDisplayName=t.display_name??"",this.draftBio=this.bio??"",this.draftUsername=t.username??"",this.usernameError="",this.shareUrl=this.buildShareUrl(t),this.shareCopied=!1,this.shareError="";let e=(this.meEmail||"").split("@")[0].toLowerCase(),n=(t.username||"").toLowerCase(),o=(t.email||"").toLowerCase(),d=!!this.currentSlug&&(n===this.currentSlug||e===this.currentSlug);this.isOwner=!!this.meId&&t.user_id===this.meId||!!this.meEmail&&o&&o===(this.meEmail||"").toLowerCase()||!!this.meEmail&&d,this.updateProfileOnline(),this.stopLocationRefresh(),this.isOwner&&this.startLocationRefresh(),this.resetFollowState(),this.messageBusy=!1,this.messageError="",this.canPostFromProfile||(this.profileComposerOpen=!1),this.loadFollowMeta(t),this.loadProfilePosts(t.user_id)}updateProfileOnline(){if(!this.profile?.user_id){this.profileOnline=!1;return}this.profileOnline=this.onlineIds.has(this.profile.user_id)}resetFollowState(){this.followersCount=null,this.followingCount=null,this.viewerFollowing=!1,this.followError="",this.followMetaLoading=!1,this.followProfileId=null,this.followBusy=!1}async startPresenceStatus(){if(!this.presenceStarted){this.presenceStarted=!0;try{await this.presence.start({countries:[],loadProfiles:!1,onUpdate:t=>{this.onlineIds=new Set(t.onlineIds??[]),this.updateProfileOnline(),this.forceUi()}})}catch{this.presenceStarted=!1}}}startLocationRefresh(){this.locationRefreshTimer||!this.isOwner||!this.profile||(this.refreshLocationIfMoved(),this.locationRefreshTimer=window.setInterval(()=>{this.refreshLocationIfMoved()},this.LOCATION_REFRESH_MS))}stopLocationRefresh(){this.locationRefreshTimer&&(window.clearInterval(this.locationRefreshTimer),this.locationRefreshTimer=null)}async refreshLocationIfMoved(){if(!(this.locationRefreshInFlight||!this.isOwner||!this.profile)){this.locationRefreshInFlight=!0;try{let t=await this.location.detectViaGpsThenServer(9e3);if(!t)return;let e=String(t.countryCode??"").trim().toUpperCase(),n=String(t.countryName??"").trim(),o=String(t.cityName??"").trim(),d=String(this.profile?.country_code??"").trim().toUpperCase(),u=String(this.profile.country_name??"").trim(),b=String(this.profile?.city_name??"").trim(),P={};if(e&&e!==d&&(P.country_code=e),n&&n.toLowerCase()!==u.toLowerCase()&&(P.country_name=n),o&&o.toLowerCase()!==b.toLowerCase()&&(P.city_name=o),!Object.keys(P).length)return;let C=await this.profiles.updateProfile(P);this.profile=C.updateProfile,this.canPostFromProfile||(this.profileComposerOpen=!1),this.forceUi()}catch(t){console.warn("location refresh failed",t)}finally{this.locationRefreshInFlight=!1}}}async loadFollowMeta(t){if(!t?.user_id){this.resetFollowState();return}let e=t.user_id;this.followProfileId=e,this.followMetaLoading=!0,this.followError="",this.forceUi();try{let[n,o]=await Promise.all([this.follows.counts(e),!this.isOwner&&this.meId?this.follows.isFollowing(this.meId,e):Promise.resolve(!1)]);if(this.followProfileId!==e)return;this.followersCount=n.followers,this.followingCount=n.following,this.viewerFollowing=o}catch(n){this.followProfileId===e&&(this.followError=n?.message??String(n))}finally{this.followProfileId===e&&(this.followMetaLoading=!1,this.forceUi())}}async toggleFollow(){if(!(!this.profile||this.isOwner)){if(!this.meId){await this.router.navigate(["/auth"]);return}if(!(this.followMetaLoading||this.followBusy)){this.followBusy=!0,this.followError="",this.forceUi();try{if(this.viewerFollowing){await this.follows.unfollow(this.meId,this.profile.user_id),this.viewerFollowing=!1;let t=(this.followersCount??1)-1;this.followersCount=t<0?0:t}else await this.follows.follow(this.meId,this.profile.user_id),this.viewerFollowing=!0,this.followersCount=(this.followersCount??0)+1}catch(t){this.followError=t?.message??String(t)}finally{this.followBusy=!1,this.forceUi()}}}}async startConversation(){if(!(!this.profile||this.isOwner||this.messageBusy)){this.messageBusy=!0,this.messageError="",this.forceUi();try{let t=await this.messagesService.startConversation(this.profile.user_id);this.messagesService.setPendingConversation(t),this.router.navigate(["/messages"],{queryParams:{c:t.id},state:{convo:t}})}catch(t){this.messageError=t?.message??String(t)}finally{this.messageBusy=!1,this.forceUi()}}}openUserProfile(t){if(!t)return;let e=t.username?.trim()||t.user_id;e&&this.router.navigate(["/user",e])}postMediaUrls(t){let e=String(t?.media_url||"").trim();if(!e)return[];if(e.startsWith("{")||e.startsWith("["))try{let n=JSON.parse(e);if(Array.isArray(n))return n.filter(Boolean).map(String);if(Array.isArray(n?.urls))return n.urls.filter(Boolean);if(n?.url)return[n.url]}catch{}return[e]}postMediaTypes(t){let e=String(t?.media_url||"").trim();if(!e)return[];if(e.startsWith("{")||e.startsWith("["))try{let n=JSON.parse(e);if(Array.isArray(n))return n.map(o=>this.inferMediaTypeFromUrl(o,t.media_type));if(Array.isArray(n?.types)&&n.types.length)return Array.isArray(n?.urls)&&n.urls.length?n.urls.map((o,d)=>{let u=n.types?.[d];return u==="video"||u==="image"?u:this.inferMediaTypeFromUrl(o,t.media_type)}):n.types.map(o=>o==="video"?"video":"image");if(Array.isArray(n?.urls))return n.urls.map(o=>this.inferMediaTypeFromUrl(o,t.media_type));if(n?.url)return[this.inferMediaTypeFromUrl(n.url,t.media_type)]}catch{}return[this.inferMediaTypeFromUrl(e,t.media_type)]}inferMediaTypeFromUrl(t,e){let n=String(t||"").toLowerCase();return/\.(mp4|webm|mov|m4v|avi|mkv)(\?|#|$)/.test(n)?"video":/\.(jpg|jpeg|png|gif|webp|avif)(\?|#|$)/.test(n)?"image":String(e||"").toLowerCase()==="video"?"video":"image"}postIsReel(t){let e=String(t?.media_url||"").trim();if(!e)return!1;if(e.startsWith("{")||e.startsWith("["))try{let o=JSON.parse(e)?.reel;return o===!0||o==="true"||o===1||o==="1"}catch{}return!1}postMediaIndexValue(t){return this.postMediaIndex[t.id]??0}onPostMediaScroll(t,e){let n=e?.target;if(!n)return;let o=n.clientWidth||1,d=Math.max(0,n.children.length-1),u=Math.round(n.scrollLeft/o);this.postMediaIndex[t.id]=Math.min(Math.max(u,0),d)}mediaTransform(t){return`translateX(-${this.postMediaIndexValue(t)*100}%)`}nextPostMedia(t,e){let n=this.postMediaIndexValue(t),o=Math.min(e-1,n+1);this.postMediaIndex[t.id]=o}prevPostMedia(t){let e=this.postMediaIndexValue(t),n=Math.max(0,e-1);this.postMediaIndex[t.id]=n}onPostVideoTap(t){this.postIsReel(t)&&this.openReels(t)}openReels(t){if(!t)return;let e=t.country_code?.toUpperCase()||t.author?.country_code?.toUpperCase()||this.profile?.country_code?.toUpperCase();if(!e)return;let n=this.buildReelSeedPosts(t);this.router.navigate(["/reels",e],{queryParams:{postId:t.id},state:{seedPosts:n,seedCountry:e,countryName:this.profile?.country_name||t.country_name||null}})}openSharedPost(t,e){if(e&&(e.preventDefault(),e.stopPropagation()),!t)return;let n=t.shared_post_id||t.id;n&&this.router.navigate(["/globe"],{queryParams:{post:n,tab:"posts",panel:null}})}buildReelSeedPosts(t){let e=(this.profilePosts||[]).filter(u=>u.media_type==="video"&&!!u.media_url&&this.postIsReel(u)),n=[t,...e],o=new Set,d=[];for(let u of n)if(!(!u?.id||o.has(u.id))&&(o.add(u.id),d.push(u),d.length>=50))break;return d}onProfileMediaSelect(t){let e=t.target,n=e.files?.[0]??null;if(!n)return;let o=n.type.startsWith("image/"),d=n.type.startsWith("video/");if(!o&&!d){this.postMediaError="Only images or videos are allowed.",e.value="";return}let u=d?40*1024*1024:12*1024*1024;if(n.size>u){this.postMediaError=`File too large. Max ${d?"40MB":"12MB"}.`,e.value="";return}this.clearProfileMedia(),this.postMediaFile=n,this.postMediaType=d?"video":"image",this.postMediaPreview=URL.createObjectURL(n),this.postMediaError=""}clearProfileMedia(){if(this.postMediaPreview)try{URL.revokeObjectURL(this.postMediaPreview)}catch{}this.postMediaFile=null,this.postMediaPreview="",this.postMediaType=null,this.postMediaError=""}async submitProfilePost(){if(!this.profile||!this.meId||!this.canPostFromProfile)return;let t=this.postBody.trim(),e=!!this.postMediaFile;if(!t&&!e){this.postError="Add text or media before posting.";return}this.postBusy=!0,this.postError="",this.postFeedback="",this.forceUi();try{let n=this.postTitle.trim(),o=String(this.profile?.country_code||"").toUpperCase(),d=this.profile.country_name;if(!o||!d)throw new Error("Country details missing.");let u=null,b=null;this.postMediaFile&&(b=(await this.media.uploadPostMedia(this.postMediaFile)).publicUrl,u=this.postMediaType||(this.postMediaFile.type.startsWith("video/")?"video":"image"));let P=await this.posts.createPost({authorId:this.meId,title:n||null,body:t,countryCode:o,countryName:d,cityName:this.profile?.city_name??null,mediaType:u,mediaUrl:b});this.profilePosts.some(C=>C.id===P.id)||(this.profilePosts=this.sortPostsDesc([P,...this.profilePosts])),this.postTitle="",this.postBody="",this.clearProfileMedia(),this.profileComposerOpen=!1,this.postFeedback=b?"Posted to Media (your country + followers feed).":`Shared with ${d}.`,this.forceUi(),setTimeout(()=>{this.postFeedback="",this.cdr.detectChanges()},2e3)}catch(n){this.postError=n?.message??String(n)}finally{this.postBusy=!1,this.forceUi()}}startNameEdit(){this.draftDisplayName=this.profile?.display_name??"",this.editingName=!0}cancelNameEdit(){this.editingName=!1,this.draftDisplayName=this.profile?.display_name??""}async saveDisplayName(){if(!this.profile)return;let t=this.draftDisplayName.trim();if(t){this.nameSaving=!0,this.forceUi();try{let e=await this.profiles.updateProfile({display_name:t});this.applyProfile(e.updateProfile),this.editingName=!1}catch(e){this.error=e?.message??String(e)}finally{this.nameSaving=!1,this.forceUi()}}}startUsernameEdit(){this.isOwner&&(this.usernameError="",this.draftUsername=this.profile?.username??"",this.editingUsername=!0)}cancelUsernameEdit(){this.editingUsername=!1,this.usernameError="",this.draftUsername=this.profile?.username??""}onUsernameDraftChange(){this.usernameError&&(this.usernameError="",this.forceUi())}async saveUsername(){if(!this.profile||!this.isOwner)return;let t=this.normalizeUsername(this.draftUsername);if(!t){this.usernameError="Username is required.";return}if(!this.USERNAME_PATTERN.test(t)){this.usernameError="Use 3-24 letters, numbers, dots, or underscores.";return}if((this.profile.username??"")===t){this.editingUsername=!1;return}this.usernameSaving=!0,this.usernameError="",this.forceUi();try{let e=await this.profiles.updateProfile({username:t});this.applyProfile(e.updateProfile),this.editingUsername=!1}catch(e){let n=(e?.message??String(e)).toLowerCase();n.includes("duplicate")||n.includes("unique")?this.usernameError="Handle already taken.":this.usernameError=e?.message??String(e)}finally{this.usernameSaving=!1,this.forceUi()}}startBioEdit(){this.draftBio=this.bio??"",this.editingBio=!0}cancelBioEdit(){this.editingBio=!1,this.draftBio=this.bio??""}async saveBio(){let t=this.draftBio.trim();this.bioSaving=!0,this.forceUi();try{let e=await this.profiles.updateProfile({bio:t?t.slice(0,160):null});this.applyProfile(e.updateProfile),this.editingBio=!1}catch(e){this.error=e?.message??String(e)}finally{this.bioSaving=!1,this.forceUi()}}toggleAvatarEditor(t){t.stopPropagation(),this.editingAvatar=!this.editingAvatar,this.avatarError="",this.editingAvatar&&(this.draftAvatarUrl=this.avatarImage||"",this.draftAvatarUploadUrl=this.avatarImage||"",this.draftNormX=this.avatarNormX,this.draftNormY=this.avatarNormY),this.forceUi()}triggerAvatarUpload(t){this.openAvatarUpload(t);let e=this.avatarInputRef?.nativeElement;e&&e.click()}openAvatarUpload(t){t.stopPropagation(),this.editingAvatar||(this.avatarBeforeEdit=this.avatarImage||"",this.editingAvatar=!0,this.draftAvatarUrl=this.avatarImage||"",this.draftAvatarUploadUrl="",this.draftNormX=this.avatarNormX,this.draftNormY=this.avatarNormY,this.forceUi())}cancelAvatarEdit(){if(this.editingAvatar=!1,this.avatarError="",this.draftAvatarUrl="",this.draftAvatarUploadUrl="",this.avatarImage=this.avatarBeforeEdit||this.normalizeAvatarUrl(this.profile?.avatar_url??""),this.avatarBeforeEdit="",this.avatarPreviewUrl){try{URL.revokeObjectURL(this.avatarPreviewUrl)}catch{}this.avatarPreviewUrl=""}this.draftNormX=this.avatarNormX,this.draftNormY=this.avatarNormY}openAvatarModal(){!this.avatarImage&&!this.draftAvatarUrl||(this.avatarModalOpen=!0)}closeAvatarModal(){this.avatarModalOpen=!1}goBack(){this.router.navigate(["/"],{state:{resetGlobe:!0},replaceUrl:!0,queryParams:{resetGlobe:"1"}})}async onAvatar(t){let e=t.target,n=e.files?.[0];if(n){this.editingAvatar||(this.avatarBeforeEdit=this.avatarImage||"",this.editingAvatar=!0),this.avatarError="",this.avatarSaving=!1,this.avatarUploading=!0,this.forceUi();try{let o=n;try{o=await this.cropAvatarToSquare(n)}catch{this.avatarError="Crop failed, using original image."}if(this.avatarPreviewUrl){try{URL.revokeObjectURL(this.avatarPreviewUrl)}catch{}this.avatarPreviewUrl=""}this.avatarPreviewUrl=URL.createObjectURL(o),this.draftAvatarUrl=this.avatarPreviewUrl,this.avatarImage=this.draftAvatarUrl,this.draftAvatarUploadUrl="",this.draftNormX=0,this.draftNormY=0;let d=await this.media.uploadAvatar(o);if(!d.url)throw new Error("Upload returned no URL.");if(this.draftAvatarUploadUrl=d.url,this.draftAvatarUrl=d.url,this.avatarImage=this.draftAvatarUrl,this.avatarPreviewUrl){try{URL.revokeObjectURL(this.avatarPreviewUrl)}catch{}this.avatarPreviewUrl=""}}catch(o){this.avatarError=o?.message??String(o)}finally{e.value="",this.avatarUploading=!1,this.forceUi()}}}async saveAvatar(){if(!this.draftAvatarUploadUrl){this.avatarError="Upload pending. Please wait for the image to finish uploading.",this.forceUi();return}this.avatarSaving=!0,this.avatarError="",this.forceUi();try{let t=await this.profiles.updateProfile({avatar_url:this.draftAvatarUploadUrl});this.applyProfile(t.updateProfile),this.avatarImage=this.normalizeAvatarUrl(this.profile?.avatar_url??""),this.avatarNormX=this.draftNormX,this.avatarNormY=this.draftNormY,this.editingAvatar=!1,this.avatarBeforeEdit=""}catch(t){this.avatarError=t?.message??String(t)}finally{this.avatarSaving=!1,this.forceUi()}}onAvatarDragStart(t){if(!this.draftAvatarUrl)return;this.dragging=!0,this.startX=t.clientX,this.startY=t.clientY;let e=this.maxOffset(this.EDIT_SIZE,this.EDIT_SCALE);this.basePxX=this.draftNormX*e,this.basePxY=this.draftNormY*e,t.target.setPointerCapture?.(t.pointerId);let n=d=>this.onAvatarDragMove(d),o=()=>this.onAvatarDragEnd(n,o);window.addEventListener("pointermove",n,{passive:!0}),window.addEventListener("pointerup",o,{passive:!0})}onAvatarDragMove(t){if(!this.dragging)return;let e=t.clientX-this.startX,n=t.clientY-this.startY,o=this.maxOffset(this.EDIT_SIZE,this.EDIT_SCALE),d=u=>Math.max(-o,Math.min(o,u));this.pendingPxX=d(this.basePxX+e),this.pendingPxY=d(this.basePxY+n),this.raf||(this.raf=requestAnimationFrame(()=>{this.draftNormX=this.clampNorm(o?this.pendingPxX/o:0),this.draftNormY=this.clampNorm(o?this.pendingPxY/o:0),this.raf=0}))}onAvatarDragEnd(t,e){this.dragging=!1,window.removeEventListener("pointermove",t),window.removeEventListener("pointerup",e)}async copyShareLink(){if(this.shareUrl){this.shareError="",this.shareCopied=!1,this.forceUi();try{if(typeof navigator<"u"&&navigator.clipboard?.writeText)await navigator.clipboard.writeText(this.shareUrl);else throw new Error("Clipboard unavailable.");this.shareCopied=!0,this.forceUi(),typeof window<"u"&&(this.shareTimer&&clearTimeout(this.shareTimer),this.shareTimer=window.setTimeout(()=>{this.zone.run(()=>{this.shareCopied=!1,this.cdr.detectChanges()})},1600))}catch(t){this.shareError=t?.message??String(t),this.forceUi()}}}onProfileEditAction(){if(this.isOwner){if(!this.profileEditMode){this.profileEditMode=!0,this.profileEditSaved=!1,this.profileEditSaving=!1;return}this.profileEditSaving||(this.profileEditSaving=!0,this.profileEditSaved=!0,this.forceUi(),this.profileEditCloseTimer&&clearTimeout(this.profileEditCloseTimer),this.profileEditCloseTimer=window.setTimeout(()=>{this.completeProfileEditClose()},700))}}completeProfileEditClose(){this.profileEditMode=!1,this.profileEditSaving=!1,this.profileEditSaved=!1,this.profileEditCloseTimer=null,this.cancelNameEdit(),this.cancelUsernameEdit(),this.cancelBioEdit(),this.editingAvatar&&this.cancelAvatarEdit(),this.forceUi()}buildShareUrl(t){if(!t)return"";let e=t.username?.trim();if(!e)return"";let n=typeof window<"u"&&window.location?window.location.origin:"";return n?`${n}/user/${encodeURIComponent(e)}`:`/user/${encodeURIComponent(e)}`}normalizeUsername(t){return t.trim().replace(/^@+/,"").toLowerCase()}clampNorm(t){return Math.max(-1,Math.min(1,t))}normalizeAvatarUrl(t){let e=String(t||"").trim();if(!e)return"";if(/^https?:\/\//i.test(e)||e.startsWith("data:")||e.startsWith("blob:")||e.startsWith("/")||e.includes("/storage/v1/object/"))return e;let n=e.replace(/^\/+/,"");return`${ae}/storage/v1/object/public/avatars/${n}`}maxOffset(t,e){let n=t*e;return Math.max(0,(n-t)/2)}formatDate(t){let e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}async loadProfilePosts(t){if(!t){this.profilePosts=[];return}this.loadingProfilePosts=!0,this.profilePostsError="",this.forceUi();try{this.profilePosts=this.sortPostsDesc(await this.posts.listForAuthor(t))}catch(e){this.profilePostsError=e?.message??String(e)}finally{this.loadingProfilePosts=!1,this.forceUi()}}handleNewProfilePost(t){!this.profile||t.author_id!==this.profile.user_id||this.profilePosts.some(e=>e.id===t.id)||(this.profilePosts=[t,...this.profilePosts],this.forceUi())}handleProfilePostUpdated(t){if(!(!this.profile||t.author_id!==this.profile.user_id)){if(!this.isOwner){this.loadProfilePosts(this.profile.user_id);return}this.applyProfilePostUpdate(t)}}handleProfilePostUpdateEvent(t){!this.profile||t.author_id!==this.profile.user_id||this.loadProfilePosts(this.profile.user_id)}handleProfilePostDeleteEvent(t){if(!this.profile||t.author_id!==this.profile.user_id)return;let e=this.profilePosts.filter(n=>n.id!==t.id);e.length!==this.profilePosts.length&&(this.profilePosts=e,this.editingPostId===t.id&&this.cancelPostEdit(),this.openPostMenuId===t.id&&(this.openPostMenuId=null),this.confirmDeletePostId===t.id&&(this.confirmDeletePostId=null),this.forceUi())}applyProfilePostUpdate(t){let e=this.profilePosts.findIndex(n=>n.id===t.id);if(e>=0){let n=[...this.profilePosts];n[e]=t,this.profilePosts=this.sortPostsDesc(n),this.forceUi();return}this.profilePosts=this.sortPostsDesc([t,...this.profilePosts]),this.forceUi()}visibilityLabel(t){let e=String(t||"").toLowerCase();return e==="private"?"Only me":e==="followers"?"Followers":"Public"}visibilityIcon(t){let e=String(t||"").toLowerCase();return"\u{1F512}"}startPostEdit(t){if(!this.isOwner)return;this.openPostMenuId=null,this.confirmDeletePostId=null,this.editingPostId=t.id,this.editPostTitle=t.title??"",this.editPostBody=t.body??"";let e=t.visibility==="country"?"public":t.visibility;this.editPostVisibility=e==="followers"||e==="private"?e:"public",this.postEditError="",this.forceUi()}cancelPostEdit(){this.editingPostId=null,this.editPostTitle="",this.editPostBody="",this.editPostVisibility="public",this.postEditError="",this.openPostMenuId=null,this.confirmDeletePostId=null,this.forceUi()}async savePostEdit(t){if(!this.isOwner||this.postEditBusy)return;let e=this.editPostBody.trim();if(!e){this.postEditError="Body is required.",this.forceUi();return}this.postEditBusy=!0,this.postEditError="",this.forceUi();try{let n=await this.posts.updatePost(t.id,{title:this.editPostTitle.trim()||null,body:e,visibility:this.editPostVisibility});this.applyProfilePostUpdate(n),this.cancelPostEdit()}catch(n){this.postEditError=n?.message??String(n)}finally{this.postEditBusy=!1,this.forceUi()}}togglePostMenu(t,e){e?.stopPropagation(),this.openPostMenuId===t?(this.openPostMenuId=null,this.confirmDeletePostId=null,this.reportingPostId=null):(this.openPostMenuId=t,this.confirmDeletePostId=null,this.reportingPostId=null),this.reportReason="",this.reportError="",this.reportFeedback="",this.forceUi()}requestPostDelete(t){this.isOwner&&(this.confirmDeletePostId=t.id,this.reportingPostId=null,this.reportReason="",this.reportError="",this.reportFeedback="",this.forceUi())}cancelPostDelete(){this.confirmDeletePostId=null,this.forceUi()}async deletePost(t){if(!(!this.isOwner||this.postEditBusy)){this.openPostMenuId=null,this.confirmDeletePostId=null,this.postEditBusy=!0,this.postEditError="",this.forceUi();try{await this.posts.deletePost(t.id,{country_code:t.country_code??null,author_id:t.author_id??null})&&(this.profilePosts=this.profilePosts.filter(n=>n.id!==t.id),this.editingPostId===t.id&&this.cancelPostEdit())}catch(e){this.postEditError=e?.message??String(e)}finally{this.postEditBusy=!1,this.forceUi()}}}recordView(t){!t?.id||this.viewedPostIds.has(t.id)||(this.viewedPostIds.add(t.id),this.posts.recordView(t),this.forceUi())}async togglePostLike(t){if(!this.meId||!t?.id){this.postActionError[t.id]="Sign in to like posts.",this.forceUi();return}if(!this.likeBusy[t.id]){this.likeBusy[t.id]=!0,this.postActionError[t.id]="",this.forceUi();try{let e=t.liked_by_me?await this.posts.unlikePost(t.id):await this.posts.likePost(t.id);this.applyProfilePostUpdate(e),this.likeOpen[t.id]&&this.loadLikes(t.id)}catch(e){this.postActionError[t.id]=e?.message??String(e)}finally{this.likeBusy[t.id]=!1,this.forceUi()}}}toggleLikes(t){if(!t)return;let e=!this.likeOpen[t];this.likeOpen[t]=e,e&&!this.likeItems[t]&&!this.likeLoading[t]&&this.loadLikes(t),this.forceUi()}async loadLikes(t){if(t){this.likeLoading[t]=!0,this.likeErrors[t]="",this.forceUi();try{let e=await this.posts.listLikes(t,40);this.likeItems[t]=e}catch(e){this.likeErrors[t]=e?.message??String(e)}finally{this.likeLoading[t]=!1,this.forceUi()}}}toggleComments(t){if(!t)return;let e=!this.commentOpen[t];this.commentOpen[t]=e,e&&!this.commentItems[t]&&!this.commentLoading[t]&&this.loadComments(t),e||(this.commentReplyTarget[t]=null),this.forceUi()}async loadComments(t){if(t){this.commentLoading[t]=!0,this.commentErrors[t]="",this.forceUi();try{let e=await this.posts.listComments(t,40);this.commentItems[t]=e,this.rebuildCommentThread(t)}catch(e){this.commentErrors[t]=e?.message??String(e)}finally{this.commentLoading[t]=!1,this.forceUi()}}}rebuildCommentThread(t){let e=this.commentItems[t]??[],n={},o=[];for(let P of e){let C=P.parent_id??"";C?(n[C]||(n[C]=[]),n[C].push(P)):o.push(P)}let d=[],u={},b=(P,C)=>{d.push(P),u[P.id]=C;let R=n[P.id]??[];for(let w of R)b(w,C+1)};for(let P of o)b(P,0);this.commentDisplay[t]=d,this.commentDepth[t]=u}applyCommentUpdate(t,e){let o=[...this.commentItems[t]??[]],d=o.findIndex(u=>u.id===e.id);d>=0?o[d]=z(z({},o[d]),e):o.push(e),this.commentItems[t]=o,this.rebuildCommentThread(t)}commentAuthorName(t){return t.author?.username||t.author?.display_name||"Member"}startCommentReply(t,e){!t||!e?.id||(this.commentReplyTarget[t]={commentId:e.id,authorName:this.commentAuthorName(e)},this.forceUi())}cancelCommentReply(t){t&&(this.commentReplyTarget[t]=null,this.forceUi())}async toggleCommentLike(t,e){if(!t||!e?.id)return;if(!this.meId){this.commentErrors[t]="Sign in to like comments.",this.forceUi();return}let n=z({},this.commentLikeBusy[t]??{});if(!n[e.id]){n[e.id]=!0,this.commentLikeBusy[t]=n,this.commentErrors[t]="",this.forceUi();try{let o=e.liked_by_me?await this.posts.unlikeComment(e.id):await this.posts.likeComment(e.id);this.applyCommentUpdate(t,o)}catch(o){this.commentErrors[t]=o?.message??String(o)}finally{this.commentLikeBusy[t]=j(z({},n),{[e.id]:!1}),this.forceUi()}}}async submitComment(t){if(!t?.id)return;if(!this.meId){this.commentErrors[t.id]="Sign in to comment.",this.forceUi();return}let e=(this.commentDrafts[t.id]??"").trim();if(!e){this.commentErrors[t.id]="Write something before commenting.",this.forceUi();return}if(!this.commentBusy[t.id]){this.commentBusy[t.id]=!0,this.commentErrors[t.id]="",this.forceUi();try{let n=this.commentReplyTarget[t.id]?.commentId??null,o=await this.posts.addComment(t.id,e,n);this.applyCommentUpdate(t.id,o),this.commentDrafts[t.id]="",this.commentReplyTarget[t.id]=null;let d=j(z({},t),{comment_count:t.comment_count+1});this.applyProfilePostUpdate(d)}catch(n){this.commentErrors[t.id]=n?.message??String(n)}finally{this.commentBusy[t.id]=!1,this.forceUi()}}}toggleReport(t){if(t){if(this.reportingPostId===t){this.cancelReport();return}this.reportingPostId=t,this.reportReason="",this.reportError="",this.reportFeedback="",this.confirmDeletePostId=null,this.forceUi()}}cancelReport(){this.reportingPostId=null,this.reportReason="",this.reportError="",this.reportFeedback="",this.forceUi()}async submitReport(t){if(!t?.id)return;if(!this.meId){this.reportError="Sign in to report posts.",this.forceUi();return}let e=this.reportReason.trim();if(!e){this.reportError="Tell us what is wrong.",this.forceUi();return}if(!this.reportBusy){this.reportBusy=!0,this.reportError="",this.reportFeedback="",this.forceUi();try{await this.posts.reportPost(t.id,e),this.reportFeedback="Report sent.",this.reportReason="",setTimeout(()=>{this.reportingPostId===t.id&&(this.reportingPostId=null,this.openPostMenuId=null,this.reportFeedback="",this.forceUi())},900)}catch(n){this.reportError=n?.message??String(n)}finally{this.reportBusy=!1,this.forceUi()}}}trackProfilePostById(t,e){return e?.id??String(t)}sortPostsDesc(t){return[...t].sort((e,n)=>new Date(n.created_at).getTime()-new Date(e.created_at).getTime())}async cropAvatarToSquare(t){let e=(t.type||"").toLowerCase();if(e==="image/gif")throw new Error("GIF avatars are disabled.");if(!e.startsWith("image/"))throw new Error("Please choose an image file.");let n=e==="image/png"||e==="image/webp"?"image/png":"image/jpeg",o=n==="image/png"?"png":"jpg",d=null,u=0,b=0;try{d=await createImageBitmap(t),u=d.width,b=d.height}catch{d=null}let P=document.createElement("canvas");P.width=this.AVATAR_OUT_SIZE,P.height=this.AVATAR_OUT_SIZE;let C=P.getContext("2d",{alpha:!0});if(!C)throw new Error("Canvas not supported.");if(C.imageSmoothingEnabled=!0,C.imageSmoothingQuality="high",C.clearRect(0,0,P.width,P.height),d){let w=Math.min(u,b),V=Math.floor((u-w)/2),L=Math.floor((b-w)/2);C.drawImage(d,V,L,w,w,0,0,P.width,P.height),d.close?.()}else{let w=await new Promise((Se,ke)=>{let $=new Image;$.onload=()=>Se($),$.onerror=()=>ke(new Error("Image decode failed.")),$.src=URL.createObjectURL(t)}),V=Math.min(w.naturalWidth,w.naturalHeight),L=Math.floor((w.naturalWidth-V)/2),Ie=Math.floor((w.naturalHeight-V)/2);C.drawImage(w,L,Ie,V,V,0,0,P.width,P.height);try{URL.revokeObjectURL(w.src)}catch{}}let R=await new Promise((w,V)=>{P.toBlob(L=>L?w(L):V(new Error("Failed to crop image.")),n,n==="image/jpeg"?.92:void 0)});return new File([R],`avatar.${o}`,{type:n})}openImageLightbox(t){let e=String(t||"").trim();e&&(this.lightboxUrl=e,this.forceUi())}closeImageLightbox(){this.lightboxUrl&&(this.lightboxUrl=null,this.forceUi())}forceUi(){this.zone.run(()=>this.cdr.detectChanges())}isPostExpanded(t){return this.expandedPosts.has(t)}isPostExpandable(t){return t?[t.title,t.body,t.media_caption].filter(n=>!!n).join(" ").trim().length>this.POST_TEXT_LIMIT:!1}isTextExpandable(t){let e=String(t||"").replace(/\s+/g," ").trim();return e?e.length>this.getPostPreviewLimit():!1}postPreview(t){let e=String(t||"").replace(/\s+/g," ").trim();if(!e)return"";let n=this.getPostPreviewLimit();if(e.length<=n)return e;let o=e.slice(0,n),d=o.lastIndexOf(" ");return(d>40?o.slice(0,d):o).trim()}togglePostExpanded(t,e){e&&(e.stopPropagation(),e.preventDefault()),t&&(this.expandedPosts.has(t)?this.expandedPosts.delete(t):this.expandedPosts.add(t),this.forceUi())}onPostTextClick(t,e){!this.expandedPosts.has(t)||e.target?.closest("button")||(e.stopPropagation(),this.expandedPosts.delete(t),this.forceUi())}getPostPreviewLimit(){if(typeof window>"u")return this.POST_TEXT_PREVIEW;let t=window.innerWidth||0;return t<480?60:t<720?80:t<1024?105:this.POST_TEXT_PREVIEW}postHasVideo(t){return t?String(t.media_type||"").toLowerCase()==="video"?!0:this.postMediaTypes(t).includes("video"):!1}postCaptionText(t){if(!t)return"";let e=String(t.media_caption||"").trim();return e||(this.postHasVideo(t)?String(t.body||"").trim():"")}static \u0275fac=function(e){return new(e||i)(M(oe),M(re),M(le),M(se),M(ve),M(be),M(ye),M(we),M(Ee),M(Ce),M(he),M(X),M(K))};static \u0275cmp=Y({type:i,selectors:[["app-profile-page"]],viewQuery:function(e,n){if(e&1&&Z(Oe,5),e&2){let o;H(o=G())&&(n.avatarInputRef=o.first)}},decls:9,vars:4,consts:[["stateTpl",""],["avatarInput",""],["profileMediaInput",""],["reportMenu",""],["mediaGallery",""],["commentSignIn",""],[1,"wrap"],["class","card",4,"ngIf","ngIfElse"],["type","file","accept","image/*",2,"display","none",3,"change"],["class","avatar-modal",3,"click",4,"ngIf"],["class","lightbox","role","dialog","aria-modal","true",3,"click",4,"ngIf"],[1,"card"],[1,"head"],[1,"head-actions"],["type","button",1,"ghost-link","back-link",3,"click"],[1,"avatar-block",3,"click"],[1,"avatar"],["alt","avatar","class","img",3,"src","transform",4,"ngIf"],["class","init",4,"ngIf"],[1,"ring"],["class","avatar-actions",4,"ngIf"],[1,"info"],["class","title-row",4,"ngIf"],["class","share-feedback",3,"error",4,"ngIf"],["class","edit-row",4,"ngIf"],["class","handle-row",4,"ngIf"],["class","social-row",4,"ngIf"],[1,"meta"],[4,"ngIf"],["class","bio",4,"ngIf"],["class","composer profile-composer",4,"ngIf"],[1,"composer-posts"],[1,"sec-title"],["class","post-status",4,"ngIf"],["class","post-status error",4,"ngIf"],["class","post-list",4,"ngIf"],["class","avatar-editor",4,"ngIf"],["alt","avatar",1,"img",3,"src"],[1,"init"],[1,"avatar-actions"],["type","button",1,"micro-btn",3,"click"],["type","button","class","micro-btn outline",3,"disabled","click",4,"ngIf"],["class","hint",4,"ngIf"],["class","hint error",4,"ngIf"],["type","button",1,"micro-btn","outline",3,"click","disabled"],[1,"hint"],[1,"hint","error"],[1,"title-row"],[1,"title"],["aria-hidden","true",1,"presence-dot"],[1,"title-actions"],["class","micro-btn","type","button",3,"click",4,"ngIf"],["class","micro-btn outline edit-profile-toggle","type","button",3,"disabled","click",4,"ngIf"],["type","button","aria-label","Copy profile link",1,"share-icon","bare","share-emoji",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","role","img","aria-hidden","true","focusable","false"],["fill","#e3e3e3","d","M680-80q-50 0-85-35t-35-85q0-6 3-28L282-392q-16 15-37 23.5t-45 8.5q-50 0-85-35t-35-85q0-50 35-85t85-35q24 0 45 8.5t37 23.5l281-164q-2-7-2.5-13.5T560-760q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35q-24 0-45-8.5T598-672L317-508q2 7 2.5 13.5t.5 14.5q0 8-.5 14.5T317-452l281 164q16-15 37-23.5t45-8.5q50 0 85 35t35 85q0 50-35 85t-85 35Zm0-80q17 0 28.5-11.5T720-200q0-17-11.5-28.5T680-240q-17 0-28.5 11.5T640-200q0 17 11.5 28.5T680-160ZM200-440q17 0 28.5-11.5T240-480q0-17-11.5-28.5T200-520q-17 0-28.5 11.5T160-480q0 17 11.5 28.5T200-440Zm480-280q17 0 28.5-11.5T720-760q0-17-11.5-28.5T680-800q-17 0-28.5 11.5T640-760q0 17 11.5 28.5T680-720Zm0 520ZM200-480Zm480-280Z"],["type","button",1,"micro-btn","outline","edit-profile-toggle",3,"click","disabled"],["class","saved-check","aria-live","polite",4,"ngIf"],["aria-live","polite",1,"saved-check"],["aria-hidden","true"],["aria-hidden","true",1,"check-arrow"],[1,"share-feedback"],[1,"edit-row"],["maxlength","80","placeholder","Display name",1,"text-input",3,"ngModelChange","ngModel"],[1,"edit-actions"],["type","button",1,"btn",3,"click","disabled"],["type","button",1,"ghost-link",3,"click"],[1,"handle-row"],[1,"sub","handle"],[1,"social-row"],[1,"stat-card"],[1,"stat-value"],[1,"stat-label"],["class","follow-cta",4,"ngIf"],[1,"follow-cta"],["type","button",1,"follow-btn",3,"click","disabled"],["type","button",1,"message-btn",3,"click","disabled"],["maxlength","24","placeholder","username","autocapitalize","off","autocomplete","off","spellcheck","false",1,"text-input",3,"ngModelChange","ngModel"],[1,"bio"],["maxlength","160","placeholder","Tell the world about you",1,"text-input","textarea",3,"ngModelChange","ngModel"],[1,"composer","profile-composer"],[1,"composer-row"],[1,"composer-avatar"],["alt","avatar",3,"src",4,"ngIf"],["class","composer-initials",4,"ngIf"],[1,"composer-main"],[1,"composer-top"],[1,"composer-title"],[1,"composer-hint"],[1,"composer-cta"],["class","pill-link ghost","type","button",3,"click",4,"ngIf"],["class","composer-trigger","type","button",3,"click",4,"ngIf"],["class","composer-actions",4,"ngIf"],["alt","avatar",3,"src"],[1,"composer-initials"],["type","button",1,"pill-link","ghost",3,"click"],["type","button",1,"composer-trigger",3,"click"],["maxlength","120","placeholder","Add a headline (optional)",1,"composer-input",3,"ngModelChange","ngModel"],["rows","3","maxlength","5000",1,"composer-textarea",3,"ngModelChange","placeholder","ngModel"],[1,"composer-media"],["type","file","accept","image/*,video/*",2,"display","none",3,"change"],["class","composer-media-name",4,"ngIf"],["class","composer-media-error",4,"ngIf"],["class","composer-media-preview",4,"ngIf"],[1,"composer-media-name"],[1,"composer-media-error"],[1,"composer-media-preview"],["alt","media preview",3,"src",4,"ngIf"],["controls","",3,"src",4,"ngIf"],["alt","media preview",3,"src"],["controls","",3,"src"],[1,"composer-actions"],["class","composer-status",3,"error",4,"ngIf"],[1,"composer-status"],[1,"post-status"],[1,"post-status","error"],[1,"post-list"],["class","post-card",3,"media",4,"ngFor","ngForOf","ngForTrackBy"],[1,"post-card"],[1,"post-author"],[1,"author-core"],[1,"author-avatar"],["class","author-initials",4,"ngIf"],[1,"author-info"],[1,"author-name"],[1,"author-meta"],["class","post-visibility",4,"ngIf"],["class","post-menu",3,"click",4,"ngIf"],["class","post-body",4,"ngIf"],["class","post-shared",4,"ngIf"],["class","post-media",4,"ngIf"],["class","post-caption post-text",3,"clamped","click",4,"ngIf"],["class","post-actions",4,"ngIf"],["class","post-action-error",4,"ngIf"],["class","post-likes",4,"ngIf"],["class","post-comments",4,"ngIf"],["class","post-edit",4,"ngIf"],[1,"author-initials"],[1,"post-visibility"],[1,"post-menu",3,"click"],[1,"post-visibility-icon"],["type","button","aria-label","Post options",1,"post-menu-trigger",3,"click"],["class","post-menu-dropdown",4,"ngIf"],[1,"post-menu-dropdown"],[4,"ngIf","ngIfElse"],["type","button",1,"menu-item",3,"click"],["type","button",1,"menu-item","danger",3,"click"],["class","menu-confirm",4,"ngIf"],[1,"menu-confirm"],[1,"menu-confirm-title"],[1,"menu-confirm-actions"],["type","button",1,"menu-item","ghost",3,"click"],["class","menu-report",4,"ngIf"],[1,"menu-report"],["rows","2","maxlength","2000","placeholder","Tell us what is wrong",1,"menu-report-input",3,"ngModelChange","ngModel"],["type","button",1,"menu-item","danger",3,"click","disabled"],["class","menu-report-error",4,"ngIf"],["class","menu-report-success",4,"ngIf"],[1,"menu-report-error"],[1,"menu-report-success"],[1,"post-body"],["class","post-title",4,"ngIf"],["class","post-text",3,"clamped","click",4,"ngIf"],[1,"post-title"],[1,"post-text",3,"click"],["class","see-more inline","type","button",3,"click",4,"ngIf"],["type","button",1,"see-more","inline",3,"click"],[1,"post-shared"],[1,"shared-label"],["role","button","tabindex","0",1,"shared-card",3,"click","keyup.enter"],[1,"shared-author"],[1,"shared-avatar"],["class","shared-initials",4,"ngIf"],[1,"shared-info"],[1,"shared-name"],[1,"shared-meta"],["class","shared-title",4,"ngIf"],["class","shared-body",4,"ngIf"],["class","shared-media",4,"ngIf"],[1,"shared-initials"],[1,"shared-title"],[1,"shared-body"],[1,"shared-media"],["alt","shared media",3,"src",4,"ngIf"],["class","shared-video",4,"ngIf"],["alt","shared media",3,"src"],[1,"shared-video"],["alt","video thumbnail",3,"src",4,"ngIf"],[1,"shared-video-tag"],["alt","video thumbnail",3,"src"],[1,"post-media"],["class","zoomable","alt","post media",3,"src","click",4,"ngIf"],[3,"src","tapBehavior","viewed","videoTap",4,"ngIf"],["alt","post media",1,"zoomable",3,"click","src"],[3,"viewed","videoTap","src","tapBehavior"],[1,"media-gallery"],[1,"media-strip",3,"scroll"],["class","media-item",4,"ngFor","ngForOf"],[1,"media-dots"],[3,"active",4,"ngFor","ngForOf"],[1,"media-count"],[1,"media-item"],[1,"post-caption","post-text",3,"click"],[1,"post-actions"],[1,"post-action-group"],["type","button",1,"post-action","like",3,"click","disabled"],[1,"icon"],["type","button",1,"post-action","count",3,"click"],[1,"count"],["type","button",1,"post-action","comment",3,"click"],["aria-label","Views",1,"post-action","view"],[1,"post-action-error"],[1,"post-likes"],["class","like-status",4,"ngIf"],["class","like-status error",4,"ngIf"],["class","like-list",4,"ngIf"],[1,"like-status"],[1,"like-status","error"],[1,"like-list"],["class","like-empty",4,"ngIf"],["class","like-row","type","button",3,"click",4,"ngFor","ngForOf"],[1,"like-empty"],["type","button",1,"like-row",3,"click"],[1,"like-avatar"],["class","like-initials",4,"ngIf"],[1,"like-body"],[1,"like-name"],[1,"like-handle"],[1,"like-time"],[1,"like-initials"],[1,"post-comments"],["class","comment-status",4,"ngIf"],["class","comment-status error",4,"ngIf"],["class","comment-list",4,"ngIf"],["class","comment-compose",4,"ngIf","ngIfElse"],[1,"comment-status"],[1,"comment-status","error"],[1,"comment-list"],["class","comment-empty",4,"ngIf"],["class","comment",3,"marginLeft",4,"ngFor","ngForOf"],[1,"comment-empty"],[1,"comment"],[1,"comment-avatar"],["class","comment-initials",4,"ngIf"],[1,"comment-body"],[1,"comment-meta"],[1,"comment-name"],[1,"comment-time"],[1,"comment-text"],[1,"comment-actions"],["type","button",1,"comment-action",3,"click","disabled"],["class","comment-heart","aria-hidden","true",4,"ngIf"],["class","comment-heart active","aria-hidden","true",4,"ngIf"],["class","comment-like-count",4,"ngIf"],[1,"comment-initials"],["aria-hidden","true",1,"comment-heart"],["aria-hidden","true",1,"comment-heart","active"],[1,"comment-like-count"],[1,"comment-compose"],["class","comment-reply",4,"ngIf"],["placeholder","Write a comment",1,"comment-input",3,"ngModelChange","disabled","ngModel"],["type","button",1,"comment-submit",3,"click","disabled"],[1,"comment-reply"],[1,"comment-hint"],[1,"post-edit"],["placeholder","Edit title",1,"post-edit-title",3,"ngModelChange","ngModel"],["rows","3","maxlength","5000",1,"post-edit-body",3,"ngModelChange","ngModel"],[1,"post-edit-footer"],[1,"post-edit-visibility",3,"ngModelChange","ngModel"],["value","public"],["value","followers"],["value","private"],[1,"post-edit-actions"],["type","button",1,"pill-link","ghost",3,"click","disabled"],["type","button",1,"pill-link",3,"click","disabled"],["class","post-edit-error",4,"ngIf"],[1,"post-edit-error"],[1,"avatar-editor"],[1,"editor-head"],["type","button",1,"btn-file",3,"click"],[1,"editor-preview"],["class","avatar large",3,"adjusting","pointerdown",4,"ngIf"],["class","muted",4,"ngIf"],[1,"avatar","large",3,"pointerdown"],["alt","preview",1,"img",3,"src"],[1,"muted"],[1,"card","state"],[1,"avatar-modal",3,"click"],[1,"avatar-modal-card",3,"click"],[1,"avatar","large"],["role","dialog","aria-modal","true",1,"lightbox",3,"click"],["type","button","aria-label","Close",1,"lightbox-close",3,"click"],[1,"lightbox-frame",3,"click"],["alt","Expanded media",3,"src"]],template:function(e,n){if(e&1){let o=v();l(0,"div",6),f(1,ji,32,19,"div",7)(2,Yi,3,2,"ng-template",null,0,N),s(),l(4,"input",8,1),g("change",function(u){return _(o),m(n.onAvatar(u))}),s(),f(6,Zi,7,3,"div",9)(7,Hi,5,1,"div",10),y(8,"app-bottom-tabs")}if(e&2){let o=B(3);a(),c("ngIf",!n.loading&&!n.error&&n.profile)("ngIfElse",o),a(5),c("ngIf",n.avatarModalOpen),a(),c("ngIf",n.lightboxUrl)}},dependencies:[ne,ee,te,ue,me,fe,ce,_e,de,ge,pe,xe,Pe,ie],styles:["[_nghost-%COMP%]{position:fixed;inset:0;display:block;pointer-events:auto;z-index:30}.wrap[_ngcontent-%COMP%]{position:fixed;inset:0;padding:0 0 calc(var(--tabs-safe, 64px) + 48px);box-sizing:border-box;overflow-y:auto;overflow-x:hidden;background:transparent;color:#ffffffeb}.wrap[_ngcontent-%COMP%] > .ocean-gradient[_ngcontent-%COMP%], .wrap[_ngcontent-%COMP%] > .ocean-dots[_ngcontent-%COMP%], .wrap[_ngcontent-%COMP%] > .noise[_ngcontent-%COMP%]{display:none}.ocean-gradient[_ngcontent-%COMP%]{z-index:0;background:radial-gradient(1400px 900px at 38% 20%,rgba(0,255,209,.18),transparent 60%),radial-gradient(1100px 900px at 65% 70%,rgba(140,0,255,.14),transparent 64%),#031421;animation:_ngcontent-%COMP%_oceanPulse 18s ease-in-out infinite}.ocean-dots[_ngcontent-%COMP%]{z-index:1;background-image:radial-gradient(circle at 20% 20%,rgba(255,255,255,.35) .8px,transparent 2px),radial-gradient(circle at 70% 30%,rgba(255,255,255,.25) .6px,transparent 2px),radial-gradient(circle at 40% 70%,rgba(255,255,255,.2) .7px,transparent 2.2px);background-size:220px 220px,340px 340px,520px 520px;opacity:.45;mix-blend-mode:screen;animation:_ngcontent-%COMP%_driftDots 48s linear infinite}.noise[_ngcontent-%COMP%]{z-index:2;background-image:linear-gradient(0deg,rgba(255,255,255,.04) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.04) 1px,transparent 1px);background-size:4px 4px;opacity:.12;pointer-events:none;animation:_ngcontent-%COMP%_drift 18s linear infinite}@keyframes _ngcontent-%COMP%_oceanPulse{0%{opacity:.85;transform:scale(1)}50%{opacity:1;transform:scale(1.02)}to{opacity:.85;transform:scale(1)}}@keyframes _ngcontent-%COMP%_driftDots{0%{transform:translateZ(0)}50%{transform:translate3d(-80px,-40px,0)}to{transform:translateZ(0)}}@keyframes _ngcontent-%COMP%_drift{0%{transform:translateZ(0)}50%{transform:translate3d(-10px,10px,0)}to{transform:translateZ(0)}}.card[_ngcontent-%COMP%]{position:relative;z-index:1;width:100%;margin:0;border-radius:0;padding:0;background:transparent;border:0;box-shadow:none;color:#0a0c12eb;min-height:100%;box-sizing:border-box}.state[_ngcontent-%COMP%]{text-align:center;font-weight:800;font-size:14px}.share-row[_ngcontent-%COMP%]{margin-bottom:18px}.share-box[_ngcontent-%COMP%]{border-radius:18px;border:1px solid rgba(0,0,0,.08);background:#fffffff0;padding:14px}.share-box.empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;align-items:flex-start}.share-label[_ngcontent-%COMP%]{font-weight:900;font-size:12px;letter-spacing:.12em;opacity:.65}.share-link[_ngcontent-%COMP%]{font-family:JetBrains Mono,SFMono-Regular,Consolas,monospace;font-size:12px;word-break:break-all;margin-top:6px}.share-placeholder[_ngcontent-%COMP%]{font-size:13px;opacity:.7}.share-actions[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:12px;align-items:center;flex-wrap:wrap}.composer[_ngcontent-%COMP%]{margin:20px auto 0;width:100%;max-width:none;border-radius:20px;border:1px solid rgba(0,0,0,.06);background:#fffffff2;padding:16px;box-shadow:0 20px 60px #0000001a}.composer.profile-composer[_ngcontent-%COMP%]{margin-bottom:20px}.composer-row[_ngcontent-%COMP%]{display:flex;gap:14px;align-items:flex-start}.composer-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:999px;overflow:hidden;border:1px solid rgba(0,0,0,.08);background:#f5f7fae6;display:grid;place-items:center;flex:0 0 auto}.composer-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.composer-initials[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.12em;color:#0a0c12cc}.composer-main[_ngcontent-%COMP%]{flex:1}.composer-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}.composer-cta[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.composer-title[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.12em;font-size:12px}.composer-hint[_ngcontent-%COMP%]{font-size:12px;opacity:.7;margin-top:4px}.pill-link[_ngcontent-%COMP%]{border:0;border-radius:999px;padding:6px 16px;font-size:10px;letter-spacing:.18em;font-weight:900;text-transform:uppercase;background:#0000000d;color:#0a0c12bf;cursor:pointer}.pill-link.ghost[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(10,12,18,.15)}.composer-trigger[_ngcontent-%COMP%]{width:100%;margin-top:10px;border-radius:16px;border:1px solid rgba(0,0,0,.08);background:#f5f7fae6;text-align:left;padding:12px;font-weight:600;color:#0a0c12a6;cursor:pointer}.composer-input[_ngcontent-%COMP%], .composer-textarea[_ngcontent-%COMP%]{width:100%;margin-top:10px;border-radius:16px;border:1px solid rgba(0,0,0,.08);background:#f5f7fae6;padding:12px;font-family:inherit;font-size:14px}.composer-textarea[_ngcontent-%COMP%]{min-height:90px;resize:vertical}.composer-media[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap}.composer-media-name[_ngcontent-%COMP%]{font-size:11px;opacity:.7;font-weight:700;letter-spacing:.06em}.composer-media-error[_ngcontent-%COMP%]{margin-top:6px;font-size:11px;font-weight:700;color:#c33;letter-spacing:.06em}.composer-media-preview[_ngcontent-%COMP%]{margin-top:10px;border-radius:18px;overflow:hidden;border:1px solid rgba(0,0,0,.08);background:#fff}.composer-media-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .composer-media-preview[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;display:block;max-height:420px;object-fit:cover;background:#000}.composer-actions[_ngcontent-%COMP%]{margin-top:12px;display:flex;align-items:center;gap:12px;flex-wrap:wrap}.composer-status[_ngcontent-%COMP%]{font-size:12px;font-weight:700;letter-spacing:.08em;color:#0078ffe6}.composer-status.error[_ngcontent-%COMP%]{color:#c33}.btn[_ngcontent-%COMP%]{border:0;border-radius:16px;padding:10px 14px;background:linear-gradient(90deg,#00ffd1d9,#8c00ffbf);color:#06080ef5;font-weight:900;letter-spacing:.12em;cursor:pointer}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.micro-btn[_ngcontent-%COMP%]{border:0;border-radius:999px;padding:6px 16px;text-transform:uppercase;letter-spacing:.18em;font-size:10px;font-weight:900;background:#0a0c120f;color:#0a0c12c7;box-shadow:inset 0 0 0 1px #0a0c120f,0 12px 32px #00000014;cursor:pointer;transition:transform .16s ease,box-shadow .16s ease,background .16s ease}.micro-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:inset 0 0 0 1px #0a0c121f,0 18px 40px #0000001f}.micro-btn.outline[_ngcontent-%COMP%]{background:#ffffffe6;color:#06080ed9;box-shadow:inset 0 0 0 1px #0000000d,0 10px 30px #00000017}.share-icon[_ngcontent-%COMP%]{border:0;border-radius:999px;width:36px;height:36px;display:grid;place-items:center;background:#0a0c1214;cursor:pointer;font-size:16px}.share-icon.bare[_ngcontent-%COMP%]{background:transparent;width:auto;height:auto;font-size:20px;line-height:1}.share-icon.share-emoji[_ngcontent-%COMP%]{width:24px;height:24px;padding:0;margin-left:auto}.edit-profile-toggle[_ngcontent-%COMP%]   .saved-check[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;color:#00c781;font-weight:700;letter-spacing:.05em}.edit-profile-toggle[_ngcontent-%COMP%]   .saved-check[_ngcontent-%COMP%]   .check-arrow[_ngcontent-%COMP%]{font-size:14px}.share-icon.share-emoji[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.share-icon[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.hint[_ngcontent-%COMP%]{font-size:12px;opacity:.75}.hint.error[_ngcontent-%COMP%]{color:#c33;opacity:1}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.head[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-columns:auto minmax(0,1fr);gap:16px;align-items:flex-start;padding:6px 0 0}.head-actions[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;align-items:center;margin-left:0}.avatar-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:8px;cursor:pointer}.avatar-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:8px;width:100%}.avatar[_ngcontent-%COMP%]{width:110px;height:110px;border-radius:999px;overflow:hidden;position:relative;border:1px solid rgba(0,255,209,.24);background:#0a0c141f;display:grid;place-items:center}.avatar.large[_ngcontent-%COMP%]{width:180px;height:180px}.img[_ngcontent-%COMP%]{width:120%;height:120%;object-fit:cover;transition:transform .12s linear}.ring[_ngcontent-%COMP%]{position:absolute;inset:-2px;border-radius:999px;background:conic-gradient(from 180deg,#00ffd100,#00ffd18c,#8c00ff73,#00ffd100);filter:blur(12px);opacity:.25;pointer-events:none}.ghost-link[_ngcontent-%COMP%]{border:0;background:transparent;color:#0078ffd9;font-size:12px;text-transform:uppercase;letter-spacing:.12em;font-weight:800;cursor:pointer}.back-link[_ngcontent-%COMP%]{color:#000000bf;margin-bottom:0;display:inline-flex;align-items:center;gap:6px;background:transparent}.ghost-link.strong[_ngcontent-%COMP%]{letter-spacing:.18em}.handle-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-top:4px}.sub.handle[_ngcontent-%COMP%]{margin:0}.info[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:6px}.title[_ngcontent-%COMP%]{font-size:20px;font-weight:900;letter-spacing:.08em;text-transform:uppercase}.title-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.presence-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:999px;background:#ff5a5af2;border:2px solid rgba(255,255,255,.9);box-shadow:0 0 10px #ff5a5a73}.presence-dot.online[_ngcontent-%COMP%]{background:#00ff9cf2;box-shadow:0 0 10px #00ff9c73}.title-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.sub[_ngcontent-%COMP%]{margin-top:4px;font-weight:800;opacity:.75}.meta[_ngcontent-%COMP%]{margin-top:6px;font-size:13px;opacity:.7;font-weight:700;display:flex;gap:6px;flex-wrap:wrap}.social-row[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:14px;flex-wrap:wrap;align-items:center}.stat-card[_ngcontent-%COMP%]{min-width:110px;border-radius:18px;padding:12px 14px;background:#00000009;border:1px solid rgba(0,0,0,.05);box-shadow:0 18px 40px #00000014}.stat-value[_ngcontent-%COMP%]{font-weight:900;font-size:18px;letter-spacing:.08em;color:#06080ee0}.stat-label[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.18em;text-transform:uppercase;opacity:.6;font-weight:800}.follow-cta[_ngcontent-%COMP%]{margin-left:auto;display:flex;flex-direction:column;gap:6px;align-items:flex-end}.follow-btn[_ngcontent-%COMP%]{border:0;border-radius:999px;padding:10px 22px;background:linear-gradient(120deg,#00ffd1f2,#8c00ffc7);color:#06080eeb;font-weight:900;letter-spacing:.2em;text-transform:uppercase;cursor:pointer;box-shadow:0 18px 50px #00ffd147;transition:transform .16s ease,box-shadow .16s ease,opacity .16s ease}.follow-btn.following[_ngcontent-%COMP%]{background:#0a0c14e6;color:#ffffffe6;box-shadow:0 18px 40px #0000003d}.follow-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;box-shadow:none;transform:none}.message-btn[_ngcontent-%COMP%]{border:1px solid rgba(0,155,220,.5);border-radius:999px;padding:8px 20px;background:#009bdc1f;color:#060c14e6;font-weight:800;letter-spacing:.18em;text-transform:uppercase;cursor:pointer;transition:transform .16s ease,box-shadow .16s ease,opacity .16s ease}.message-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;box-shadow:none;transform:none}.bio[_ngcontent-%COMP%]{margin-top:12px;line-height:1.5;font-size:14px}.text-input[_ngcontent-%COMP%]{width:100%;border-radius:14px;border:1px solid rgba(0,0,0,.12);padding:10px 12px;font-size:14px;font-family:inherit;background:#fffffff2}.textarea[_ngcontent-%COMP%]{min-height:90px;resize:vertical}.edit-row[_ngcontent-%COMP%]{margin-top:10px}.edit-actions[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:12px;align-items:center;flex-wrap:wrap}.avatar-editor[_ngcontent-%COMP%]{margin-top:24px;border-top:1px solid rgba(0,0,0,.08);padding-top:16px}.editor-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;flex-wrap:wrap}.sec-title[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.12em;font-size:12px;text-transform:uppercase}.btn-file[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-radius:14px;padding:10px 12px;cursor:pointer;background:#fffffff2;font-weight:800;letter-spacing:.08em}.btn-file[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.editor-preview[_ngcontent-%COMP%]{margin-top:18px;display:flex;justify-content:center}.avatar-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0000008c;display:grid;place-items:center;z-index:40}.avatar-modal-card[_ngcontent-%COMP%]{background:#0a0c14eb;border:1px solid rgba(255,255,255,.12);border-radius:24px;padding:24px;text-align:center;color:#ffffffeb}.composer-posts[_ngcontent-%COMP%]{width:100%;max-width:none;margin:24px 0 0;border-radius:0;padding:0;background:transparent;border:0;box-shadow:none;color:#06080eeb;box-sizing:border-box}.composer-posts[_ngcontent-%COMP%]   .sec-title[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.2em;font-weight:900;text-transform:uppercase;margin-bottom:12px;opacity:.7}.post-status[_ngcontent-%COMP%]{font-size:13px;margin-bottom:12px;opacity:.65}.post-status.error[_ngcontent-%COMP%]{color:#c33;opacity:1}.post-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;width:100%;box-sizing:border-box;padding-bottom:calc(var(--tabs-safe, 64px) + 32px);overflow-x:hidden}.post-card[_ngcontent-%COMP%]{position:relative;border-radius:0;border:1px solid rgba(0,0,0,.06);background:#fffffffa;--post-pad-x: 16px;padding:var(--post-pad-x);box-shadow:0 18px 60px #00000026;box-sizing:border-box;width:100%;overflow-x:hidden}.post-author[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;align-items:flex-start;gap:12px}.author-core[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.author-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:999px;overflow:hidden;border:1px solid rgba(0,0,0,.08);background:#f5f7faf2;display:grid;place-items:center}.author-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.author-initials[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.12em;color:#0a0c12cc}.author-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.author-name[_ngcontent-%COMP%]{font-weight:700;font-size:14px}.author-meta[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.08em;text-transform:uppercase;opacity:.6}.post-title[_ngcontent-%COMP%]{margin:0 0 6px;font-size:16px;font-weight:700;letter-spacing:.02em}.post-body[_ngcontent-%COMP%]{margin:0;font-size:14px;line-height:1.4;opacity:.85;white-space:pre-line}.post-shared[_ngcontent-%COMP%]{margin-top:12px}.shared-label[_ngcontent-%COMP%]{font-size:11px;font-weight:800;letter-spacing:.08em;text-transform:uppercase;color:#0a0c128c;margin-bottom:6px}.shared-card[_ngcontent-%COMP%]{border:1px solid rgba(10,12,18,.08);border-radius:14px;padding:12px;background:#f5f7fb;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease}.shared-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 10px 24px #0000001f}.shared-author[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.shared-avatar[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;overflow:hidden;background:#0a0c121a;display:grid;place-items:center;flex-shrink:0}.shared-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.shared-initials[_ngcontent-%COMP%]{font-weight:800;font-size:12px;letter-spacing:.08em}.shared-info[_ngcontent-%COMP%]{min-width:0}.shared-name[_ngcontent-%COMP%]{font-weight:800;font-size:13px}.shared-meta[_ngcontent-%COMP%]{font-size:11px;opacity:.7}.shared-title[_ngcontent-%COMP%]{margin-top:10px;font-weight:800;font-size:12px;letter-spacing:.06em;text-transform:uppercase}.shared-body[_ngcontent-%COMP%]{margin-top:6px;font-size:13px;line-height:1.4;color:#0a0c12cc}.shared-media[_ngcontent-%COMP%]{margin-top:10px;border-radius:12px;overflow:hidden;background:#000}.shared-media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.shared-video[_ngcontent-%COMP%]{position:relative;display:grid;place-items:center;min-height:120px;background:#0b0f18;color:#e6eefc;font-size:12px;letter-spacing:.08em;text-transform:uppercase}.shared-video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.shared-video-tag[_ngcontent-%COMP%]{position:absolute;right:8px;bottom:8px;background:#000000a6;color:#fff;padding:4px 6px;border-radius:8px;font-size:10px;letter-spacing:.12em;text-transform:uppercase}.post-text[_ngcontent-%COMP%]{display:inline;line-height:1.4;margin:0}.post-text.clamped[_ngcontent-%COMP%]{display:inline;padding-bottom:0}.post-text[_ngcontent-%COMP%]   .see-more.inline[_ngcontent-%COMP%]{margin-left:6px;padding:0;border:0;background:transparent;font-size:12px;font-weight:800;letter-spacing:.02em;color:#0a0c1299;text-decoration:underline;cursor:pointer;white-space:nowrap}.post-caption[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;line-height:1.45;opacity:.75}.post-media[_ngcontent-%COMP%]{margin-top:12px;margin-left:calc(-1 * var(--post-pad-x));margin-right:calc(-1 * var(--post-pad-x));border-radius:0;overflow:hidden;border:1px solid rgba(0,0,0,.06);background:#fff;width:calc(100% + (var(--post-pad-x) * 2))}.post-media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .post-media[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;display:block;max-height:none;height:auto;object-fit:contain;background:#000}.media-gallery[_ngcontent-%COMP%]{position:relative;width:100%;background:#000;padding-bottom:34px;box-sizing:border-box}.media-strip[_ngcontent-%COMP%]{display:flex;width:100%;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;scrollbar-width:none}.media-strip[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.media-item[_ngcontent-%COMP%]{min-width:100%;flex:0 0 100%;scroll-snap-align:center}.media-dots[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:50%;transform:translate(-50%);display:flex;gap:6px;padding:4px 8px;border-radius:999px;background:#0006;z-index:2;align-items:center}.media-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;background:#ffffff80;display:inline-block}.media-dots[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{background:#fff}.media-dots[_ngcontent-%COMP%]   .media-count[_ngcontent-%COMP%]{width:auto;height:auto;border-radius:12px;padding:1px 6px;font-size:10px;font-weight:800;background:#ffffff29;color:#fff}.post-visibility[_ngcontent-%COMP%]{font-weight:800;font-size:10px;letter-spacing:.16em;text-transform:uppercase;opacity:.7}.post-actions[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;align-items:center;flex-wrap:wrap}.post-action-group[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px}.post-action[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;border-radius:999px;border:1px solid rgba(0,199,255,.45);background:#f5f7faeb;padding:6px 12px;font-size:12px;font-weight:800;letter-spacing:.06em;color:#0a0c12b3;cursor:pointer}.post-action[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:14px}.post-action[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:11px;font-weight:800}.post-action.active[_ngcontent-%COMP%]{border-color:#00c7ffb3;background:#00c7ff1f;color:#0a0c12bf}.post-action.like.active[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#c33}.post-action.count[_ngcontent-%COMP%]{padding:6px 10px;min-width:36px;justify-content:center}.post-action[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.post-action.view[_ngcontent-%COMP%]{cursor:default;border-color:#0000001f;background:#ffffffe6}.post-action-error[_ngcontent-%COMP%]{margin-top:6px;font-size:11px;font-weight:700;color:#c33;letter-spacing:.06em}.post-comments[_ngcontent-%COMP%]{margin-top:10px;padding-top:10px;border-top:1px solid rgba(0,0,0,.06);display:flex;flex-direction:column;gap:10px}.comment-status[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.comment-status.error[_ngcontent-%COMP%]{color:#c33}.comment-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.comment-empty[_ngcontent-%COMP%]{font-size:12px;opacity:.6}.comment[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:flex-start}.comment-avatar[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:999px;overflow:hidden;background:#f5f7faf2;border:1px solid rgba(0,0,0,.08);display:grid;place-items:center;font-weight:900;font-size:11px;color:#0a0c12cc}.comment-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.comment-body[_ngcontent-%COMP%]{flex:1;min-width:0}.comment-meta[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;font-size:11px;opacity:.65}.comment-name[_ngcontent-%COMP%]{font-weight:800;text-transform:uppercase;letter-spacing:.08em}.comment-text[_ngcontent-%COMP%]{font-size:12px;color:#0a0c12d9;margin-top:2px}.comment-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:4px;font-size:11px}.comment-action[_ngcontent-%COMP%]{border:0;background:transparent;padding:0;color:#0a0c1294;font-weight:800;letter-spacing:.08em;text-transform:uppercase;display:inline-flex;align-items:center;gap:6px;cursor:pointer}.comment-action.active[_ngcontent-%COMP%]{color:#009bdce0}.comment-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.comment-heart[_ngcontent-%COMP%]{font-size:12px;line-height:1}.comment-heart.active[_ngcontent-%COMP%]{color:#009bdcf2}.comment-like-count[_ngcontent-%COMP%]{font-size:11px;font-weight:800;color:#0a0c12bf}.comment-reply[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:11px;font-weight:800;letter-spacing:.06em;color:#0a0c1299;text-transform:uppercase;width:100%}.comment-reply[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#009bdcd9}.comment-compose[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap}.comment-input[_ngcontent-%COMP%]{flex:1;min-width:180px;border-radius:12px;border:1px solid rgba(0,0,0,.08);background:#f5f7fae6;padding:8px 10px;font-family:inherit;font-size:12px;color:#0a0c12d9}.comment-submit[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(0,0,0,.12);background:#fffffff5;padding:6px 12px;font-size:11px;font-weight:800;letter-spacing:.08em;text-transform:uppercase;color:#0a0c12b3;cursor:pointer}.post-likes[_ngcontent-%COMP%]{margin-top:10px;padding-top:10px;border-top:1px solid rgba(0,0,0,.06);display:flex;flex-direction:column;gap:10px}.like-status[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.like-status.error[_ngcontent-%COMP%]{color:#c33}.like-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.like-empty[_ngcontent-%COMP%]{font-size:12px;opacity:.6}.like-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;border:0;background:transparent;padding:4px 0;text-align:left;cursor:pointer;color:inherit}.like-avatar[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:999px;overflow:hidden;background:#f5f7faf2;border:1px solid rgba(0,0,0,.08);display:grid;place-items:center;font-weight:900;font-size:11px;color:#0a0c12cc}.like-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.like-body[_ngcontent-%COMP%]{flex:1;min-width:0}.like-name[_ngcontent-%COMP%]{font-weight:800;text-transform:uppercase;letter-spacing:.08em;font-size:11px}.like-handle[_ngcontent-%COMP%]{font-size:11px;opacity:.6}.like-time[_ngcontent-%COMP%]{font-size:11px;opacity:.55}.comment-submit[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.comment-hint[_ngcontent-%COMP%]{font-size:12px;opacity:.6}.post-edit[_ngcontent-%COMP%]{margin-top:12px;display:grid;gap:10px}.post-edit-title[_ngcontent-%COMP%], .post-edit-body[_ngcontent-%COMP%], .post-edit-visibility[_ngcontent-%COMP%]{width:100%;border-radius:14px;border:1px solid rgba(0,0,0,.08);background:#f5f7fae6;padding:10px 12px;font-family:inherit;font-size:13px;color:#0a0c12e6}.post-edit-body[_ngcontent-%COMP%]{min-height:90px;resize:vertical}.post-edit-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.post-edit-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.post-edit-error[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#ff6b81;letter-spacing:.08em}.post-menu[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center;gap:6px;position:relative}.post-visibility-icon[_ngcontent-%COMP%]{font-size:14px;line-height:1;opacity:.7}.post-menu-trigger[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:999px;border:1px solid rgba(0,0,0,.12);background:#ffffffe6;color:#0a0c12b3;font-size:18px;line-height:1;cursor:pointer}.post-menu-trigger[_ngcontent-%COMP%]:focus{outline:2px solid rgba(10,12,18,.18);outline-offset:2px}.post-menu-dropdown[_ngcontent-%COMP%]{position:absolute;top:34px;right:0;min-width:170px;background:#fffffffa;border:1px solid rgba(0,0,0,.08);border-radius:14px;box-shadow:0 18px 60px #0000001f;padding:8px;display:flex;flex-direction:column;gap:6px;z-index:5}.menu-item[_ngcontent-%COMP%]{border:0;background:transparent;text-align:left;padding:6px 8px;border-radius:10px;font-size:12px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:#0a0c12b3;cursor:pointer}.menu-item[_ngcontent-%COMP%]:hover{background:#0a0c120f}.menu-item.danger[_ngcontent-%COMP%]{color:#c33}.menu-item.ghost[_ngcontent-%COMP%]{color:#0a0c128c}.menu-confirm[_ngcontent-%COMP%]{margin-top:6px;padding-top:6px;border-top:1px solid rgba(0,0,0,.08);display:flex;flex-direction:column;gap:6px}.menu-confirm-title[_ngcontent-%COMP%]{font-size:11px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:#0a0c1299}.menu-confirm-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px}.menu-report[_ngcontent-%COMP%]{margin-top:6px;padding-top:6px;border-top:1px solid rgba(0,0,0,.08);display:grid;gap:8px}.menu-report-input[_ngcontent-%COMP%]{width:100%;border-radius:10px;border:1px solid rgba(0,0,0,.1);background:#f5f7faf0;padding:8px;font-family:inherit;font-size:12px;color:#0a0c12d9}.menu-report-error[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#c33;letter-spacing:.06em}.menu-report-success[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#0a0c12b3;letter-spacing:.06em}@media(max-width:900px){.card[_ngcontent-%COMP%]{padding:20px}}@media(max-width:700px){.wrap[_ngcontent-%COMP%]{padding:max(12px,env(safe-area-inset-top)) max(12px,env(safe-area-inset-left)) 20px max(12px,env(safe-area-inset-right))}.card[_ngcontent-%COMP%]{padding:16px;border-radius:18px}.head[_ngcontent-%COMP%]{gap:12px;align-items:flex-start}.head-actions[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.info[_ngcontent-%COMP%]{width:100%}.title-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.title-actions[_ngcontent-%COMP%]{width:100%;flex-wrap:wrap;justify-content:flex-start}}@media(max-width:520px){.avatar[_ngcontent-%COMP%]{width:96px;height:96px}.avatar.large[_ngcontent-%COMP%]{width:150px;height:150px}.composer-row[_ngcontent-%COMP%]{flex-direction:column}.composer-avatar[_ngcontent-%COMP%]{width:42px;height:42px}.author-avatar[_ngcontent-%COMP%]{width:40px;height:40px}.post-card[_ngcontent-%COMP%]{padding:16px}.post-actions[_ngcontent-%COMP%]{gap:8px}}"]})};export{Me as ProfilePageComponent};
