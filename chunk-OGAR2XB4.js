import{a as ne}from"./chunk-TS4QU3HE.js";import{b as ie}from"./chunk-JLBVTQ6O.js";import{a as Y,b as Z,e as ee,o as te}from"./chunk-KSNNJYBO.js";import"./chunk-LJDR2ADK.js";import"./chunk-7DJA5TI4.js";import"./chunk-AFJFBD4M.js";import"./chunk-LQQHCQP3.js";import{c as X}from"./chunk-KO5X6LCN.js";import{$ as z,C as I,Ca as G,D as a,Da as Q,G as S,Ga as J,H as V,Ia as K,L as v,O as L,P as d,Q as r,R as s,S as h,Y as b,Z as g,_ as l,aa as B,ba as A,ca as D,da as N,ea as M,fa as m,ga as _,ha as P,ja as U,ka as F,la as $,oa as j,p,q as u,qa as O,r as w,ra as R,s as k,sa as W,xa as H,ya as q}from"./chunk-SPQ2JWKS.js";import{a as y,b as T}from"./chunk-2NFLSA4Y.js";var se=["feed"],le=()=>[];function ce(o,t){o&1&&(r(0,"div",13),m(1,"Loading videos..."),s())}function me(o,t){if(o&1&&(r(0,"div",14),m(1),s()),o&2){let e=l();a(),_(e.error)}}function de(o,t){o&1&&(r(0,"div",13),m(1," No videos yet. "),s())}function pe(o,t){if(o&1&&h(0,"img",42),o&2){let e=l().$implicit;d("src",e.author==null?null:e.author.avatar_url,I)}}function ue(o,t){if(o&1&&(r(0,"span"),m(1),s()),o&2){let e=l().$implicit;a(),P(" ",((e.author==null?null:e.author.display_name)||(e.author==null?null:e.author.username)||"U").slice(0,2).toUpperCase()," ")}}function ge(o,t){if(o&1&&(r(0,"div",43),m(1),s()),o&2){let e=l().$implicit;a(),P(" ",e.media_caption||e.body," ")}}function _e(o,t){o&1&&(w(),r(0,"svg",32),h(1,"path",44)(2,"path",45)(3,"path",46),s())}function fe(o,t){o&1&&(w(),r(0,"svg",32),h(1,"path",44)(2,"line",47)(3,"line",48),s())}function ve(o,t){if(o&1&&(r(0,"div",49),m(1),s()),o&2){let e=l().$implicit,n=l();a(),P(" ",n.postActionError[e.id]," ")}}function he(o,t){if(o&1){let e=b();r(0,"section",15)(1,"div",16)(2,"app-video-player",17),g("viewed",function(){let i=p(e).$implicit,c=l();return u(c.recordView(i))}),s(),h(3,"div",18),r(4,"div",19)(5,"button",20),g("click",function(){let i=p(e).$implicit,c=l();return u(c.openAuthorProfile(i.author,i.author_id))}),r(6,"span",21),v(7,pe,1,1,"img",22)(8,ue,2,1,"span",23),s(),r(9,"span",24)(10,"span",25),m(11),s(),r(12,"span",26),m(13),s()()(),v(14,ge,2,1,"div",27),s(),r(15,"div",28),g("click",function(i){return p(e),u(i.stopPropagation())}),r(16,"button",29),g("click",function(){p(e);let i=l();return u(i.toggleReelMute())}),v(17,_e,4,0,"svg",30)(18,fe,4,0,"svg",30),s(),r(19,"button",31),g("click",function(){let i=p(e).$implicit,c=l();return u(c.togglePostLike(i))}),w(),r(20,"svg",32),h(21,"path",33),s()(),k(),r(22,"div",34),m(23),s(),r(24,"button",35),g("click",function(){let i=p(e).$implicit,c=l();return u(c.toggleComments(i))}),w(),r(25,"svg",32),h(26,"path",36),s()(),k(),r(27,"div",34),m(28),s(),r(29,"div",37),w(),r(30,"svg",38),h(31,"path",39)(32,"circle",40),s(),k(),r(33,"div",34),m(34),s()()(),v(35,ve,2,1,"div",41),s()()}if(o&2){let e=t.$implicit,n=l();L("data-post-id",e.id),a(2),d("src",n.reelMediaSrc(e))("poster",e.thumb_url??null)("showMute",!1),a(5),d("ngIf",e.author==null?null:e.author.avatar_url),a(),d("ngIf",!(e.author!=null&&e.author.avatar_url)),a(3),_((e.author==null?null:e.author.display_name)||(e.author==null?null:e.author.username)||"Member"),a(2),P("@",(e.author==null?null:e.author.username)||(e.author==null?null:e.author.user_id)),a(),d("ngIf",e.media_caption||e.body),a(2),M("active",n.reelMuted),a(),d("ngIf",!n.reelMuted),a(),d("ngIf",n.reelMuted),a(),M("active",e.liked_by_me),d("disabled",n.likeBusy[e.id]),a(4),_(e.like_count),a(),M("active",n.commentOpenPostId===e.id),a(4),_(e.comment_count),a(6),_(e.view_count),a(),d("ngIf",n.postActionError[e.id])}}function xe(o,t){if(o&1&&(r(0,"div",60)(1,"div"),m(2),s(),r(3,"div",61),m(4),O(5,"date"),s()()),o&2){let e=l(2);a(2),_((e.commentPost.author==null?null:e.commentPost.author.display_name)||(e.commentPost.author==null?null:e.commentPost.author.username)||"Member"),a(2),_(R(5,2,e.commentPost.created_at,"mediumDate"))}}function ye(o,t){o&1&&(r(0,"div",62),m(1,"Loading comments..."),s())}function Ce(o,t){if(o&1&&(r(0,"div",63),m(1),s()),o&2){let e=l().ngIf,n=l();a(),_(n.commentErrors[e])}}function be(o,t){o&1&&(r(0,"div",67),m(1,"No comments yet."),s())}function Pe(o,t){if(o&1&&h(0,"img",42),o&2){let e=l().$implicit;d("src",e.author==null?null:e.author.avatar_url,I)}}function we(o,t){if(o&1&&(r(0,"span"),m(1),s()),o&2){let e=l().$implicit;a(),P(" ",((e.author==null?null:e.author.display_name)||(e.author==null?null:e.author.username)||"U").slice(0,2).toUpperCase()," ")}}function Me(o,t){if(o&1&&(r(0,"span",78),m(1),s()),o&2){let e=l().$implicit;a(),_(e.like_count)}}function Se(o,t){if(o&1){let e=b();r(0,"div",68)(1,"button",69),g("click",function(){let i=p(e).$implicit,c=l(3);return u(c.openAuthorProfile(i.author))}),v(2,Pe,1,1,"img",22)(3,we,2,1,"span",23),s(),r(4,"div",70)(5,"div",71)(6,"span",72),m(7),s(),r(8,"span",73),m(9),O(10,"date"),s()(),r(11,"div",74),m(12),s(),r(13,"div",75)(14,"button",76),g("click",function(){let i=p(e).$implicit,c=l(2).ngIf,f=l();return u(f.startCommentReply(c,i))}),m(15," Reply "),s(),r(16,"button",76),g("click",function(){let i=p(e).$implicit,c=l(2).ngIf,f=l();return u(f.toggleCommentLike(c,i))}),r(17,"span"),m(18),s(),v(19,Me,2,1,"span",77),s()()()()}if(o&2){let e=t.$implicit,n=l(2).ngIf,i=l();N("margin-left",((i.commentDepth[n]==null?null:i.commentDepth[n][e.id])??0)*16,"px"),a(2),d("ngIf",e.author==null?null:e.author.avatar_url),a(),d("ngIf",!(e.author!=null&&e.author.avatar_url)),a(4),_((e.author==null?null:e.author.display_name)||(e.author==null?null:e.author.username)||"Member"),a(2),_(R(10,13,e.created_at,"short")),a(3),_(e.body),a(2),d("disabled",i.commentBusy[n]),a(2),M("active",e.liked_by_me),d("disabled",i.commentLikeBusy[n]==null?null:i.commentLikeBusy[n][e.id]),a(2),_(e.liked_by_me?"Loved":"Love"),a(),d("ngIf",e.like_count)}}function ke(o,t){if(o&1&&(r(0,"div",64),v(1,be,2,0,"div",65)(2,Se,20,16,"div",66),s()),o&2){let e=l().ngIf,n=l();a(),d("ngIf",!(n.commentDisplay[e]!=null&&n.commentDisplay[e].length)),a(),d("ngForOf",n.commentDisplay[e]||j(2,le))}}function Ie(o,t){if(o&1){let e=b();r(0,"div",83),m(1," Replying to "),r(2,"span"),m(3),s(),r(4,"button",84),g("click",function(){p(e);let i=l(2).ngIf,c=l();return u(c.cancelCommentReply(i))}),m(5,"Cancel"),s()()}if(o&2){let e=t.ngIf;a(3),_(e.authorName)}}function Oe(o,t){if(o&1){let e=b();r(0,"div",79),v(1,Ie,6,1,"div",80),r(2,"textarea",81),$("ngModelChange",function(i){p(e);let c=l().ngIf,f=l();return F(f.commentDrafts[c],i)||(f.commentDrafts[c]=i),u(i)}),s(),r(3,"button",82),g("click",function(){p(e);let i=l().ngIf,c=l();return u(c.submitComment(i))}),m(4),s()()}if(o&2){let e=l().ngIf,n=l();a(),d("ngIf",n.commentReplyTarget[e]),a(),d("disabled",n.commentBusy[e]),U("ngModel",n.commentDrafts[e]),a(),d("disabled",n.commentBusy[e]),a(),P(" ",n.commentBusy[e]?"Sending...":"Comment"," ")}}function Re(o,t){o&1&&(r(0,"div",85),m(1,"Sign in to comment."),s())}function Ee(o,t){if(o&1){let e=b();r(0,"div",50),g("click",function(){p(e);let i=l();return u(i.closeComments())}),r(1,"div",51),g("click",function(i){return p(e),u(i.stopPropagation())}),r(2,"div",52)(3,"div",53),m(4,"Comments"),s(),r(5,"button",54),g("click",function(){p(e);let i=l();return u(i.closeComments())}),m(6," x "),s()(),v(7,xe,6,5,"div",55)(8,ye,2,0,"div",56)(9,Ce,2,1,"div",57)(10,ke,3,3,"div",58)(11,Oe,5,5,"div",59)(12,Re,2,0,"ng-template",null,1,W),s()()}if(o&2){let e=t.ngIf,n=D(13),i=l();a(7),d("ngIf",i.commentPost),a(),d("ngIf",i.commentLoading[e]),a(),d("ngIf",i.commentErrors[e]),a(),d("ngIf",!i.commentLoading[e]&&!i.commentErrors[e]),a(),d("ngIf",i.meId)("ngIfElse",n)}}var oe=class o{constructor(t,e,n,i){this.route=t;this.router=e;this.auth=n;this.postsService=i}feedRef;countryCode="";countryName="";loading=!1;error="";posts=[];videoPosts=[];reelMuted=!1;meId=null;likeBusy={};postActionError={};viewedPostIds=new Set;commentOpenPostId=null;commentPost=null;commentLoading={};commentBusy={};commentErrors={};commentDrafts={};commentItems={};commentDisplay={};commentDepth={};commentReplyTarget={};commentLikeBusy={};seeded=!1;routeSub;querySub;pendingScrollId=null;muteListener;ngOnInit(){this.reelMuted=this.readGlobalMute(),this.muteListener=t=>{this.reelMuted=!!t.detail},window.addEventListener("video-player-mute",this.muteListener),this.loadMe(),this.routeSub=this.route.paramMap.subscribe(t=>{this.countryCode=(t.get("country")||"").toUpperCase(),this.commentOpenPostId=null,this.commentPost=null,this.seeded=this.applySeedFromState(),this.seeded?this.tryScrollToPending():this.loadReels()}),this.querySub=this.route.queryParamMap.subscribe(t=>{this.pendingScrollId=t.get("postId"),this.tryScrollToPending()})}ngOnDestroy(){this.routeSub?.unsubscribe(),this.querySub?.unsubscribe(),this.muteListener&&(window.removeEventListener("video-player-mute",this.muteListener),this.muteListener=void 0)}trackPostById(t,e){return e.id}goBack(){if(this.countryCode){this.router.navigate(["/globe"],{queryParams:{country:this.countryCode,tab:"media"}});return}this.router.navigate(["/globe"])}openAuthorProfile(t,e){let n=e||t?.user_id||t?.username?.trim();n&&this.router.navigate(["/user",n])}recordView(t){!t?.id||this.viewedPostIds.has(t.id)||(this.viewedPostIds.add(t.id),this.postsService.recordView(t))}toggleReelMute(){let t=!this.reelMuted;this.reelMuted=t;try{window.__videoMuted=t}catch{}window.dispatchEvent(new CustomEvent("video-player-mute",{detail:t}))}async togglePostLike(t){if(!this.meId){this.postActionError[t.id]="Sign in to like.";return}if(!this.likeBusy[t.id]){this.likeBusy[t.id]=!0,this.postActionError[t.id]="";try{let e=t.liked_by_me?await this.postsService.unlikePost(t.id):await this.postsService.likePost(t.id);this.applyPostUpdate(e)}catch(e){this.postActionError[t.id]=e?.message??String(e)}finally{this.likeBusy[t.id]=!1}}}toggleComments(t){if(this.commentOpenPostId===t.id){this.closeComments();return}this.commentOpenPostId=t.id,this.commentPost=t,!this.commentItems[t.id]&&!this.commentLoading[t.id]&&this.loadComments(t.id)}closeComments(){this.commentOpenPostId=null,this.commentPost=null}startCommentReply(t,e){!t||!e?.id||(this.commentReplyTarget[t]={commentId:e.id,authorName:this.commentAuthorName(e)})}cancelCommentReply(t){this.commentReplyTarget[t]=null}async toggleCommentLike(t,e){if(!this.meId){this.commentErrors[t]="Sign in to like comments.";return}let n=y({},this.commentLikeBusy[t]??{});if(!n[e.id]){n[e.id]=!0,this.commentLikeBusy[t]=n,this.commentErrors[t]="";try{let i=e.liked_by_me?await this.postsService.unlikeComment(e.id):await this.postsService.likeComment(e.id);this.applyCommentUpdate(t,i)}catch(i){this.commentErrors[t]=i?.message??String(i)}finally{this.commentLikeBusy[t]=T(y({},this.commentLikeBusy[t]),{[e.id]:!1})}}}async submitComment(t){if(!this.meId){this.commentErrors[t]="Sign in to comment.";return}let e=(this.commentDrafts[t]??"").trim();if(!e){this.commentErrors[t]="Write something before commenting.";return}if(!this.commentBusy[t]){this.commentBusy[t]=!0,this.commentErrors[t]="";try{let n=this.commentReplyTarget[t]?.commentId??null,i=await this.postsService.addComment(t,e,n);this.applyCommentUpdate(t,i),this.commentDrafts[t]="",this.commentReplyTarget[t]=null,this.bumpPostCommentCount(t,1)}catch(n){this.commentErrors[t]=n?.message??String(n)}finally{this.commentBusy[t]=!1}}}async loadMe(){let t=await this.auth.getUser();this.meId=t?.id??null}async loadReels(){if(!this.countryCode){this.error="Missing country.";return}this.loading=!0,this.error="",this.posts=[],this.videoPosts=[];try{let t=await this.postsService.listByCountry(this.countryCode,180,{demoLimit:180,skipComments:!0});this.posts=t??[],this.videoPosts=this.posts.filter(e=>!!this.reelMediaSrc(e)),this.countryName=this.posts.find(e=>e.country_name)?.country_name||this.countryCode,this.tryScrollToPending()}catch(t){this.error=t?.message??String(t)}finally{this.loading=!1}}applySeedFromState(){let t=history.state||{},e=String(t.seedCountry||"").toUpperCase();if(e&&e!==this.countryCode)return!1;let i=(Array.isArray(t.seedPosts)?t.seedPosts:[]).filter(c=>!!this.reelMediaSrc(c));return i.length?(this.videoPosts=i,this.countryName=t.countryName||this.countryName,this.loading=!1,this.error="",!0):!1}tryScrollToPending(){let t=this.pendingScrollId;!t||!this.feedRef?.nativeElement||!this.videoPosts.length||setTimeout(()=>{let e=this.feedRef?.nativeElement.querySelector(`[data-post-id="${t}"]`);e&&(e.scrollIntoView({behavior:"auto",block:"start"}),this.pendingScrollId=null)},50)}applyPostUpdate(t){let e=this.videoPosts.findIndex(n=>n.id===t.id);e>=0&&(this.videoPosts[e]=y(y({},this.videoPosts[e]),t))}readGlobalMute(){try{return window.__videoMuted===!0}catch{return!1}}reelMediaSrc(t){let e=this.postMediaUrls(t);if(!e.length)return"";let i=this.postMediaTypes(t).findIndex(c=>c==="video");return i>=0?e[i]||e[0]||"":String(t.media_type||"").toLowerCase()==="video"&&e[0]||""}postMediaUrls(t){let e=String(t?.media_url||"").trim();if(!e)return[];if(e.startsWith("{")||e.startsWith("["))try{let n=JSON.parse(e);if(Array.isArray(n))return n.filter(Boolean).map(String);if(Array.isArray(n?.urls))return n.urls.filter(Boolean);if(n?.url)return[n.url]}catch{}return[e]}postMediaTypes(t){let e=String(t?.media_url||"").trim();if(!e)return[];if(e.startsWith("{")||e.startsWith("["))try{let n=JSON.parse(e);if(Array.isArray(n))return n.map(i=>this.inferMediaTypeFromUrl(i,t.media_type));if(Array.isArray(n?.types)&&n.types.length)return Array.isArray(n?.urls)&&n.urls.length?n.urls.map((i,c)=>{let f=n.types?.[c];return f==="video"||f==="image"?f:this.inferMediaTypeFromUrl(i,t.media_type)}):n.types.map(i=>i==="video"?"video":"image");if(Array.isArray(n?.urls))return n.urls.map(i=>this.inferMediaTypeFromUrl(i,t.media_type));if(n?.url)return[this.inferMediaTypeFromUrl(n.url,t.media_type)]}catch{}return[this.inferMediaTypeFromUrl(e,t.media_type)]}inferMediaTypeFromUrl(t,e){let n=String(t||"").toLowerCase();return/\.(mp4|webm|mov|m4v|avi|mkv)(\?|#|$)/.test(n)?"video":/\.(jpg|jpeg|png|gif|webp|avif)(\?|#|$)/.test(n)?"image":String(e||"").toLowerCase()==="video"?"video":"image"}bumpPostCommentCount(t,e){let n=this.videoPosts.findIndex(i=>i.id===t);if(n>=0){let i=y({},this.videoPosts[n]);i.comment_count=Math.max(0,Number(i.comment_count??0)+e),this.videoPosts[n]=i}}async loadComments(t){this.commentLoading[t]=!0,this.commentErrors[t]="";try{let e=await this.postsService.listComments(t,60);this.commentItems[t]=e,this.rebuildCommentThread(t)}catch(e){this.commentErrors[t]=e?.message??String(e)}finally{this.commentLoading[t]=!1}}rebuildCommentThread(t){let e=this.commentItems[t]??[],n={},i=[];for(let x of e){let C=x.parent_id??"";C?(n[C]||(n[C]=[]),n[C].push(x)):i.push(x)}let c=[],f={},E=(x,C)=>{c.push(x),f[x.id]=C;let re=n[x.id]??[];for(let ae of re)E(ae,C+1)};for(let x of i)E(x,0);this.commentDisplay[t]=c,this.commentDepth[t]=f}applyCommentUpdate(t,e){let i=[...this.commentItems[t]??[]],c=i.findIndex(f=>f.id===e.id);c>=0?i[c]=y(y({},i[c]),e):i.push(e),this.commentItems[t]=i,this.rebuildCommentThread(t)}commentAuthorName(t){return t.author?.username||t.author?.display_name||"Member"}static \u0275fac=function(e){return new(e||o)(S(J),S(K),S(X),S(ie))};static \u0275cmp=V({type:o,selectors:[["app-reels-page"]],viewQuery:function(e,n){if(e&1&&z(se,5),e&2){let i;B(i=A())&&(n.feedRef=i.first)}},decls:16,vars:9,consts:[["feed",""],["commentSignIn",""],[1,"reels-root"],["aria-hidden","true",1,"reels-bg"],[1,"reels-header"],["type","button",1,"reels-back",3,"click"],[1,"reels-title"],[1,"reels-sub"],[1,"reels-feed"],["class","reels-state",4,"ngIf"],["class","reels-state error",4,"ngIf"],["class","reel",4,"ngFor","ngForOf","ngForTrackBy"],["class","comments-backdrop",3,"click",4,"ngIf"],[1,"reels-state"],[1,"reels-state","error"],[1,"reel"],[1,"reel-frame"],["preload","auto","centerOverlayMode","on-click",1,"reel-player","controls-hidden",3,"viewed","src","poster","showMute"],["aria-hidden","true",1,"reel-gradient"],[1,"reel-meta"],["type","button",1,"reel-author",3,"click"],[1,"author-avatar"],["alt","avatar",3,"src",4,"ngIf"],[4,"ngIf"],[1,"author-text"],[1,"author-name"],[1,"author-handle"],["class","reel-caption",4,"ngIf"],[1,"reel-actions",3,"click"],["type","button","aria-label","Toggle sound",1,"reel-action","mute",3,"click"],["class","reel-icon","viewBox","0 0 24 24","aria-hidden","true",4,"ngIf"],["type","button","aria-label","Like",1,"reel-action",3,"click","disabled"],["viewBox","0 0 24 24","aria-hidden","true",1,"reel-icon"],["d","M12 21s-6.7-4.4-9.2-7.4C.9 11.4 1.5 7.6 4.6 6 6.6 5 9 5.6 10.5 7.4L12 9l1.5-1.6C15 5.6 17.4 5 19.4 6c3.1 1.6 3.7 5.4 1.8 7.6C18.7 16.6 12 21 12 21z"],[1,"reel-count"],["type","button","aria-label","Comments",1,"reel-action",3,"click"],["d","M4 4h16a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H9l-5 4v-4H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"],["aria-label","Views",1,"reel-view"],["viewBox","0 0 24 24","aria-hidden","true",1,"reel-icon","reel-view-icon"],["d","M2 12s3.5-6 10-6 10 6 10 6-3.5 6-10 6-10-6-10-6z"],["cx","12","cy","12","r","3"],["class","reel-error",4,"ngIf"],["alt","avatar",3,"src"],[1,"reel-caption"],["d","M4 10h4l5-4v12l-5-4H4z"],["d","M16 9a3 3 0 0 1 0 6"],["d","M18.5 6.5a6 6 0 0 1 0 11"],["x1","16","y1","8","x2","21","y2","13"],["x1","21","y1","8","x2","16","y2","13"],[1,"reel-error"],[1,"comments-backdrop",3,"click"],[1,"comments-panel",3,"click"],[1,"comments-head"],[1,"comments-title"],["type","button","aria-label","Close",1,"comments-close",3,"click"],["class","comments-meta",4,"ngIf"],["class","comment-status",4,"ngIf"],["class","comment-status error",4,"ngIf"],["class","comments-body",4,"ngIf"],["class","comment-compose",4,"ngIf","ngIfElse"],[1,"comments-meta"],[1,"comments-meta-sub"],[1,"comment-status"],[1,"comment-status","error"],[1,"comments-body"],["class","comment-empty",4,"ngIf"],["class","comment-row",3,"marginLeft",4,"ngFor","ngForOf"],[1,"comment-empty"],[1,"comment-row"],["type","button",1,"comment-avatar",3,"click"],[1,"comment-core"],[1,"comment-meta"],[1,"comment-name"],[1,"comment-time"],[1,"comment-text"],[1,"comment-actions"],["type","button",1,"comment-action",3,"click","disabled"],["class","comment-like-count",4,"ngIf"],[1,"comment-like-count"],[1,"comment-compose"],["class","comment-reply",4,"ngIf"],["placeholder","Write a comment","rows","2",1,"comment-input",3,"ngModelChange","disabled","ngModel"],["type","button",1,"comment-submit",3,"click","disabled"],[1,"comment-reply"],["type","button",1,"ghost-link",3,"click"],[1,"comment-hint"]],template:function(e,n){if(e&1){let i=b();r(0,"div",2),h(1,"div",3),r(2,"header",4)(3,"button",5),g("click",function(){return p(i),u(n.goBack())}),m(4,"Back"),s(),r(5,"div",6),m(6),s(),r(7,"div",7),m(8,"Country reels"),s()(),r(9,"div",8,0),v(11,ce,2,0,"div",9)(12,me,2,1,"div",10)(13,de,2,0,"div",9)(14,he,36,22,"section",11),s()(),v(15,Ee,14,6,"div",12)}e&2&&(M("comments-open",!!n.commentOpenPostId),a(6),_(n.countryName||n.countryCode||"Videos"),a(5),d("ngIf",n.loading),a(),d("ngIf",!n.loading&&n.error),a(),d("ngIf",!n.loading&&!n.error&&!n.videoPosts.length),a(),d("ngForOf",n.videoPosts)("ngForTrackBy",n.trackPostById),a(),d("ngIf",n.commentOpenPostId))},dependencies:[Q,H,q,te,Y,Z,ee,ne,G],styles:["[_nghost-%COMP%]{display:block;height:100%;background:#050608;color:#f4f6f8}.reels-root[_ngcontent-%COMP%]{position:relative;height:100dvh;overflow:hidden}.reels-bg[_ngcontent-%COMP%]{position:absolute;inset:0;background:radial-gradient(circle at 20% 10%,rgba(0,150,200,.25),transparent 45%),radial-gradient(circle at 90% 15%,rgba(255,120,40,.18),transparent 40%),linear-gradient(160deg,#050608,#0b111c 55%,#090b12);z-index:0}.reels-header[_ngcontent-%COMP%]{position:fixed;top:18px;left:18px;right:18px;display:flex;flex-direction:column;gap:6px;z-index:5;pointer-events:none}.reels-back[_ngcontent-%COMP%]{pointer-events:auto;align-self:flex-end;border:1px solid rgba(255,255,255,.15);background:#0a0c12a6;color:#fff;border-radius:999px;padding:6px 14px;font-weight:700;font-size:12px;letter-spacing:.08em;text-transform:uppercase;cursor:pointer}.reels-title[_ngcontent-%COMP%]{font-size:20px;font-weight:800;letter-spacing:.08em;text-transform:uppercase}.reels-sub[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.2em;text-transform:uppercase;opacity:.7}.reels-feed[_ngcontent-%COMP%]{position:relative;height:100%;overflow-y:auto;scroll-snap-type:y mandatory;z-index:1;padding-bottom:env(safe-area-inset-bottom);box-sizing:border-box}.reels-feed[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.reels-state[_ngcontent-%COMP%]{position:relative;margin:120px auto;width:min(420px,90%);padding:16px;background:#080a0eb3;border:1px solid rgba(255,255,255,.1);border-radius:16px;text-align:center;font-size:13px;letter-spacing:.08em;text-transform:uppercase}.reels-state.error[_ngcontent-%COMP%]{color:#ffb3a8;border-color:#ff786459}.reel[_ngcontent-%COMP%]{height:100dvh;scroll-snap-align:start}.reel-frame[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;overflow:hidden;background:#000}.reel-player[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]     app-video-player.reel-player .mute-toggle{display:none!important}.reel-gradient[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(180deg,#0000008c,#0000 45%,#000000b3);pointer-events:none}.reel-meta[_ngcontent-%COMP%]{position:absolute;left:18px;bottom:26px;max-width:min(70vw,520px);z-index:2;display:flex;flex-direction:column;gap:10px;pointer-events:auto}.reel-author[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;padding:8px 12px;border-radius:999px;background:#0a0c12a6;border:1px solid rgba(255,255,255,.15);color:#fff;cursor:pointer;pointer-events:auto}.author-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;overflow:hidden;background:#ffffff14;display:grid;place-items:center;font-weight:700;letter-spacing:.08em}.author-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.author-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.author-name[_ngcontent-%COMP%]{font-weight:700;font-size:13px}.author-handle[_ngcontent-%COMP%]{font-size:11px;opacity:.7}.reel-caption[_ngcontent-%COMP%]{font-size:14px;line-height:1.4;color:#ffffffe6;text-shadow:0 2px 12px rgba(0,0,0,.6)}.reel-actions[_ngcontent-%COMP%]{position:absolute;right:18px;bottom:120px;display:flex;flex-direction:column;align-items:center;gap:16px;z-index:2}.reel-action[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:50%;border:1px solid rgba(255,255,255,.2);background:#080a0ea6;color:#fff;display:grid;place-items:center;cursor:pointer}.reel-action.active[_ngcontent-%COMP%]{border-color:#ff7864b3;color:#ff7b7b;box-shadow:0 0 18px #ff786466}.reel-icon[_ngcontent-%COMP%]{width:22px;height:22px;fill:currentColor}.reel-count[_ngcontent-%COMP%]{font-size:12px;font-weight:700;letter-spacing:.08em}.reel-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px;color:#ffffffd9}.reel-view-icon[_ngcontent-%COMP%]{opacity:.85}.reel-error[_ngcontent-%COMP%]{position:absolute;right:18px;top:90px;max-width:220px;padding:10px 12px;border-radius:12px;background:#140808cc;border:1px solid rgba(255,120,100,.4);font-size:12px;color:#ffb3a8}.comments-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#06080cb3;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);display:flex;align-items:flex-end;justify-content:center;z-index:10}.comments-panel[_ngcontent-%COMP%]{width:min(760px,100%);max-height:72vh;background:#0a0c12f2;border-top-left-radius:24px;border-top-right-radius:24px;border:1px solid rgba(255,255,255,.08);padding:16px 16px 20px;display:flex;flex-direction:column;gap:12px}.comments-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px}.comments-title[_ngcontent-%COMP%]{font-size:14px;text-transform:uppercase;letter-spacing:.18em;font-weight:800}.comments-close[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.2);background:#080a0eb3;color:#fff;border-radius:999px;width:30px;height:30px;cursor:pointer}.comments-meta[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.comments-meta-sub[_ngcontent-%COMP%]{font-size:11px;margin-top:4px}.comment-status[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.comment-status.error[_ngcontent-%COMP%]{color:#ffb3a8}.comments-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:12px}.comment-empty[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.comment-row[_ngcontent-%COMP%]{display:flex;gap:10px}.comment-avatar[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;overflow:hidden;border:1px solid rgba(255,255,255,.12);background:#ffffff14;display:grid;place-items:center;color:#fff;cursor:pointer}.comment-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.comment-core[_ngcontent-%COMP%]{flex:1;min-width:0}.comment-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:11px;opacity:.7}.comment-name[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.08em;text-transform:uppercase}.comment-text[_ngcontent-%COMP%]{margin-top:4px;font-size:13px;line-height:1.4}.comment-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:6px}.comment-action[_ngcontent-%COMP%]{border:0;background:#ffffff14;color:#fff;border-radius:999px;padding:4px 10px;font-size:11px;letter-spacing:.06em;cursor:pointer}.comment-action.active[_ngcontent-%COMP%]{color:#ff9d8c}.comment-action[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.comment-like-count[_ngcontent-%COMP%]{margin-left:6px;font-weight:700}.comment-compose[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.08);padding-top:10px;display:flex;flex-direction:column;gap:10px}.comment-reply[_ngcontent-%COMP%]{font-size:12px;opacity:.8;display:flex;align-items:center;gap:8px}.comment-reply[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#8bdcff}.ghost-link[_ngcontent-%COMP%]{border:0;background:transparent;color:#fff;font-size:11px;cursor:pointer}.comment-input[_ngcontent-%COMP%]{border-radius:14px;border:1px solid rgba(255,255,255,.1);background:#080a0eb3;color:#fff;padding:10px 12px;font-size:13px;resize:vertical}.comment-submit[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(139,220,255,.6);background:#0a78c840;color:#fff;padding:8px 16px;font-size:12px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;cursor:pointer}.comment-submit[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.comment-hint[_ngcontent-%COMP%]{font-size:12px;opacity:.7;text-align:center}@media(max-width:720px){.reel-actions[_ngcontent-%COMP%]{right:12px;bottom:90px}.reel-action[_ngcontent-%COMP%]{width:46px;height:46px}.reels-title[_ngcontent-%COMP%]{font-size:16px}.reel-caption[_ngcontent-%COMP%]{font-size:13px}}"]})};export{oe as ReelsPageComponent};
