import{a as Ht}from"./chunk-ZQ76HOHQ.js";import{a as Wt}from"./chunk-YQQ6SS3P.js";import{a as Gt}from"./chunk-TS4QU3HE.js";import{a as Dt,b as Bt}from"./chunk-JLBVTQ6O.js";import{a as $t}from"./chunk-5HBUYTZB.js";import{a as Rt}from"./chunk-7L72BQGT.js";import{a as Vt}from"./chunk-JFWLUDT4.js";import{a as Mt,b as kt,e as It,h as Et,i as Ot,j as Tt,n as Ut,o as Ft}from"./chunk-KSNNJYBO.js";import{a as St}from"./chunk-57X26VKZ.js";import{a as zt}from"./chunk-YDPXGYO4.js";import{a as Nt,b as Lt}from"./chunk-YRPTNGKR.js";import"./chunk-VEHW3HLT.js";import{a as At}from"./chunk-YQ2TA2FF.js";import"./chunk-LJDR2ADK.js";import"./chunk-7DJA5TI4.js";import{a as wt}from"./chunk-AFJFBD4M.js";import"./chunk-LQQHCQP3.js";import{a as Ct,c as Pt}from"./chunk-KO5X6LCN.js";import{Aa as ft,Ba as ht,C as U,Ca as vt,D as a,Da as xt,G as I,Ga as bt,H as ct,Ia as yt,L as h,O as at,P as d,Q as l,R as c,S as k,V,W as G,X as tt,Y as P,Z as x,_ as s,ca as $,da as H,ea as M,fa as p,ga as C,ha as w,ia as X,ja as N,k as Y,ka as A,la as L,ma as dt,oa as pt,p as g,pa as et,q as f,qa as K,ra as Z,sa as J,ua as _t,v as lt,xa as ut,ya as mt,za as gt}from"./chunk-SPQ2JWKS.js";import{a as R,b as q}from"./chunk-2NFLSA4Y.js";var it=class o{viewer=null;Cesium=null;overlayHost=null;particleCanvas=null;particleCtx=null;raf=0;particleScale=1;canvasOffsetX=0;canvasOffsetY=0;canvasCssWidth=0;canvasCssHeight=0;drawBufferWidth=0;drawBufferHeight=0;cssScaleX=1;cssScaleY=1;hostCssWidth=0;hostCssHeight=0;readyResolver=null;readyPromise=new Promise(e=>{this.readyResolver=e});countries=[];cachedPayload=null;countryClickCb=null;selectedId=null;cachedConnections=[];onlineConnectionIds=new globalThis.Set;MAX_NETWORK_NODES=140;FIREWORK_SPAWN_INTERVAL=680;FIREWORK_MIN_SPEED=.03;FIREWORK_MAX_SPEED=.055;FIREWORK_MIN_TIME=1600;FIREWORK_MAX_TIME=2800;FIREWORK_MAX=18;FIREWORK_TRAIL=10;FLOATING_WORD_COUNT=42;fireworkShots=[];fireworkParticles=[];lastFireworkSpawn=0;floatingWords=[];floatingWordPool=[];fireworkWordGroups=[];labelsDataSource=null;countriesDataSource=null;init(e){this.overlayHost=e,getComputedStyle(e).position==="static"&&(e.style.position="relative"),this.ensureCesium().then(t=>{if(!t)return;this.Cesium=t;let i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=",n=new t.Viewer(e,{animation:!1,timeline:!1,geocoder:!1,homeButton:!1,baseLayerPicker:!1,imageryProvider:new t.SingleTileImageryProvider({url:i}),terrainProvider:new t.EllipsoidTerrainProvider,sceneModePicker:!1,navigationHelpButton:!1,infoBox:!1,selectionIndicator:!1,fullscreenButton:!1,shouldAnimate:!0});try{n.cesiumWidget.creditContainer.style.display="none"}catch{}n.imageryLayers.removeAll(),n.scene.globe.enableLighting=!1,n.scene.skyAtmosphere.show=!1,n.scene.globe.showGroundAtmosphere=!1,n.scene.backgroundColor=t.Color.BLACK;try{n.scene.skyBox.show=!1}catch{}let r=t.Color.fromCssColorString("#0b2b3b");n.scene.globe.baseColor=r,n.scene.postProcessStages.fxaa.enabled=!0,n.scene.screenSpaceCameraController.maximumZoomDistance=6e7,n.scene.screenSpaceCameraController.minimumZoomDistance=6e5,n.camera.setView({destination:t.Cartesian3.fromDegrees(0,20,22e6)}),this.viewer=n;let _=n.scene.canvas?.parentElement??e;this.overlayHost=_,this.installOverlay(_),this.startOverlayLoop(),this.installClickHandler(),this.readyResolver?.(),this.cachedPayload&&this.setDataFast(this.cachedPayload),this.cachedConnections.length&&this.setConnections(this.cachedConnections)}).catch(t=>{console.warn("[globe] Cesium failed to load",t)}),window.addEventListener("resize",()=>this.resize())}resize(){if(this.viewer)try{this.viewer.resize()}catch{}this.resizeParticles()}onCountryClick(e){this.countryClickCb=e}whenReady(){return this.readyPromise}setInteractive(e){if(!this.viewer)return;let t=this.viewer.scene.screenSpaceCameraController;t.enableRotate=e,t.enableZoom=e,t.enableTranslate=e,t.enableTilt=e,t.enableLook=e}setData(e){this.setDataFast(e)}restoreCachedDataIfAny(){this.cachedPayload&&this.setDataFast(this.cachedPayload)}setDataFast(e){if(this.cachedPayload=e,this.countries=e.countries||[],!this.viewer||!this.Cesium)return;let t=this.Cesium;if(this.countriesDataSource)try{this.viewer.dataSources.remove(this.countriesDataSource,!0)}catch{}if(this.labelsDataSource)try{this.viewer.dataSources.remove(this.labelsDataSource,!0)}catch{}let n={type:"FeatureCollection",features:(e.features||[]).map(_=>{let v=_.properties??={},m=_.__id??v.__id??v.id,u=Number(m);return v.__id=Number.isFinite(u)?u:void 0,_})};new t.GeoJsonDataSource("countries").load(n,{clampToGround:!0}).then(_=>{for(let b of _.entities.values){let S=b.properties?.__id?.getValue?.(),E=this.countryFillColor(Number(S));b.polygon&&(b.polygon.material=new t.ColorMaterialProperty(t.Color.fromCssColorString(E)),b.polygon.outline=!0,b.polygon.outlineColor=t.Color.fromCssColorString("rgba(8,22,40,0.65)"),b.polygon.outlineWidth=1.1)}this.countriesDataSource=_,this.viewer.dataSources.add(_);let v=new Map,m=new Map;for(let b of this.countries)if(Number.isFinite(b.id)){let S=Number(b.id);v.set(S,b.name),m.set(S,Number.isFinite(b.labelSize)?Number(b.labelSize):1)}let u=new t.CustomDataSource("country-labels"),y=t.JulianDate.now();for(let b of _.entities.values){let S=Number(b.properties?.__id?.getValue?.()),E=b.properties?.name?.getValue?.()||b.properties?.NAME?.getValue?.(),T=v.get(S)||E;if(!T)continue;let O=m.get(S)??1,z=[b.properties?.LABEL_X?.getValue?.(y),b.properties?.label_x?.getValue?.(y),b.properties?.LABEL_X?.getValue?.(),b.properties?.label_x?.getValue?.()].find(Q=>Number.isFinite(Number(Q)))??null,D=[b.properties?.LABEL_Y?.getValue?.(y),b.properties?.label_y?.getValue?.(y),b.properties?.LABEL_Y?.getValue?.(),b.properties?.label_y?.getValue?.()].find(Q=>Number.isFinite(Number(Q)))??null,F=z==null?NaN:Number(z),B=D==null?NaN:Number(D),W=null;if(Number.isFinite(F)&&Number.isFinite(B))W=t.Cartesian3.fromDegrees(F,B);else{let rt=b.polygon?.hierarchy?.getValue?.(y)?.positions;if(!rt||!rt.length)continue;W=t.BoundingSphere.fromPoints(rt).center}if(!W)continue;let j=O<=.5?7e5:O<=.8?14e5:O<=1.2?26e5:O<=1.8?45e5:8e6,qt=O<=.5?11:O<=.8?12:O<=1.2?14:O<=1.8?16:18;u.entities.add({position:W,label:{text:T,font:`${qt}px "Montserrat", sans-serif`,fillColor:t.Color.fromCssColorString("rgba(252,246,228,0.98)"),outlineColor:t.Color.fromCssColorString("rgba(8,16,24,0.92)"),outlineWidth:4,style:t.LabelStyle.FILL_AND_OUTLINE,showBackground:!0,backgroundColor:t.Color.fromCssColorString("rgba(6,14,24,0.45)"),horizontalOrigin:t.HorizontalOrigin.CENTER,verticalOrigin:t.VerticalOrigin.CENTER,heightReference:t.HeightReference.CLAMP_TO_GROUND,disableDepthTestDistance:Number.POSITIVE_INFINITY,distanceDisplayCondition:new t.DistanceDisplayCondition(0,j),scaleByDistance:new t.NearFarScalar(4e5,1,j,.35),translucencyByDistance:new t.NearFarScalar(4e5,1,j,0)}})}this.labelsDataSource=u,this.viewer.dataSources.add(u)})}setConnections(e){this.cachedConnections=e||[]}setConnectionOnline(e,t){let i=String(e);t?this.onlineConnectionIds.add(i):this.onlineConnectionIds.delete(i)}setConnectionsOnline(e){this.onlineConnectionIds=new globalThis.Set((e||[]).map(t=>String(t)))}setFloatingWords(e){let t=(e||[]).map(n=>String(n||"").trim()).filter(n=>n.length>=3).map(n=>n.slice(0,24)),i=Array.from(new globalThis.Set(t));this.floatingWordPool=i.slice(0,160),this.floatingWords=[]}setFireworkWordGroups(e){let t=(e||[]).map(i=>(i||[]).map(n=>String(n||"").trim()).filter(n=>n.length>=2).map(n=>n.slice(0,24))).filter(i=>i.length>0);if(this.fireworkWordGroups=t.slice(0,160),!this.floatingWordPool.length&&t.length){let i=t.flat();this.floatingWordPool=Array.from(new globalThis.Set(i)).slice(0,160)}}setConnectionsCountryFilter(e){}showAllLabels(){}showFocusLabel(e){}setSoloCountry(e){}selectCountry(e){this.selectedId=e}setViewPadding(e){}resetViewPadding(){}flyTo(e,t,i,n=900){if(!this.viewer||!this.Cesium)return;let r=this.altitudeToHeight(i);this.viewer.camera.flyTo({destination:this.Cesium.Cartesian3.fromDegrees(t,e,r),duration:n/1e3})}resetView(){!this.viewer||!this.Cesium||this.viewer.camera.flyTo({destination:this.Cesium.Cartesian3.fromDegrees(0,20,22e6),duration:.9})}installOverlay(e){getComputedStyle(e).position==="static"&&(e.style.position="relative");let t=document.createElement("canvas");t.style.position="absolute",t.style.inset="0",t.style.pointerEvents="none",t.style.zIndex="4",t.style.opacity="1",t.style.mixBlendMode="normal",e.appendChild(t),this.particleCanvas=t,this.particleCtx=t.getContext("2d",{alpha:!0}),this.resizeParticles()}resizeParticles(){if(!this.particleCanvas||!this.overlayHost)return;let e=this.viewer?.scene?.canvas,t=e?.getBoundingClientRect?.()??this.overlayHost.getBoundingClientRect(),i=Math.min(2,window.devicePixelRatio||1);this.particleScale=i,this.canvasOffsetX=0,this.canvasOffsetY=0,this.hostCssWidth=t.width,this.hostCssHeight=t.height,this.canvasCssWidth=t.width,this.canvasCssHeight=t.height;let n=this.viewer?.scene?.drawingBufferWidth??e?.width??t.width,r=this.viewer?.scene?.drawingBufferHeight??e?.height??t.height;this.drawBufferWidth=n||t.width||1,this.drawBufferHeight=r||t.height||1,this.cssScaleX=this.canvasCssWidth?this.canvasCssWidth/this.drawBufferWidth:1,this.cssScaleY=this.canvasCssHeight?this.canvasCssHeight/this.drawBufferHeight:1,this.particleCanvas.width=Math.floor(t.width*i),this.particleCanvas.height=Math.floor(t.height*i)}startOverlayLoop(){this.raf&&cancelAnimationFrame(this.raf);let e=performance.now(),t=i=>{let n=Math.min(33,i-e);e=i,this.drawOverlay(n,i),this.raf=requestAnimationFrame(t)};this.raf=requestAnimationFrame(t)}drawOverlay(e,t){if(!this.particleCanvas||!this.particleCtx)return;let i=this.particleCtx,n=this.particleCanvas.width,r=this.particleCanvas.height;i.clearRect(0,0,n,r),this.drawProjectiles(i,n,r,e,t)}drawProjectiles(e,t,i,n,r){if(!this.viewer||!this.Cesium)return;let _=this.Cesium,v=new _.EllipsoidalOccluder(this.viewer.scene.globe.ellipsoid,this.viewer.scene.camera.positionWC),m=this.collectVisibleNodes(v,_,t,i);if(!m.length)return;let u=Math.max(2.2,(this.particleScale||1)*1.6);e.fillStyle="rgba(80, 170, 255, 0.95)";for(let y of m)e.beginPath(),e.arc(y.x,y.y,u,0,Math.PI*2),e.fill();this.spawnFirework(m,t,i,r),this.updateFireworks(e,t,i,n)}collectVisibleNodes(e,t,i,n){let r=[],_=this.particleScale||1,v=this.hostCssWidth||i/_,m=this.hostCssHeight||n/_;for(let u of this.cachedConnections){if(r.length>=this.MAX_NETWORK_NODES)break;if(!Number.isFinite(u.lat)||!Number.isFinite(u.lng)||this.onlineConnectionIds.size>0&&!this.onlineConnectionIds.has(String(u.id)))continue;let y=t.Cartesian3.fromDegrees(u.lng,u.lat);if(!e.isPointVisible(y))continue;let b=this.viewer.scene.cartesianToCanvasCoordinates(y);if(!b)continue;let S=b.x*this.cssScaleX,E=b.y*this.cssScaleY,T=S+this.canvasOffsetX,O=E+this.canvasOffsetY;T<-20||O<-20||T>v+20||O>m+20||r.push({x:T*_,y:O*_,id:String(u.id)})}return r}spawnFirework(e,t,i,n){if(!e.length||this.fireworkShots.length>=this.FIREWORK_MAX||n-this.lastFireworkSpawn<this.FIREWORK_SPAWN_INTERVAL)return;let r=e[Math.floor(Math.random()*e.length)],_=t*.5,v=i*.5,m=r.x-_,u=r.y-v,y=Math.atan2(u,m),b=(Math.random()-.5)*.55,S=y+b,E=this.FIREWORK_MIN_SPEED+Math.random()*(this.FIREWORK_MAX_SPEED-this.FIREWORK_MIN_SPEED),T={x:r.x,y:r.y,vx:Math.cos(S)*E,vy:Math.sin(S)*E,life:0,explodeAt:this.FIREWORK_MIN_TIME+Math.random()*(this.FIREWORK_MAX_TIME-this.FIREWORK_MIN_TIME),trail:[],burstWords:null};this.fireworkShots.push(T),this.lastFireworkSpawn=n}updateFireworks(e,t,i,n){if(!this.fireworkShots.length&&!this.fireworkParticles.length)return;let r="rgba(255,255,255,0.45)",_="rgba(255,255,255,0.85)",v=Math.max(1,(this.particleScale||1)*.7);e.lineWidth=v;let m=[];for(let u of this.fireworkShots){if(!u.burstWords){u.life+=n,u.x+=u.vx*n,u.y+=u.vy*n,u.trail.push({x:u.x,y:u.y}),u.trail.length>this.FIREWORK_TRAIL&&u.trail.shift(),e.strokeStyle=r,e.beginPath();for(let y=0;y<u.trail.length;y+=1){let b=u.trail[y];y===0?e.moveTo(b.x,b.y):e.lineTo(b.x,b.y)}if(e.stroke(),e.fillStyle=_,e.beginPath(),e.arc(u.x,u.y,Math.max(1.6,(this.particleScale||1)*.9),0,Math.PI*2),e.fill(),u.life>=u.explodeAt){let y=this.pickFireworkGroup(),S=[...y.length?y:[]].sort(()=>Math.random()-.5),E=Math.min(8,S.length),T=[];if(E>0){let O=Math.atan2(u.vy,u.vx),z=Math.PI/4,D=E>1?z*2/(E-1):0;for(let F=0;F<E;F+=1){let B=E>1?-z+D*F:0,W=O+B+(Math.random()-.5)*.1,j=.04+Math.random()*.1;T.push({text:S[F],x:u.x,y:u.y,life:0,ttl:1300+Math.random()*700,size:12+Math.random()*8,vx:Math.cos(W)*j,vy:Math.sin(W)*j})}u.burstWords=T}}}if(u.burstWords){let y=[];for(let b of u.burstWords){b.life+=n,b.x+=b.vx*n,b.y+=b.vy*n;let S=Math.min(1,b.life/b.ttl),E=1-S,T=b.size+S*6;if(e.font=`${T}px "Montserrat", sans-serif`,e.fillStyle=`rgba(255,255,255,${.75*E})`,e.textAlign="center",e.textBaseline="middle",e.fillText(b.text,b.x,b.y),b.life<b.ttl)y.push(b);else{let O=Math.atan2(b.vy,b.vx),z=8+Math.floor(Math.random()*8);for(let D=0;D<z;D+=1){let F=(Math.random()-.5)*Math.PI*.6,B=.03+Math.random()*.08;this.fireworkParticles.push({x:b.x,y:b.y,vx:Math.cos(O+F)*B,vy:Math.sin(O+F)*B,life:0,ttl:650+Math.random()*650,size:1.2+Math.random()*1.8})}}}y.length&&(u.burstWords=y,m.push(u))}else u.life<u.explodeAt&&m.push(u)}if(this.fireworkShots=m,this.fireworkParticles.length){let u=[];for(let y of this.fireworkParticles){y.life+=n,y.x+=y.vx*n,y.y+=y.vy*n;let S=1-Math.min(1,y.life/y.ttl);e.fillStyle=`rgba(255,255,255,${.7*S})`,e.beginPath(),e.arc(y.x,y.y,y.size,0,Math.PI*2),e.fill(),y.life<y.ttl&&u.push(y)}this.fireworkParticles=u}}pickFireworkWord(){return this.floatingWordPool.length?this.floatingWordPool[Math.floor(Math.random()*this.floatingWordPool.length)]:""}pickFireworkGroup(){if(this.fireworkWordGroups.length)return this.fireworkWordGroups[Math.floor(Math.random()*this.fireworkWordGroups.length)];if(!this.floatingWordPool.length)return[];let e=Math.min(8,Math.max(2,Math.floor(3+Math.random()*4))),t=[];for(let i=0;i<e;i+=1)t.push(this.pickFireworkWord());return t.filter(Boolean)}drawFloatingWords(e,t,i,n){}seedFloatingWords(e,t){let i=this.floatingWordPool;if(!i.length){this.floatingWords=[];return}let n=Math.min(this.FLOATING_WORD_COUNT,i.length);this.floatingWords=[];for(let r=0;r<n;r+=1){let _=i[Math.floor(Math.random()*i.length)];this.floatingWords.push({text:_,x:Math.random()*e,y:Math.random()*t,vx:(Math.random()-.5)*.02,vy:(Math.random()-.5)*.02,alpha:.16+Math.random()*.18,size:11+Math.random()*10})}}altitudeToHeight(e){return!Number.isFinite(e)||e<=0?8e6:Math.max(9e5,Math.min(4e7,8e6/e))}countryFillColor(e){let t=["#7E9E5B","#A7BFA5","#C8B87A","#D1A76C","#7FA3B8","#5F8E8E","#B48B6A","#8C9C8C"],i=Number.isFinite(e)?Math.abs(e)%t.length:0;return t[i]}installClickHandler(){if(!this.viewer||!this.Cesium)return;let e=this.Cesium;new e.ScreenSpaceEventHandler(this.viewer.scene.canvas).setInputAction(i=>{let n=this.viewer.scene.pick(i.position),r=n?.id?.properties?.__id?.getValue?.()??n?.id?.properties?.__id,_=Number(r);if(!Number.isFinite(_))return;let v=this.countries.find(m=>m.id===_);v&&(this.selectCountry(v.id),this.countryClickCb?this.countryClickCb(v):this.flyTo(v.center.lat,v.center.lng,v.flyAltitude??1,900))},e.ScreenSpaceEventType.LEFT_CLICK)}ensureCesium(){let e=window;return e.Cesium?Promise.resolve(e.Cesium):new Promise((t,i)=>{e.CESIUM_BASE_URL="https://unpkg.com/cesium@1.116.0/Build/Cesium/";let n="cesium-widgets-css";if(!document.getElementById(n)){let v=document.createElement("link");v.id=n,v.rel="stylesheet",v.href="https://unpkg.com/cesium@1.116.0/Build/Cesium/Widgets/widgets.css",document.head.appendChild(v)}let r="cesium-lib";if(document.getElementById(r)){let v=window.Cesium;v&&t(v);return}let _=document.createElement("script");_.id=r,_.src="https://unpkg.com/cesium@1.116.0/Build/Cesium/Cesium.js",_.async=!0,_.onload=()=>t(window.Cesium),_.onerror=()=>i(new Error("Failed to load Cesium")),document.head.appendChild(_)})}static \u0275fac=function(t){return new(t||o)};static \u0275prov=Y({token:o,factory:o.\u0275fac,providedIn:"root"})};var nt=class o{labelMode="all";selectedCountryId=null;countries=[];setCountries(e){this.countries=e||[]}setSelected(e){this.selectedCountryId=e}setMode(e){this.labelMode=e}static \u0275fac=function(t){return new(t||o)};static \u0275prov=Y({token:o,factory:o.\u0275fac,providedIn:"root"})};var ot=class o{normalizeName(e){return(e||"").trim().toLowerCase().replace(/\s+/g," ").replace(/[â€™']/g,"").replace(/[^a-z0-9 ]/g,"")}prefixSuggest(e,t,i=8){let n=this.normalizeName(t);if(!n)return[];let r=[];for(let _ of e)if(_.norm.startsWith(n)&&r.push(_),r.length>=i)break;return r}bestCandidateForSearch(e,t,i,n){let r=(t||"").trim();if(!r)return null;if(i.length){let v=n>=0?n:0;return i[v]||null}let _=this.normalizeName(r);return e.find(v=>v.norm===_)||null}static \u0275fac=function(t){return new(t||o)};static \u0275prov=Y({token:o,factory:o.\u0275fac,providedIn:"root"})};var Zt=(o,e,t)=>({posts:o,loading:e,error:t,empty:"No posts yet."}),Jt=(o,e,t)=>({posts:o,loading:e,error:t,empty:"No followed posts yet."}),Qt=()=>[],te=(o,e,t)=>({posts:o,loading:e,error:t,empty:"No media posts yet."});function ee(o,e){if(o&1){let t=P();l(0,"div",25),x("click",function(){let n=g(t).$implicit,r=s(4);return f(r.focusCountry(n))})("keyup.enter",function(){let n=g(t).$implicit,r=s(4);return f(r.focusCountry(n))}),l(1,"span"),p(2),c(),l(3,"small"),p(4),c()()}if(o&2){let t=e.$implicit;a(2),C(t.name),a(2),C(t.code||t.name)}}function ie(o,e){if(o&1&&(l(0,"div",23),h(1,ee,5,2,"div",24),c()),o&2){let t=s(3);a(),d("ngForOf",t.countrySuggestions)}}function ne(o,e){if(o&1){let t=P();l(0,"div",20)(1,"input",21),L("ngModelChange",function(n){g(t);let r=s(2);return A(r.searchInputValue,n)||(r.searchInputValue=n),f(n)}),x("keydown",function(n){g(t);let r=s(2);return f(r.handleSearchKeydown(n))}),c(),h(2,ie,2,1,"div",22),c()}if(o&2){let t=s(2);a(),N("ngModel",t.searchInputValue),a(),d("ngIf",t.countrySuggestions.length)}}function oe(o,e){if(o&1){let t=P();l(0,"div",16),x("click",function(n){return g(t),f(n.stopPropagation())}),l(1,"div",17)(2,"div",18),p(3,"Travel to a country"),c(),h(4,ne,3,2,"div",19),c()()}if(o&2){let t=s();M("search-open",t.searchOpen),a(4),d("ngIf",t.searchOpen)}}function re(o,e){if(o&1){let t=P();l(0,"button",26),x("click",function(){g(t);let n=s();return f(n.returnToGlobe())}),k(1,"img",27),c()}}function ae(o,e){o&1&&(l(0,"div",28),k(1,"div",29),c())}function se(o,e){if(o&1){let t=P();l(0,"button",49),x("click",function(){g(t);let n=s(2);return f(n.returnToGlobe())}),p(1," Return to globe "),c()}}function le(o,e){if(o&1&&(l(0,"span",50),p(1),c()),o&2){let t=s(2);a(),w("(",t.clockLabel,")")}}function ce(o,e){if(o&1&&(l(0,"option",51),p(1),c()),o&2){let t=e.$implicit;d("value",t.code),a(),C(t.name)}}function de(o,e){if(o&1&&k(0,"img",71),o&2){let t=s(4);d("src",t.profileAvatar,U)}}function pe(o,e){if(o&1&&(l(0,"div",72),p(1),c()),o&2){let t=s(4);a(),w(" ",t.composerInitial," ")}}function _e(o,e){o&1&&(l(0,"div",73),p(1," What is happening where you are? Add your experience to the collective. "),c())}function ue(o,e){if(o&1&&(l(0,"div",73),p(1),c()),o&2){let t=s(4);a(),w(" Posts publish to ",t.effectiveCountryName,". Switch to the country where you post from to post. ")}}function me(o,e){if(o&1){let t=P();l(0,"button",74),x("click",function(){g(t);let n=s(4);return n.composerOpen=!1,f(n.clearComposerMedia())}),p(1," Cancel "),c()}}function ge(o,e){if(o&1){let t=P();l(0,"button",75),x("click",function(){g(t);let n=s(4);return f(n.goToMyCountry())}),p(1," GO TO MY COUNTRY "),c()}}function fe(o,e){if(o&1){let t=P();l(0,"button",76),x("click",function(){g(t);let n=s(4);return f(n.composerOpen=!0)}),p(1),c()}if(o&2){let t=s(4);a(),w(" What's happening in ",t.selectedCountry.name,"? ")}}function he(o,e){if(o&1&&(l(0,"div",77),p(1),c()),o&2){let t=s(4);a(),w(" You can read posts in ",t.selectedCountry.name,", but only share to the country where you are located. ")}}function ve(o,e){if(o&1){let t=P();l(0,"button",89),x("click",function(){g(t);let n=s(5);return f(n.clearComposerMedia())}),p(1," Remove "),c()}}function xe(o,e){if(o&1&&(l(0,"span"),p(1),c()),o&2){let t=s(6);a(),w(" +",t.composerMediaFiles.length-1)}}function be(o,e){if(o&1&&(l(0,"span",90),p(1),h(2,xe,2,1,"span",69),c()),o&2){let t=s(5);a(),w(" ",t.composerMediaFiles[0]==null?null:t.composerMediaFiles[0].name),a(),d("ngIf",t.composerMediaFiles.length>1)}}function ye(o,e){if(o&1&&(l(0,"div",91),p(1),c()),o&2){let t=s(5);a(),w(" ",t.composerMediaError," ")}}function Ce(o,e){if(o&1&&k(0,"img",98),o&2){let t=s().$implicit;d("src",t,U)}}function Pe(o,e){if(o&1&&k(0,"video",99),o&2){let t=s().$implicit;d("src",t,U)}}function we(o,e){if(o&1&&(l(0,"div",95),h(1,Ce,1,1,"img",96)(2,Pe,1,1,"video",97),c()),o&2){let t=e.index,i=s(6);a(),d("ngIf",i.composerMediaTypes[t]==="image"),a(),d("ngIf",i.composerMediaTypes[t]==="video")}}function Se(o,e){if(o&1&&(l(0,"div",92)(1,"div",93),h(2,we,3,2,"div",94),c()()),o&2){let t=s(5);a(),M("single",t.composerMediaPreviews.length===1),a(),d("ngForOf",t.composerMediaPreviews)}}function Me(o,e){if(o&1){let t=P();V(0),l(1,"input",78),L("ngModelChange",function(n){g(t);let r=s(4);return A(r.newPostTitle,n)||(r.newPostTitle=n),f(n)}),c(),l(2,"textarea",79),L("ngModelChange",function(n){g(t);let r=s(4);return A(r.newPostBody,n)||(r.newPostBody=n),f(n)}),c(),l(3,"div",80)(4,"input",81,1),x("change",function(n){g(t);let r=s(4);return f(r.onComposerMediaSelect(n))}),c(),l(6,"div",82)(7,"button",83),x("click",function(){g(t);let n=s(4);return f(n.setComposerMediaMode("post"))}),p(8," Post "),c(),l(9,"button",83),x("click",function(){g(t);let n=s(4);return f(n.setComposerMediaMode("video"))}),p(10," Video "),c(),l(11,"button",83),x("click",function(){g(t);let n=s(4);return f(n.setComposerMediaMode("reel"))}),p(12," Reel "),c()(),l(13,"div",84)(14,"button",75),x("click",function(){g(t);let n=$(5);return f(n.click())}),p(15," Add media "),c(),h(16,ve,2,0,"button",85),c(),h(17,be,3,2,"span",86),c(),h(18,ye,2,1,"div",87)(19,Se,3,3,"div",88),G()}if(o&2){let t=s(4);a(),N("ngModel",t.newPostTitle),a(),d("placeholder",dt("Share a story from ",t.effectiveCountryName,"...")),N("ngModel",t.newPostBody),a(2),at("accept",t.composerMediaMode==="video"||t.composerMediaMode==="reel"?"video/*":"image/*,video/*")("multiple",t.composerMediaMode==="reel"?null:""),a(3),M("active",t.composerMediaMode==="post"),a(2),M("active",t.composerMediaMode==="video"),a(2),M("active",t.composerMediaMode==="reel"),a(5),d("ngIf",t.composerMediaFiles.length),a(),d("ngIf",t.composerMediaFiles.length),a(),d("ngIf",t.composerMediaError),a(),d("ngIf",t.composerMediaPreviews.length)}}function ke(o,e){if(o&1&&(l(0,"div",103),p(1),c()),o&2){let t=s(5);M("error",!!t.postComposerError),a(),w(" ",t.postComposerError||t.postFeedback," ")}}function Ie(o,e){if(o&1){let t=P();l(0,"div",100)(1,"button",101),x("click",function(){g(t);let n=s(4);return f(n.submitPost())}),p(2),c(),h(3,ke,2,3,"div",102),c()}if(o&2){let t=s(4);a(),d("disabled",t.postBusy||!t.canPostHere),a(),w(" ",t.postBusy?"Posting...":"Post"," "),a(),d("ngIf",t.postComposerError||t.postFeedback)}}function Ee(o,e){if(o&1&&(l(0,"div",55)(1,"div",56)(2,"div",57),h(3,de,1,1,"img",58)(4,pe,2,1,"div",59),c(),l(5,"div",60)(6,"div",61)(7,"div")(8,"div",62),p(9),c(),h(10,_e,2,0,"div",63)(11,ue,2,1,"div",63),c(),l(12,"div",64),h(13,me,2,0,"button",65)(14,ge,2,0,"button",66),c()(),h(15,fe,2,1,"button",67)(16,he,2,1,"div",68)(17,Me,20,16,"ng-container",69),c()(),h(18,Ie,4,3,"div",70),c()),o&2){let t=s(3);a(3),d("ngIf",t.profileAvatar),a(),d("ngIf",!t.profileAvatar),a(5),w("Share with ",t.selectedCountry.name),a(),d("ngIf",t.canPostHere),a(),d("ngIf",!t.canPostHere),a(2),d("ngIf",t.canPostHere&&t.composerOpen),a(),d("ngIf",!t.canPostHere),a(),d("ngIf",t.canPostHere&&!t.composerOpen),a(),d("ngIf",!t.canPostHere),a(),d("ngIf",t.composerOpen&&t.canPostHere),a(),d("ngIf",t.composerOpen&&t.canPostHere)}}function Oe(o,e){o&1&&tt(0)}function Te(o,e){if(o&1&&(l(0,"div",52),h(1,Ee,19,11,"div",53)(2,Oe,1,0,"ng-container",54),c()),o&2){s();let t=$(30),i=s();a(),d("ngIf",i.profile&&i.selectedCountry),a(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",et(3,Zt,i.visiblePosts,i.postsLoading,i.postsError))}}function Ue(o,e){o&1&&tt(0)}function Fe(o,e){if(o&1&&(l(0,"div",52)(1,"div",104),p(2,"Posts from people you follow (not tied to a country)."),c(),h(3,Ue,1,0,"ng-container",54),c()),o&2){s();let t=$(30),i=s();a(3),d("ngTemplateOutlet",t)("ngTemplateOutletContext",et(2,Jt,i.visibleFollowingPosts,i.followingLoading,i.followingError))}}function Re(o,e){o&1&&(l(0,"div",108),p(1,"Loading posts..."),c())}function Ve(o,e){if(o&1&&(l(0,"div",109),p(1),c()),o&2){let t=s().error;a(),C(t)}}function Ge(o,e){if(o&1&&(l(0,"div",114),p(1),c()),o&2){let t=s(2).empty;a(),C(t)}}function Ne(o,e){if(o&1&&k(0,"img",136),o&2){let t=s().$implicit;d("src",t.author==null?null:t.author.avatar_url,U)}}function Ae(o,e){if(o&1&&(l(0,"div",137),p(1),c()),o&2){let t=s().$implicit;a(),w(" ",((t.author==null?null:t.author.display_name)||(t.author==null?null:t.author.username)||"User").slice(0,2).toUpperCase()," ")}}function Le(o,e){if(o&1&&(l(0,"span",138),p(1),c()),o&2){let t=s().$implicit,i=s(4);a(),w(" - ",i.visibilityLabel(t.visibility)," ")}}function ze(o,e){if(o&1){let t=P();l(0,"button",139),x("click",function(){g(t);let n=s().$implicit,r=s(4);return f(r.toggleFollowAuthor(n.author_id))}),p(1),c()}if(o&2){let t=s().$implicit,i=s(4);M("following",i.isFollowingAuthor(t.author_id)),d("disabled",i.followBusyFor(t.author_id)),a(),w(" ",i.isFollowingAuthor(t.author_id)?"Following":"Follow"," ")}}function De(o,e){if(o&1){let t=P();l(0,"div",149)(1,"div",150),p(2,"Delete this post?"),c(),l(3,"div",151)(4,"button",152),x("click",function(){g(t);let n=s(8);return f(n.cancelPostDelete())}),p(5,"Cancel"),c(),l(6,"button",147),x("click",function(){g(t);let n=s(4).$implicit,r=s(4);return f(r.deletePost(n))}),p(7,"Delete"),c()()()}}function Be(o,e){if(o&1){let t=P();V(0),l(1,"button",146),x("click",function(){g(t);let n=s(3).$implicit,r=s(4);return f(r.startPostEdit(n))}),p(2,"Edit"),c(),l(3,"button",146),x("click",function(){g(t);let n=s(3).$implicit,r=s(4);return f(r.startPostEdit(n))}),p(4,"Privacy"),c(),l(5,"button",147),x("click",function(){g(t);let n=s(3).$implicit,r=s(4);return f(r.requestPostDelete(n))}),p(6,"Delete"),c(),h(7,De,8,0,"div",148),G()}if(o&2){let t=s(3).$implicit,i=s(4);a(7),d("ngIf",i.confirmDeletePostId===t.id)}}function We(o,e){if(o&1&&(l(0,"div",159),p(1),c()),o&2){let t=s(9);a(),C(t.reportError)}}function $e(o,e){if(o&1&&(l(0,"div",160),p(1),c()),o&2){let t=s(9);a(),C(t.reportFeedback)}}function He(o,e){if(o&1){let t=P();l(0,"div",154)(1,"textarea",155),L("ngModelChange",function(n){g(t);let r=s(8);return A(r.reportReason,n)||(r.reportReason=n),f(n)}),c(),l(2,"div",151)(3,"button",152),x("click",function(){g(t);let n=s(8);return f(n.cancelReport())}),p(4,"Cancel"),c(),l(5,"button",156),x("click",function(){g(t);let n=s(4).$implicit,r=s(4);return f(r.submitReport(n))}),p(6),c()(),h(7,We,2,1,"div",157)(8,$e,2,1,"div",158),c()}if(o&2){let t=s(8);a(),N("ngModel",t.reportReason),a(4),d("disabled",t.reportBusy),a(),w(" ",t.reportBusy?"Sending...":"Send report"," "),a(),d("ngIf",t.reportError),a(),d("ngIf",t.reportFeedback)}}function je(o,e){if(o&1){let t=P();l(0,"button",146),x("click",function(){g(t);let n=s(3).$implicit,r=s(4);return f(r.toggleReport(n.id))}),p(1,"Report"),c(),h(2,He,9,5,"div",153)}if(o&2){let t=s(3).$implicit,i=s(4);a(2),d("ngIf",i.reportingPostId===t.id)}}function qe(o,e){if(o&1&&(l(0,"div",144),h(1,Be,8,1,"ng-container",145)(2,je,3,1,"ng-template",null,2,J),c()),o&2){let t=$(3),i=s(2).$implicit,n=s(4);a(),d("ngIf",n.isAuthorSelf(i.author_id))("ngIfElse",t)}}function Ye(o,e){if(o&1){let t=P();l(0,"div",140),x("click",function(n){return g(t),f(n.stopPropagation())}),l(1,"span",141),p(2),c(),l(3,"button",142),x("click",function(n){g(t);let r=s().$implicit,_=s(4);return f(_.togglePostMenu(r.id,n))}),p(4," ... "),c(),h(5,qe,4,2,"div",143),c()}if(o&2){let t=s().$implicit,i=s(4);a(2),C(i.visibilityIcon(t.visibility)),a(3),d("ngIf",i.openPostMenuId===t.id)}}function Xe(o,e){if(o&1&&(l(0,"div",164),p(1),c()),o&2){let t=s(2).$implicit;a(),C(t.title)}}function Ke(o,e){if(o&1){let t=P();l(0,"button",167),x("click",function(n){g(t);let r=s(3).$implicit,_=s(4);return f(_.togglePostExpanded(r.id,n))}),p(1," See more "),c()}}function Ze(o,e){if(o&1){let t=P();l(0,"p",165),x("click",function(n){g(t);let r=s(2).$implicit,_=s(4);return f(_.onPostTextClick(r.id,n))}),l(1,"span"),p(2),c(),h(3,Ke,2,0,"button",166),c()}if(o&2){let t=s(2).$implicit,i=s(4);M("clamped",!i.isPostExpanded(t.id)&&i.isTextExpandable(t.body)),a(2),C(i.isPostExpanded(t.id)?t.body:i.postPreview(t.body)),a(),d("ngIf",!i.isPostExpanded(t.id)&&i.isTextExpandable(t.body))}}function Je(o,e){if(o&1&&(l(0,"div",161),h(1,Xe,2,1,"div",162)(2,Ze,4,4,"p",163),c()),o&2){let t=s().$implicit,i=s(4);a(),d("ngIf",t.title),a(),d("ngIf",t.body&&(!t.media_url||t.media_type==="none"||!i.postHasVideo(t)))}}function Qe(o,e){if(o&1&&k(0,"img",136),o&2){let t=s().ngIf;d("src",t.author==null?null:t.author.avatar_url,U)}}function ti(o,e){if(o&1&&(l(0,"div",180),p(1),c()),o&2){let t=s().ngIf;a(),w(" ",((t.author==null?null:t.author.display_name)||(t.author==null?null:t.author.username)||"User").slice(0,2).toUpperCase()," ")}}function ei(o,e){if(o&1&&(l(0,"span"),p(1),c()),o&2){let t=s().ngIf;a(),w(" - ",t.country_name||t.country_code)}}function ii(o,e){if(o&1&&(l(0,"div",181),p(1),c()),o&2){let t=s().ngIf;a(),C(t.title)}}function ni(o,e){if(o&1&&(l(0,"div",182),p(1),c()),o&2){let t=s().ngIf,i=s(5);a(),C(i.postPreview(t.body))}}function oi(o,e){if(o&1&&k(0,"img",186),o&2){let t=s(2).ngIf;d("src",t[0],U)}}function ri(o,e){if(o&1&&k(0,"img",190),o&2){let t=s(5).ngIf;d("src",t.thumb_url,U)}}function ai(o,e){if(o&1&&(l(0,"div",187),h(1,ri,1,1,"img",188),l(2,"div",189),p(3,"Video"),c()()),o&2){let t=s(4).ngIf;a(),d("ngIf",t.thumb_url)}}function si(o,e){if(o&1&&(V(0),h(1,oi,1,1,"img",184)(2,ai,4,1,"div",185),G()),o&2){let t=e.ngIf;a(),d("ngIf",t[0]==="image"),a(),d("ngIf",t[0]==="video")}}function li(o,e){if(o&1&&(V(0),h(1,si,3,2,"ng-container",69),G()),o&2){let t=s(2).ngIf,i=s(5);a(),d("ngIf",i.postMediaTypes(t))}}function ci(o,e){if(o&1&&(l(0,"div",183),h(1,li,2,1,"ng-container",69),c()),o&2){let t=s().ngIf,i=s(5);a(),d("ngIf",i.postMediaUrls(t))}}function di(o,e){if(o&1){let t=P();l(0,"div",168)(1,"div",169),p(2,"Shared post"),c(),l(3,"div",170),x("click",function(n){let r=g(t).ngIf,_=s(5);return f(_.openSharedPost(r,n))})("keyup.enter",function(n){let r=g(t).ngIf,_=s(5);return f(_.openSharedPost(r,n))}),l(4,"div",171)(5,"div",172),h(6,Qe,1,1,"img",119)(7,ti,2,1,"div",173),c(),l(8,"div",174)(9,"div",175),p(10),c(),l(11,"div",176),p(12),K(13,"date"),h(14,ei,2,1,"span",69),c()()(),h(15,ii,2,1,"div",177)(16,ni,2,1,"div",178)(17,ci,2,1,"div",179),c()()}if(o&2){let t=e.ngIf;a(6),d("ngIf",t.author==null?null:t.author.avatar_url),a(),d("ngIf",!(t.author!=null&&t.author.avatar_url)),a(3),C((t.author==null?null:t.author.display_name)||(t.author==null?null:t.author.username)||"Member"),a(2),X(" @",(t.author==null?null:t.author.username)||"user"," - ",Z(13,9,t.created_at,"mediumDate")," "),a(2),d("ngIf",t.country_name||t.country_code),a(),d("ngIf",t.title),a(),d("ngIf",t.body),a(),d("ngIf",t.media_url&&t.media_type!=="none")}}function pi(o,e){if(o&1){let t=P();l(0,"img",194),x("click",function(n){g(t);let r=s(3).ngIf;return s(6).openImageLightbox(r[0]),f(n.stopPropagation())}),c()}if(o&2){let t=s(3).ngIf;d("src",t[0],U)}}function _i(o,e){if(o&1){let t=P();l(0,"app-video-player",195),x("viewed",function(){g(t);let n=s(5).$implicit,r=s(4);return f(r.recordView(n))})("videoTap",function(){g(t);let n=s(5).$implicit,r=s(4);return f(r.onPostVideoTap(n))}),c()}if(o&2){let t=s(3).ngIf,i=s(2).$implicit,n=s(4);d("src",t[0])("tapBehavior",n.postIsReel(i)?"emit":"toggle")}}function ui(o,e){if(o&1&&(V(0),h(1,pi,1,1,"img",192)(2,_i,1,2,"app-video-player",193),G()),o&2){let t=s().ngIf;a(),d("ngIf",t[0]==="image"),a(),d("ngIf",t[0]==="video")}}function mi(o,e){if(o&1){let t=P();l(0,"app-video-player",195),x("viewed",function(){g(t);let n=s(6).$implicit,r=s(4);return f(r.recordView(n))})("videoTap",function(){g(t);let n=s(6).$implicit,r=s(4);return f(r.onPostVideoTap(n))}),c()}if(o&2){let t=s().$implicit,i=s(5).$implicit,n=s(4);d("src",t)("tapBehavior",n.postIsReel(i)?"emit":"toggle")}}function gi(o,e){if(o&1){let t=P();l(0,"img",194),x("click",function(n){g(t);let r=s().$implicit;return s(9).openImageLightbox(r),f(n.stopPropagation())}),c()}if(o&2){let t=s().$implicit;d("src",t,U)}}function fi(o,e){if(o&1&&(l(0,"div",202),h(1,mi,1,2,"app-video-player",193)(2,gi,1,1,"img",192),c()),o&2){let t=e.index,i=s(2).ngIf;a(),d("ngIf",i[t]==="video"),a(),d("ngIf",i[t]==="image")}}function hi(o,e){if(o&1&&k(0,"span"),o&2){let t=e.index,i=s(5).$implicit,n=s(4);M("active",t===n.postMediaIndexValue(i))}}function vi(o,e){if(o&1){let t=P();l(0,"div",196)(1,"div",197),x("scroll",function(n){g(t);let r=s(4).$implicit,_=s(4);return f(_.onPostMediaScroll(r,n))}),h(2,fi,3,2,"div",198),c(),l(3,"div",199),h(4,hi,1,2,"span",200),l(5,"span",201),p(6),c()()()}if(o&2){let t=s(2).ngIf,i=s(2).$implicit,n=s(4);a(2),d("ngForOf",t),a(2),d("ngForOf",t),a(2),X("",n.postMediaIndexValue(i)+1,"/",t.length)}}function xi(o,e){if(o&1&&(V(0),h(1,ui,3,2,"ng-container",145)(2,vi,7,4,"ng-template",null,3,J),G()),o&2){let t=$(3),i=s().ngIf;a(),d("ngIf",i.length<=1)("ngIfElse",t)}}function bi(o,e){if(o&1&&(V(0),h(1,xi,4,2,"ng-container",69),G()),o&2){let t=s(2).$implicit,i=s(4);a(),d("ngIf",i.postMediaTypes(t))}}function yi(o,e){if(o&1&&(l(0,"div",191),h(1,bi,2,1,"ng-container",69),c()),o&2){let t=s().$implicit,i=s(4);a(),d("ngIf",i.postMediaUrls(t))}}function Ci(o,e){if(o&1){let t=P();l(0,"button",167),x("click",function(n){g(t);let r=s(2).$implicit,_=s(4);return f(_.togglePostExpanded(r.id,n))}),p(1," See more "),c()}}function Pi(o,e){if(o&1){let t=P();l(0,"div",203),x("click",function(n){g(t);let r=s().$implicit,_=s(4);return f(_.onPostTextClick(r.id,n))}),l(1,"span"),p(2),c(),h(3,Ci,2,0,"button",166),c()}if(o&2){let t=e.ngIf,i=s().$implicit,n=s(4);M("clamped",!n.isPostExpanded(i.id)&&n.isTextExpandable(t)),a(2),C(n.isPostExpanded(i.id)?t:n.postPreview(t)),a(),d("ngIf",!n.isPostExpanded(i.id)&&n.isTextExpandable(t))}}function wi(o,e){if(o&1&&(l(0,"span",214),p(1),c()),o&2){let t=s(2).$implicit,i=s(4);a(),w(" ",i.postShareFeedback[t.id]," ")}}function Si(o,e){if(o&1){let t=P();l(0,"div",204)(1,"div",205)(2,"button",206),x("click",function(){g(t);let n=s().$implicit,r=s(4);return f(r.togglePostLike(n))}),l(3,"span",207),p(4),c()(),l(5,"button",208),x("click",function(){g(t);let n=s().$implicit,r=s(4);return f(r.toggleLikes(n.id))}),l(6,"span",209),p(7),c()()(),l(8,"button",210),x("click",function(){g(t);let n=s().$implicit,r=s(4);return f(r.toggleComments(n.id))}),l(9,"span",207),p(10),c(),l(11,"span",209),p(12),c()(),l(13,"button",211),x("click",function(n){g(t);let r=s().$implicit,_=s(4);return f(_.sharePostToCountry(r,n))}),l(14,"span",207),p(15),c()(),h(16,wi,2,1,"span",212),l(17,"div",213)(18,"span",207),p(19),c(),l(20,"span",209),p(21),c()()()}if(o&2){let t=s().$implicit,i=s(4);a(2),M("active",t.liked_by_me),d("disabled",i.likeBusy[t.id]),a(2),C(t.liked_by_me?"\u2665":"\u2661"),a(),M("active",i.likeOpen[t.id]),a(2),C(t.like_count),a(),M("active",i.commentOpen[t.id]),a(2),C("\u{1F4AC}"),a(2),C(t.comment_count),a(3),C("\u{1F517}"),a(),d("ngIf",i.postShareFeedback[t.id]),a(3),C("\u{1F441}"),a(2),C(t.view_count)}}function Mi(o,e){if(o&1&&(l(0,"div",215),p(1),c()),o&2){let t=s().$implicit,i=s(4);a(),w(" ",i.postActionError[t.id]," ")}}function ki(o,e){o&1&&(l(0,"div",220),p(1,"Loading likes..."),c())}function Ii(o,e){if(o&1&&(l(0,"div",221),p(1),c()),o&2){let t=s(2).$implicit,i=s(4);a(),C(i.likeErrors[t.id])}}function Ei(o,e){o&1&&(l(0,"div",225),p(1,"No likes yet."),c())}function Oi(o,e){if(o&1&&k(0,"img",136),o&2){let t=s().$implicit;d("src",t.user==null?null:t.user.avatar_url,U)}}function Ti(o,e){if(o&1&&(l(0,"div",233),p(1),c()),o&2){let t=s().$implicit;a(),w(" ",((t.user==null?null:t.user.display_name)||(t.user==null?null:t.user.username)||"U").slice(0,2).toUpperCase()," ")}}function Ui(o,e){if(o&1){let t=P();l(0,"button",226),x("click",function(n){let r=g(t).$implicit;return s(7).openAuthorProfile(r.user),f(n.stopPropagation())}),l(1,"div",227),h(2,Oi,1,1,"img",119)(3,Ti,2,1,"div",228),c(),l(4,"div",229)(5,"div",230),p(6),c(),l(7,"div",231),p(8),c()(),l(9,"div",232),p(10),K(11,"date"),c()()}if(o&2){let t=e.$implicit;a(2),d("ngIf",t.user==null?null:t.user.avatar_url),a(),d("ngIf",!(t.user!=null&&t.user.avatar_url)),a(3),C((t.user==null?null:t.user.display_name)||(t.user==null?null:t.user.username)||"Member"),a(2),w("@",(t.user==null?null:t.user.username)||"user"),a(2),C(Z(11,5,t.created_at,"mediumDate"))}}function Fi(o,e){if(o&1&&(l(0,"div",222),h(1,Ei,2,0,"div",223)(2,Ui,12,8,"button",224),c()),o&2){let t=s(2).$implicit,i=s(4);a(),d("ngIf",!(i.likeItems[t.id]!=null&&i.likeItems[t.id].length)),a(),d("ngForOf",i.likeItems[t.id])}}function Ri(o,e){if(o&1&&(l(0,"div",216),h(1,ki,2,0,"div",217)(2,Ii,2,1,"div",218)(3,Fi,3,2,"div",219),c()),o&2){let t=s().$implicit,i=s(4);a(),d("ngIf",i.likeLoading[t.id]),a(),d("ngIf",i.likeErrors[t.id]),a(),d("ngIf",!i.likeLoading[t.id]&&!i.likeErrors[t.id])}}function Vi(o,e){o&1&&(l(0,"div",239),p(1,"Loading comments..."),c())}function Gi(o,e){if(o&1&&(l(0,"div",240),p(1),c()),o&2){let t=s(2).$implicit,i=s(4);a(),C(i.commentErrors[t.id])}}function Ni(o,e){o&1&&(l(0,"div",244),p(1,"No comments yet."),c())}function Ai(o,e){if(o&1&&k(0,"img",136),o&2){let t=s().$implicit;d("src",t.author==null?null:t.author.avatar_url,U)}}function Li(o,e){if(o&1&&(l(0,"div",258),p(1),c()),o&2){let t=s().$implicit;a(),w(" ",((t.author==null?null:t.author.display_name)||(t.author==null?null:t.author.username)||"U").slice(0,2).toUpperCase()," ")}}function zi(o,e){o&1&&(l(0,"span",259),p(1,"\u2661"),c())}function Di(o,e){o&1&&(l(0,"span",260),p(1,"\u2665"),c())}function Bi(o,e){if(o&1&&(l(0,"span",261),p(1),c()),o&2){let t=s().$implicit;a(),w(" ",t.like_count," ")}}function Wi(o,e){if(o&1){let t=P();l(0,"div",245)(1,"div",246),h(2,Ai,1,1,"img",119)(3,Li,2,1,"div",247),c(),l(4,"div",248)(5,"div",249)(6,"span",250),p(7),c(),l(8,"span",251),p(9),K(10,"date"),c()(),l(11,"div",252),p(12),c(),l(13,"div",253)(14,"button",254),x("click",function(){let n=g(t).$implicit,r=s(3).$implicit,_=s(4);return f(_.startCommentReply(r.id,n))}),p(15," Reply "),c(),l(16,"button",254),x("click",function(){let n=g(t).$implicit,r=s(3).$implicit,_=s(4);return f(_.toggleCommentLike(r.id,n))}),h(17,zi,2,0,"span",255)(18,Di,2,0,"span",256)(19,Bi,2,1,"span",257),c()()()()}if(o&2){let t=e.$implicit,i=s(3).$implicit,n=s(4);H("margin-left",((n.commentDepth[i.id]==null?null:n.commentDepth[i.id][t.id])??0)*18,"px"),a(2),d("ngIf",t.author==null?null:t.author.avatar_url),a(),d("ngIf",!(t.author!=null&&t.author.avatar_url)),a(4),C((t.author==null?null:t.author.display_name)||(t.author==null?null:t.author.username)||"Member"),a(2),C(Z(10,14,t.created_at,"mediumDate")),a(3),C(t.body),a(2),d("disabled",n.commentBusy[i.id]),a(2),M("active",t.liked_by_me),d("disabled",n.commentLikeBusy[i.id]==null?null:n.commentLikeBusy[i.id][t.id]),a(),d("ngIf",!t.liked_by_me),a(),d("ngIf",t.liked_by_me),a(),d("ngIf",t.like_count)}}function $i(o,e){if(o&1&&(l(0,"div",241),h(1,Ni,2,0,"div",242)(2,Wi,20,17,"div",243),c()),o&2){let t=s(2).$implicit,i=s(4);a(),d("ngIf",!(i.commentDisplay[t.id]!=null&&i.commentDisplay[t.id].length)),a(),d("ngForOf",i.commentDisplay[t.id]||pt(2,Qt))}}function Hi(o,e){if(o&1){let t=P();l(0,"div",266),p(1," Replying to "),l(2,"span"),p(3),c(),l(4,"button",267),x("click",function(){g(t);let n=s(3).$implicit,r=s(4);return f(r.cancelCommentReply(n.id))}),p(5,"Cancel"),c()()}if(o&2){let t=e.ngIf;a(3),w("@",t.authorName)}}function ji(o,e){if(o&1){let t=P();l(0,"div",262),h(1,Hi,6,1,"div",263),l(2,"input",264),L("ngModelChange",function(n){g(t);let r=s(2).$implicit,_=s(4);return A(_.commentDrafts[r.id],n)||(_.commentDrafts[r.id]=n),f(n)}),c(),l(3,"button",265),x("click",function(){g(t);let n=s(2).$implicit,r=s(4);return f(r.submitComment(n))}),p(4),c()()}if(o&2){let t=s(2).$implicit,i=s(4);a(),d("ngIf",i.commentReplyTarget[t.id]),a(),d("disabled",i.commentBusy[t.id]),N("ngModel",i.commentDrafts[t.id]),a(),d("disabled",i.commentBusy[t.id]),a(),w(" ",i.commentBusy[t.id]?"Sending...":"Comment"," ")}}function qi(o,e){o&1&&(l(0,"div",268),p(1,"Sign in to comment."),c())}function Yi(o,e){if(o&1&&(l(0,"div",234),h(1,Vi,2,0,"div",235)(2,Gi,2,1,"div",236)(3,$i,3,3,"div",237)(4,ji,5,5,"div",238)(5,qi,2,0,"ng-template",null,4,J),c()),o&2){let t=$(6),i=s().$implicit,n=s(4);a(),d("ngIf",n.commentLoading[i.id]),a(),d("ngIf",n.commentErrors[i.id]),a(),d("ngIf",!n.commentLoading[i.id]&&!n.commentErrors[i.id]),a(),d("ngIf",n.meId)("ngIfElse",t)}}function Xi(o,e){if(o&1&&(l(0,"div",281),p(1),c()),o&2){let t=s(6);a(),C(t.postEditError)}}function Ki(o,e){if(o&1){let t=P();l(0,"div",269)(1,"input",270),L("ngModelChange",function(n){g(t);let r=s(5);return A(r.editPostTitle,n)||(r.editPostTitle=n),f(n)}),c(),l(2,"textarea",271),L("ngModelChange",function(n){g(t);let r=s(5);return A(r.editPostBody,n)||(r.editPostBody=n),f(n)}),c(),l(3,"div",272)(4,"select",273),L("ngModelChange",function(n){g(t);let r=s(5);return A(r.editPostVisibility,n)||(r.editPostVisibility=n),f(n)}),l(5,"option",274),p(6,"Public"),c(),l(7,"option",275),p(8,"Only followers"),c(),l(9,"option",276),p(10,"Only me"),c()(),l(11,"div",277)(12,"button",278),x("click",function(){g(t);let n=s(5);return f(n.cancelPostEdit())}),p(13,"Cancel"),c(),l(14,"button",279),x("click",function(){g(t);let n=s().$implicit,r=s(4);return f(r.savePostEdit(n))}),p(15),c()()(),h(16,Xi,2,1,"div",280),c()}if(o&2){let t=s(5);a(),N("ngModel",t.editPostTitle),a(),N("ngModel",t.editPostBody),a(2),N("ngModel",t.editPostVisibility),a(8),d("disabled",t.postEditBusy),a(2),d("disabled",t.postEditBusy),a(),w(" ",t.postEditBusy?"Saving...":"Save"," "),a(),d("ngIf",t.postEditError)}}function Zi(o,e){if(o&1){let t=P();l(0,"div",115)(1,"div",116)(2,"div",117),x("click",function(n){let r=g(t).$implicit;return s(4).openAuthorProfile(r.author,r.author_id),f(n.stopPropagation())})("keyup.enter",function(n){let r=g(t).$implicit;return s(4).openAuthorProfile(r.author,r.author_id),f(n.stopPropagation())}),l(3,"div",118),h(4,Ne,1,1,"img",119)(5,Ae,2,1,"div",120),c(),l(6,"div",121)(7,"div",122),p(8),c(),l(9,"div",123),p(10),K(11,"date"),h(12,Le,2,1,"span",124),c()()(),h(13,ze,2,4,"button",125)(14,Ye,6,2,"div",126),c(),h(15,Je,3,2,"div",127)(16,di,18,12,"div",128)(17,yi,2,1,"div",129)(18,Pi,4,4,"div",130)(19,Si,22,15,"div",131)(20,Mi,2,1,"div",132)(21,Ri,4,3,"div",133)(22,Yi,7,5,"div",134)(23,Ki,17,7,"div",135),c()}if(o&2){let t=e.$implicit,i=s(4);M("media",!!t.media_url&&t.media_type!=="none")("post-highlight",i.highlightedPostId===t.id),at("id","post-"+t.id),a(2),M("clickable",!!t.author),a(2),d("ngIf",t.author==null?null:t.author.avatar_url),a(),d("ngIf",!(t.author!=null&&t.author.avatar_url)),a(3),C((t.author==null?null:t.author.display_name)||(t.author==null?null:t.author.username)||"Member"),a(2),X(" @",(t.author==null?null:t.author.username)||"user"," - ",Z(11,24,t.created_at,"mediumDate")," "),a(2),d("ngIf",t.visibility!=="public"&&t.visibility!=="country"),a(),d("ngIf",i.meId&&!i.isAuthorSelf(t.author_id)),a(),d("ngIf",i.editingPostId!==t.id),a(),d("ngIf",i.editingPostId!==t.id),a(),d("ngIf",t.shared_post),a(),d("ngIf",i.editingPostId!==t.id&&t.media_url&&t.media_type!=="none"),a(),d("ngIf",i.editingPostId!==t.id&&t.media_url&&t.media_type!=="none"&&i.postCaptionText(t)),a(),d("ngIf",i.editingPostId!==t.id),a(),d("ngIf",i.postActionError[t.id]),a(),d("ngIf",i.likeOpen[t.id]&&i.editingPostId!==t.id),a(),d("ngIf",i.commentOpen[t.id]&&i.editingPostId!==t.id),a(),d("ngIf",i.editingPostId===t.id)}}function Ji(o,e){if(o&1){let t=P();l(0,"button",282),x("click",function(){g(t);let n=s(4);return f(n.loadMorePosts())}),p(1," Load more "),c()}}function Qi(o,e){if(o&1&&(l(0,"div",110),h(1,Ge,2,1,"div",111)(2,Zi,24,27,"div",112)(3,Ji,2,0,"button",113),c()),o&2){let t=s().posts,i=s(2);a(),d("ngIf",!t.length),a(),d("ngForOf",t)("ngForTrackBy",i.trackPostById),a(),d("ngIf",i.hasMorePosts)}}function tn(o,e){if(o&1&&h(0,Re,2,0,"div",105)(1,Ve,2,1,"div",106)(2,Qi,4,4,"div",107),o&2){let t=e.loading,i=e.error;d("ngIf",t),a(),d("ngIf",!t&&i),a(),d("ngIf",!t&&!i)}}function en(o,e){o&1&&tt(0)}function nn(o,e){if(o&1&&(l(0,"div",52),h(1,en,1,0,"ng-container",54),c()),o&2){s();let t=$(30),i=s();a(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",et(2,te,i.visibleMediaPosts,i.postsLoading,i.postsError))}}function on(o,e){if(o&1&&(l(0,"span",306),p(1),c()),o&2){let t=e.$implicit;a(),C(t)}}function rn(o,e){if(o&1&&(l(0,"div",304),h(1,on,2,1,"span",305),c()),o&2){let t=s(4);a(),d("ngForOf",t.globalMood.topics)}}function an(o,e){if(o&1&&(l(0,"div",307),p(1),c()),o&2){let t=s(4);a(),C(t.globalMood.insight)}}function sn(o,e){if(o&1&&(l(0,"div",293)(1,"div",285),p(2,"Global mood"),c(),l(3,"div",294),k(4,"div",295)(5,"div",296)(6,"div",297),c(),l(7,"div",298)(8,"span",299),p(9),c(),l(10,"span",300),p(11),c(),l(12,"span",301),p(13),c()(),h(14,rn,2,1,"div",302)(15,an,2,1,"div",303),c()),o&2){let t=s(3);a(4),H("width",t.moodPct(t.globalMood,"positive"),"%"),a(),H("width",t.moodPct(t.globalMood,"neutral"),"%"),a(),H("width",t.moodPct(t.globalMood,"negative"),"%"),a(3),w("Positive ",t.moodPct(t.globalMood,"positive"),"%"),a(2),w("Neutral ",t.moodPct(t.globalMood,"neutral"),"%"),a(2),w("Negative ",t.moodPct(t.globalMood,"negative"),"%"),a(),d("ngIf",t.globalMood.topics==null?null:t.globalMood.topics.length),a(),d("ngIf",t.globalMood.insight)}}function ln(o,e){if(o&1&&(l(0,"div",284)(1,"div",285),p(2),c(),l(3,"div",286)(4,"span"),p(5,"Online"),c(),l(6,"b"),p(7),c()(),l(8,"div",286)(9,"span"),p(10,"Total"),c(),l(11,"b"),p(12),c()()()),o&2){let t=s(3);a(2),X(" Local (",t.selectedCountry.name,"",t.selectedCountry.code?" - "+t.selectedCountry.code:"",") "),a(5),C(t.localOnline??0),a(5),C(t.localTotal??0)}}function cn(o,e){if(o&1&&(l(0,"span",306),p(1),c()),o&2){let t=e.$implicit;a(),C(t)}}function dn(o,e){if(o&1&&(l(0,"div",304),h(1,cn,2,1,"span",305),c()),o&2){let t=s(4);a(),d("ngForOf",t.localMood.topics)}}function pn(o,e){if(o&1&&(l(0,"div",307),p(1),c()),o&2){let t=s(4);a(),C(t.localMood.insight)}}function _n(o,e){if(o&1&&(l(0,"div",293)(1,"div",285),p(2,"Local mood"),c(),l(3,"div",294),k(4,"div",295)(5,"div",296)(6,"div",297),c(),l(7,"div",298)(8,"span",299),p(9),c(),l(10,"span",300),p(11),c(),l(12,"span",301),p(13),c()(),h(14,dn,2,1,"div",302)(15,pn,2,1,"div",303),c()),o&2){let t=s(3);a(4),H("width",t.moodPct(t.localMood,"positive"),"%"),a(),H("width",t.moodPct(t.localMood,"neutral"),"%"),a(),H("width",t.moodPct(t.localMood,"negative"),"%"),a(3),w("Positive ",t.moodPct(t.localMood,"positive"),"%"),a(2),w("Neutral ",t.moodPct(t.localMood,"neutral"),"%"),a(2),w("Negative ",t.moodPct(t.localMood,"negative"),"%"),a(),d("ngIf",t.localMood.topics==null?null:t.localMood.topics.length),a(),d("ngIf",t.localMood.insight)}}function un(o,e){o&1&&(l(0,"div",308),p(1,"Loading mood\u2026"),c())}function mn(o,e){if(o&1&&(l(0,"div",309),p(1),c()),o&2){let t=s(3);a(),C(t.moodError)}}function gn(o,e){o&1&&(l(0,"div",308),p(1,"Loading profile..."),c())}function fn(o,e){if(o&1&&(l(0,"div",309),p(1),c()),o&2){let t=s(3);a(),C(t.profileError)}}function hn(o,e){if(o&1&&(l(0,"div",283)(1,"div",284)(2,"div",285),p(3,"Global"),c(),l(4,"div",286)(5,"span"),p(6,"Total users"),c(),l(7,"b"),p(8),c()(),l(9,"div",286)(10,"span"),p(11,"Online now"),c(),l(12,"b"),p(13),c()()(),h(14,sn,16,11,"div",287)(15,ln,13,4,"div",288)(16,_n,16,11,"div",287),l(17,"div",284)(18,"div",285),p(19,"Status"),c(),l(20,"div",286)(21,"span"),p(22,"Heartbeat"),c(),l(23,"small",289),p(24),c()(),l(25,"div",286)(26,"span"),p(27,"Auth"),c(),l(28,"small",290),p(29),c()(),h(30,un,2,0,"div",291)(31,mn,2,1,"div",292)(32,gn,2,0,"div",291)(33,fn,2,1,"div",292),c()()),o&2){let t=s(2);a(8),C(t.totalUsers??"--"),a(5),C(t.onlineUsers??"--"),a(),d("ngIf",t.globalMood),a(),d("ngIf",t.selectedCountry),a(),d("ngIf",t.selectedCountry&&t.localMood),a(8),C(t.heartbeatText||"--"),a(5),C(t.userEmail?"Logged in: "+t.userEmail:"Logged out"),a(),d("ngIf",t.moodLoading),a(),d("ngIf",t.moodError),a(),d("ngIf",t.loadingProfile),a(),d("ngIf",t.profileError)}}function vn(o,e){if(o&1){let t=P();l(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33)(4,"div",34)(5,"div",35)(6,"button",36),x("click",function(){g(t);let n=s();return f(n.returnToGlobe())}),k(7,"img",27),c(),l(8,"div",37),p(9,"COUNTRY FEED"),c(),h(10,se,2,0,"button",38),c(),l(11,"div",39),p(12),h(13,le,2,1,"span",40),l(14,"select",41),x("ngModelChange",function(n){g(t);let r=s();return f(r.onCountryDropdownChange(n))}),h(15,ce,2,2,"option",42),c()()()(),l(16,"div",43)(17,"button",44),x("click",function(){g(t);let n=s();return f(n.setCountryTab("posts"))}),p(18,"POSTS"),c(),l(19,"button",44),x("click",function(){g(t);let n=s();return f(n.setCountryTab("following"))}),p(20,"FOLLOWING"),c(),l(21,"button",44),x("click",function(){g(t);let n=s();return f(n.setCountryTab("media"))}),p(22,"MEDIA"),c(),l(23,"button",44),x("click",function(){g(t);let n=s();return f(n.setCountryTab("stats"))}),p(24,"STATS"),c()()(),l(25,"div",45),x("scroll",function(n){g(t);let r=s();return f(r.onFeedScroll(n))}),V(26,46),h(27,Te,3,7,"div",47)(28,Fe,4,6,"div",47)(29,tn,3,3,"ng-template",null,0,J)(31,nn,2,6,"div",47)(32,hn,34,11,"div",48),G(),c()()()}if(o&2){let t=s();a(2),M("hidden",t.feedHeaderHidden),a(8),d("ngIf",t.selectedCountry),a(2),w(" ",t.selectedCountry.name," public space "),a(),d("ngIf",t.clockLabel),a(),d("ngModel",t.selectedCountry.code),a(),d("ngForOf",t.countryList),a(2),M("active",t.countryTab==="posts"),a(2),M("active",t.countryTab==="following"),a(2),M("active",t.countryTab==="media"),a(2),M("active",t.countryTab==="stats"),a(3),d("ngSwitch",t.countryTab),a(),d("ngSwitchCase","posts"),a(),d("ngSwitchCase","following"),a(3),d("ngSwitchCase","media"),a(),d("ngSwitchCase","stats")}}function xn(o,e){if(o&1){let t=P();l(0,"div",310),x("click",function(){g(t);let n=s();return f(n.closePanel())}),c()}}function bn(o,e){if(o&1){let t=P();l(0,"div",311),x("click",function(){g(t);let n=s();return f(n.closeImageLightbox())}),l(1,"div",312),x("click",function(n){return g(t),f(n.stopPropagation())}),l(2,"button",313),x("click",function(n){return g(t),s().closeImageLightbox(),f(n.stopPropagation())}),p(3," \xD7 "),c(),k(4,"img",314),c()()}if(o&2){let t=s();a(4),d("src",t.lightboxUrl,U)}}function yn(o,e){o&1&&(l(0,"div",327),p(1,"Loading notifications..."),c())}function Cn(o,e){if(o&1&&(l(0,"div",328),p(1),c()),o&2){let t=s(2);a(),w(" ",t.notificationsError," ")}}function Pn(o,e){o&1&&(l(0,"div",332),p(1,"No notifications yet."),c())}function wn(o,e){if(o&1&&k(0,"img",136),o&2){let t=s().$implicit;d("src",t.actor==null?null:t.actor.avatar_url,U)}}function Sn(o,e){if(o&1&&(l(0,"span"),p(1),c()),o&2){let t=s().$implicit;a(),w(" ",((t.actor==null?null:t.actor.display_name)||(t.actor==null?null:t.actor.username)||"U").slice(0,2).toUpperCase()," ")}}function Mn(o,e){o&1&&k(0,"span",341)}function kn(o,e){if(o&1){let t=P();l(0,"button",333),x("click",function(){let n=g(t).$implicit,r=s(3);return f(r.openNotification(n))}),l(1,"div",334),h(2,wn,1,1,"img",119)(3,Sn,2,1,"span",69),c(),l(4,"div",335)(5,"div",336)(6,"span",337),p(7),c(),l(8,"span",338),p(9),c(),l(10,"span",339),p(11),c()()(),h(12,Mn,1,0,"span",340),c()}if(o&2){let t=e.$implicit,i=s(3);a(2),d("ngIf",t.actor==null?null:t.actor.avatar_url),a(),d("ngIf",!(t.actor!=null&&t.actor.avatar_url)),a(4),C(i.notificationActorName(t)),a(2),C(i.notificationMessage(t)),a(2),C(i.formatDate(t.created_at)),a(),d("ngIf",!t.read_at)}}function In(o,e){if(o&1&&(l(0,"div",329),h(1,Pn,2,0,"div",330)(2,kn,13,6,"button",331),c()),o&2){let t=s(2);a(),d("ngIf",!t.notifications.length),a(),d("ngForOf",t.notifications)}}function En(o,e){if(o&1){let t=P();l(0,"div",315),x("click",function(n){return g(t),f(n.stopPropagation())}),l(1,"div",316)(2,"div",317)(3,"div",318),p(4,"NOTIFICATIONS"),c(),l(5,"div",319),p(6),c()(),l(7,"div",320)(8,"button",321),x("click",function(){g(t);let n=s();return f(n.markAllNotificationsRead())}),p(9," Mark all read "),c()(),h(10,yn,2,0,"div",322)(11,Cn,2,1,"div",323)(12,In,3,2,"div",324),l(13,"div",325)(14,"button",326),x("click",function(){g(t);let n=s();return f(n.closePanel())}),p(15,"CLOSE"),c()()()()}if(o&2){let t=s();a(6),w("Unread: ",t.notificationsUnreadCount),a(2),d("disabled",t.notificationsLoading||t.notificationsActionBusy||!t.notifications.length),a(2),d("ngIf",t.notificationsLoading),a(),d("ngIf",!t.notificationsLoading&&t.notificationsError),a(),d("ngIf",!t.notificationsLoading&&!t.notificationsError)}}function On(o,e){if(o&1&&(l(0,"div",348)(1,"div",349)(2,"div",350)(3,"span",351),p(4,"STATUS"),c(),l(5,"span",352),p(6,"ONLINE"),c()(),l(7,"div",350)(8,"span",351),p(9,"COUNTRY"),c(),l(10,"span",352),p(11),c()(),l(12,"div",350)(13,"span",351),p(14,"CODE"),c(),l(15,"span",352),p(16),c()(),l(17,"div",350)(18,"span",351),p(19,"CITY"),c(),l(20,"span",352),p(21),c()()()()),o&2){let t=s(2);a(11),C((t.profile==null?null:t.profile.country_name)||"--"),a(5),C((t.profile==null?null:t.profile.country_code)||"--"),a(5),C(t.cityName)}}function Tn(o,e){o&1&&(l(0,"div",348)(1,"div",349)(2,"div",350)(3,"span",351),p(4,"POSTS"),c(),l(5,"span",352),p(6,"0"),c()(),l(7,"div",350)(8,"span",351),p(9,"STATE"),c(),l(10,"span",352),p(11,"COMING SOON"),c()()()())}function Un(o,e){if(o&1){let t=P();l(0,"div",342),x("click",function(){g(t);let n=s();return f(n.closePanel())}),l(1,"div",343),x("click",function(n){return g(t),f(n.stopPropagation())}),l(2,"div",344)(3,"div",345),p(4),c(),l(5,"button",346),x("click",function(){g(t);let n=s();return f(n.closePanel())}),p(6,"X"),c()(),h(7,On,22,3,"div",347)(8,Tn,12,0,"div",347),c()()}if(o&2){let t=s();a(4),w(" ",t.panel==="presence"?"MY PRESENCE":t.panel==="posts"?"MY POSTS":"NOTIFICATIONS"," "),a(3),d("ngIf",t.panel==="presence"),a(),d("ngIf",t.panel==="posts")}}var jt=class o{constructor(e,t,i,n,r,_,v,m,u,y,b,S,E,T,O,z,D,F,B,W){this.countriesService=e;this.globeService=t;this.ui=i;this.search=n;this.auth=r;this.gql=_;this.router=v;this.route=m;this.media=u;this.profiles=y;this.location=b;this.presence=S;this.postsService=E;this.postEvents=T;this.followService=O;this.notificationsService=z;this.notificationEvents=D;this.push=F;this.zone=B;this.cdr=W}buildTag="v2026-02-07-3";feedHeaderHidden=!1;feedLastScrollTop=0;globalFireworkSeeded=!1;globalFireworkPosts=[];clockLabel="";clockTimer=null;menuOpen=!1;panel=null;userEmail="";profile=null;meId=null;loadingProfile=!1;profileError="";locationRefreshTimer=null;locationRefreshInFlight=!1;LOCATION_REFRESH_MS=10*6e4;selectedCountry=null;countryFeedFull=!0;totalUsers=null;onlineUsers=null;onlineIds=new Set;heartbeatText="";localTotal=null;localOnline=null;globalMood=null;localMood=null;moodLoading=!1;moodError="";searchOpen=!1;userSearchTerm="";userSearchError="";userSuggestions=[];userSuggestionsLoading=!1;userSuggestionTimer=null;countrySearchTerm="";countrySuggestions=[];activeTab="countries";searchTabs=[{id:"countries",label:"Countries"},{id:"people",label:"People"}];posts=[];postsLoading=!1;postsError="";newPostTitle="";newPostBody="";composerMediaFiles=[];composerMediaPreviews=[];composerMediaTypes=[];composerMediaPreview="";composerMediaType=null;composerMediaMode="post";composerMediaError="";postMediaIndex={};postBusy=!1;postFeedback="";postComposerError="";editingPostId=null;editPostTitle="";editPostBody="";editPostVisibility="public";postEditBusy=!1;postEditError="";openPostMenuId=null;confirmDeletePostId=null;likeBusy={};likeOpen={};likeLoading={};likeErrors={};likeItems={};postActionError={};commentOpen={};commentLoading={};commentBusy={};commentErrors={};commentDrafts={};commentItems={};commentDisplay={};commentDepth={};commentReplyTarget={};commentLikeBusy={};postShareFeedback={};postShareBusy={};reportingPostId=null;reportReason="";reportBusy=!1;reportError="";reportFeedback="";POST_TEXT_LIMIT=220;POST_TEXT_PREVIEW=140;expandedPosts=new Set;viewedPostIds=new Set;followingIds=new Set;followBusyMap=new Map;pendingPostId=null;notificationFocusPostId=null;notificationFocusPost=null;pendingNotificationPostId=null;pendingNotificationUserId=null;lastHandledNotificationPostId=null;lastHandledNotificationUserId=null;highlightedPostId=null;followingPosts=[];followingLoading=!1;followingError="";followingLoaded=!1;POSTS_RENDER_START=120;POSTS_RENDER_STEP=80;postsRenderLimit=this.POSTS_RENDER_START;notifications=[];notificationsLoading=!1;notificationsActionBusy=!1;notificationsError="";notificationsUnreadCount=0;messagesUnreadCount=0;notificationNow=Date.now();bellPulse=!1;bellPulseTimer=null;notificationCountInitialized=!1;lightboxUrl=null;notificationInsertSub;notificationUpdateSub;notificationPollTimer=null;notificationClockTimer=null;lastPresenceSnap=null;countryTab="posts";composerOpen=!1;queryParamSub;postEventsCreatedSub;postEventsInsertSub;postEventsUpdatedSub;postEventsUpdateSub;postEventsDeleteSub;resettingGlobe=!1;pendingRouteState=null;applyingRouteState=!1;countriesReady=!1;globeReady=!1;lastSyncedRouteState={country:null,tab:null,panel:null};nodeAvatarUrl="";nodeNormX=0;nodeNormY=0;editDisplayName="";editBio="";draftAvatarUrl="";draftNormX=0;draftNormY=0;saveState="idle";uploadingAvatar=!1;msg="";adjustingAvatar=!1;avatarPreviewOpen=!1;dragging=!1;startX=0;startY=0;basePxX=0;basePxY=0;raf=0;pendingPxX=0;pendingPxY=0;NODE_SIZE=44;NODE_SCALE=1.2;EDIT_SIZE=168;EDIT_SCALE=1.3;AVATAR_OUT_SIZE=512;get cityName(){let e=this.profile;return e?.city_name??e?.cityName??"Unknown"}get effectiveCountryCode(){let e=String(this.profile?.country_code||"").trim().toUpperCase();if(e)return e;let t=this.location.getCachedLocation();if(t?.countryCode)return String(t.countryCode).trim().toUpperCase();let i=(this.profile?.country_name||"").trim();if(i){let n=this.ui.countries.find(r=>String(r.name||"").trim().toLowerCase()===i.toLowerCase());return n?.code?String(n.code).trim().toUpperCase():""}return""}get effectiveCountryName(){let e=(this.profile?.country_name||"").trim();if(e&&e.toLowerCase()!=="unknown")return e;let t=String(this.profile?.country_code||"").trim().toUpperCase();if(t){let n=this.ui.countries.find(r=>String(r.code||"").trim().toUpperCase()===t);if(n?.name)return n.name}let i=this.location.getCachedLocation();if(i?.countryName&&i.countryName.toLowerCase()!=="unknown")return i.countryName;if(i?.countryCode){let n=this.ui.countries.find(r=>String(r.code||"").trim().toUpperCase()===i.countryCode.toUpperCase());if(n?.name)return n.name}return"your country"}maxOffset(e,t){let i=e*t;return Math.max(0,(i-e)/2)}clampNorm(e){return Number.isFinite(e)?Math.max(-1,Math.min(1,e)):0}get initials(){let t=(this.profile?.display_name||this.userEmail||"U").trim().split(/\s+/).filter(Boolean),i=t[0]?.[0]??"U",n=t.length>1?t[t.length-1]?.[0]??"":"";return(i+n).toUpperCase()}get nodeAvatarTransform(){let e=this.maxOffset(this.NODE_SIZE,this.NODE_SCALE),t=this.nodeNormX*e,i=this.nodeNormY*e;return`translate3d(${t}px, ${i}px, 0)`}get canPostHere(){if(!this.profile||!this.selectedCountry)return!1;let e=this.effectiveCountryCode,t=(this.selectedCountry.code||"").toUpperCase();return!!e&&!!t&&e===t}get draftAvatarTransform(){let e=this.maxOffset(this.EDIT_SIZE,this.EDIT_SCALE),t=this.draftNormX*e,i=this.draftNormY*e;return`translate3d(${t}px, ${i}px, 0)`}get profileAvatar(){return this.normalizeAvatarUrl(this.profile?.avatar_url??"")}get composerInitial(){let e=(this.profile?.display_name||this.profile?.username||this.userEmail||"you").trim();return e?e.slice(0,1).toUpperCase():"Y"}get searchInputValue(){return this.activeTab==="people"?this.userSearchTerm:this.countrySearchTerm}set searchInputValue(e){this.activeTab==="people"?(this.userSearchTerm=e,this.onUserSearchInput(e)):(this.countrySearchTerm=e,this.onCountrySearchInput(e))}async ngOnInit(){this.startClock(),this.setAppBackground("globe"),this.push.syncIfGranted(),this.postEventsCreatedSub=this.postEvents.createdPost$.subscribe(t=>{this.zone.run(()=>this.handleCountryPostEvent(t))}),this.postEventsInsertSub=this.postEvents.insert$.subscribe(t=>{this.zone.run(()=>this.handleCountryPostInsert(t))}),this.postEventsUpdatedSub=this.postEvents.updatedPost$.subscribe(t=>{this.zone.run(()=>this.handleCountryPostUpdated(t))}),this.postEventsUpdateSub=this.postEvents.update$.subscribe(t=>{this.zone.run(()=>this.handleCountryPostUpdateEvent(t))}),this.postEventsDeleteSub=this.postEvents.delete$.subscribe(t=>{this.zone.run(()=>this.handleCountryPostDeleteEvent(t))}),this.router.getCurrentNavigation()?.extras.state?.resetGlobe&&this.clearSelectedCountry({skipRouteUpdate:!0}),this.loadingProfile=!0,this.profileError="",this.forceUi();try{let t=await this.auth.getUser();this.meId=t?.id??null,this.userEmail=t?.email??"",this.meId?(this.refreshFollowingSnapshot(),this.refreshBadgeCounts(),this.startNotificationPolling(),this.notificationEvents.stop(),this.notificationEvents.start(this.meId),this.notificationInsertSub?.unsubscribe(),this.notificationUpdateSub?.unsubscribe(),this.notificationInsertSub=this.notificationEvents.insert$.subscribe(()=>{this.zone.run(()=>{this.refreshBadgeCounts(),this.panel==="notifications"&&this.refreshNotifications()})}),this.notificationUpdateSub=this.notificationEvents.update$.subscribe(n=>{this.zone.run(()=>{let r=this.notifications.findIndex(_=>_.id===n.id);if(r>=0){let _=[...this.notifications];_[r]=q(R({},_[r]),{read_at:n.read_at??_[r].read_at}),this.notifications=_}this.refreshBadgeCounts()})})):(this.followingIds.clear(),this.notificationInsertSub?.unsubscribe(),this.notificationUpdateSub?.unsubscribe(),this.notificationEvents.stop(),this.stopNotificationPolling(),this.notifications=[],this.notificationsUnreadCount=0,this.messagesUnreadCount=0);let{meProfile:i}=await this.profiles.meProfile();this.profile=i,i?.country_code&&i?.country_name&&this.location.cacheLocation({countryCode:String(i?.country_code||"").toUpperCase(),countryName:String(i.country_name||"").trim(),cityName:String(i?.city_name||"").trim()||null,source:"profile"}),this.editDisplayName=i?.display_name??this.userEmail?.split("@")[0]??"",this.editBio=i?.bio??"",this.nodeAvatarUrl=this.normalizeAvatarUrl(i?.avatar_url??""),this.draftAvatarUrl=this.nodeAvatarUrl,this.nodeNormX=0,this.nodeNormY=0,this.draftNormX=0,this.draftNormY=0,this.nodeAvatarUrl&&this.preloadImage(this.nodeAvatarUrl),this.cdr.detectChanges(),this.startLocationRefresh()}catch(t){this.profileError=t?.message??String(t)}finally{this.loadingProfile=!1,this.forceUi()}this.queryParamSub=this.route.queryParamMap.subscribe(t=>{if(t.get("resetGlobe")==="1"){this.resettingGlobe||(this.resettingGlobe=!0,this.clearSelectedCountry({skipRouteUpdate:!0}),this.router.navigate([],{relativeTo:this.route,queryParams:{resetGlobe:null},replaceUrl:!0}).finally(()=>{this.resettingGlobe=!1}));return}t.get("travel")==="1"&&(this.selectedCountry&&this.clearSelectedCountry({skipRouteUpdate:!0}),this.searchOpen=!0,this.activeTab="countries",this.userSearchTerm="",this.countrySearchTerm="",this.countrySuggestions=[],this.forceUi(),this.router.navigate([],{relativeTo:this.route,queryParams:{travel:null},queryParamsHandling:"merge",replaceUrl:!0}));let r=t.get("search");if(r==="1"){this.searchOpen=!1,this.router.navigate(["/search"],{replaceUrl:!0});return}else r==="0"&&(this.searchOpen=!1);let _=t.get("post");_&&_!==this.lastHandledNotificationPostId&&(this.pendingNotificationPostId=_,this.lastHandledNotificationPostId=_,this.tryOpenPendingNotificationPost(),this.router.navigate([],{relativeTo:this.route,queryParams:{post:null},queryParamsHandling:"merge",replaceUrl:!0}));let v=t.get("user");if(v&&v!==this.lastHandledNotificationUserId){this.pendingNotificationUserId=v,this.lastHandledNotificationUserId=v,this.router.navigate(["/user",v]);return}let m=this.normalizeRouteState({country:t.get("country"),tab:t.get("tab"),panel:t.get("panel")});this.routeStatesEqual(m,this.lastSyncedRouteState)||(this.pendingRouteState=m,this.tryApplyPendingRouteState())})}async ngAfterViewInit(){this.zone.runOutsideAngular(async()=>{let e=document.getElementById("globe");if(!e)return;this.globeService.init(e),this.globeService.whenReady().then(()=>{this.zone.run(()=>{this.globeReady=!0,this.tryApplyPendingRouteState()})});let t=await this.countriesService.loadCountries();this.ui.setCountries(t.countries),this.globeService.setData(t),this.zone.run(()=>{this.countriesReady=!0,this.tryApplyPendingRouteState()}),this.seedGlobalFireworkWords(t.countries);try{await this.presence.start({countries:t.countries,meCountryCode:this.profile?.country_code??null,meCountryName:this.profile?.country_name??null,meCityName:this.profile?.city_name??null,onHeartbeat:i=>{this.zone.run(()=>{this.heartbeatText=i,this.forceUi()})},onUpdate:i=>{this.zone.run(()=>{this.lastPresenceSnap=i,this.totalUsers=i.totalUsers,this.onlineUsers=i.onlineUsers,this.onlineIds=new Set(i.onlineIds??[]),this.globeService.setConnections(i.points),this.globeService.setConnectionsOnline(i.onlineIds),this.globeService.setConnectionsCountryFilter(this.selectedCountry?.code??null),this.recomputeLocal(),this.forceUi()})}})}catch(i){this.zone.run(()=>{this.heartbeatText=`presence (${i?.message??i})`,this.forceUi()})}this.globeService.onCountryClick(i=>{this.zone.run(()=>{this.focusCountry(i)})});try{await this.auth.getAccessToken(),await this.gql.query("query { __typename }")}catch{}this.zone.run(()=>console.log("Globe page ready"))})}ngOnDestroy(){this.clockTimer&&(window.clearInterval(this.clockTimer),this.clockTimer=null),this.setAppBackground("light");try{document.body.classList.remove("feed-header-hidden")}catch{}try{this.presence.stop()}catch{}this.queryParamSub?.unsubscribe(),this.postEventsCreatedSub?.unsubscribe(),this.postEventsInsertSub?.unsubscribe(),this.postEventsUpdatedSub?.unsubscribe(),this.postEventsUpdateSub?.unsubscribe(),this.postEventsDeleteSub?.unsubscribe(),this.notificationInsertSub?.unsubscribe(),this.notificationUpdateSub?.unsubscribe(),this.notificationEvents.stop(),this.stopNotificationPolling(),this.stopNotificationClock(),this.bellPulseTimer&&(window.clearTimeout(this.bellPulseTimer),this.bellPulseTimer=null),this.locationRefreshTimer&&window.clearInterval(this.locationRefreshTimer),this.userSuggestionTimer&&window.clearTimeout(this.userSuggestionTimer)}recomputeLocal(){if(!this.selectedCountry?.code){this.localTotal=null,this.localOnline=null;return}let e=this.lastPresenceSnap;if(!e){this.localTotal=null,this.localOnline=null;return}let t=String(this.selectedCountry.code).toUpperCase(),i=e.byCountry?.[t];this.localTotal=i?.total??0,this.localOnline=i?.online??0}async loadMoodStats(){if(!this.moodLoading){this.moodLoading=!0,this.moodError="";try{if(this.selectedCountry?.code){let t=await this.gql.query(`query Mood($code: String!) {
          globalMood { country_code positive neutral negative total topics insight computed_at }
          countryMood(country_code: $code) { country_code positive neutral negative total topics insight computed_at }
        }`,{code:String(this.selectedCountry.code).toUpperCase()});this.globalMood=t.globalMood??null,this.localMood=t.countryMood??null}else{let t=await this.gql.query("query Mood { globalMood { country_code positive neutral negative total topics insight computed_at } }");this.globalMood=t.globalMood??null,this.localMood=null}}catch(e){this.moodError=e?.message??"Failed to load mood."}finally{this.moodLoading=!1,this.forceUi()}}}moodPct(e,t){if(!e?.total)return 0;let i=e[t]/e.total*100;return Math.max(0,Math.min(100,Math.round(i)))}computeFocusPadding(){let n=20;if(this.countryFeedFull)return{top:90,bottom:20,left:20,right:n};let r=document.querySelector(".main-pane");if(r){let _=r.getBoundingClientRect();n=Math.max(24,Math.round(_.width+32))}else n=Math.max(24,Math.round(window.innerWidth*.45));return{top:90,bottom:20,left:20,right:n}}resetFeedHeader(){this.setFeedHeaderHidden(!1),this.feedLastScrollTop=0}setAppBackground(e){try{let t=document.documentElement;t.classList.remove("app-bg-globe","app-bg-feed","app-bg-light");let i=e==="feed"?"app-bg-feed":e==="light"?"app-bg-light":"app-bg-globe";t.classList.add(i);let r=getComputedStyle(t).getPropertyValue("--app-bg").trim()||(e==="globe"?"#05070b":"#f5f6f8");document.body.style.backgroundColor=r,document.documentElement.style.backgroundColor=r;let _=document.querySelector('meta[name="theme-color"]');_&&_.setAttribute("content",r)}catch{}}onFeedScroll(e){let t=e?.target;if(!t)return;let i=t.scrollTop||0,n=i-this.feedLastScrollTop;Math.abs(n)<12||(n>0&&i>60?this.setFeedHeaderHidden(!0):n<0&&this.setFeedHeaderHidden(!1),this.feedLastScrollTop=i)}setFeedHeaderHidden(e){if(this.feedHeaderHidden!==e){this.feedHeaderHidden=e;try{document.body.classList.toggle("feed-header-hidden",e)}catch{}}}applyFocusView(e){this.globeService.setViewPadding(this.computeFocusPadding()),this.globeService.flyTo(e.center.lat,e.center.lng,e.flyAltitude??1,900)}setCountryTab(e,t){this.countryTab!==e&&(this.countryTab=e,this.resetFeedHeader(),(e==="posts"||e==="media")&&this.selectedCountry&&!this.postsLoading&&!this.posts.length&&this.loadPostsForCountry(this.selectedCountry),e==="following"&&!this.followingLoaded&&!this.followingLoading&&this.loadFollowingFeed(),e==="stats"&&this.loadMoodStats(),!t?.skipRouteUpdate&&this.selectedCountry&&this.updateRouteState(),this.forceUi())}onCountryDropdownChange(e){let t=String(e||"").trim().toUpperCase();if(!t||this.selectedCountry?.code?.toUpperCase()===t)return;let i=this.ui.countries.find(n=>String(n.code??"").toUpperCase()===t);i&&this.focusCountry(i)}get countryList(){return this.ui.countries}focusCountry(e,t){let i=t?.tab??"posts";this.selectedCountry=e,this.setAppBackground("feed"),this.countryFeedFull=!0,this.countryTab=i,this.resetFeedHeader(),this.notificationFocusPostId=t?.focusPostId??null,this.notificationFocusPost=t?.focusPost??null,this.canPostHere||(this.composerOpen=!1),this.ui.setMode("focus"),this.ui.setSelected(e.id),this.countrySearchTerm=e.name,this.countrySuggestions=[],this.searchOpen=!1,this.globeService.setInteractive(!1),this.globeService.setSoloCountry(e.id),this.globeService.setConnectionsCountryFilter(e.code??null),this.globeService.selectCountry(e.id),this.globeService.showFocusLabel(e.id),this.recomputeLocal(),this.postComposerError="",this.postsError="",this.forceUi(),setTimeout(()=>{this.applyFocusView(e),this.globeService.resize()},0),setTimeout(()=>this.globeService.resize(),60),this.loadPostsForCountry(e),i==="following"&&this.loadFollowingFeed(),i==="stats"&&this.loadMoodStats(),t?.skipRouteUpdate||this.updateRouteState()}clearSelectedCountry(e){let t=!!this.selectedCountry||!!this.panel;this.selectedCountry=null,this.setAppBackground("globe"),this.countryFeedFull=!0,this.countryTab="posts",this.resetFeedHeader(),this.composerOpen=!1,this.ui.setMode("all"),this.ui.setSelected(null),this.countrySearchTerm="",this.countrySuggestions=[],this.globeService.setSoloCountry(null),this.globeService.setConnectionsCountryFilter(null),this.globeService.resetView(),this.globeService.setInteractive(!0),this.localTotal=null,this.localOnline=null,this.panel=null,this.posts=[],this.postsError="",this.postComposerError="",this.postFeedback="",this.newPostBody="",this.newPostTitle="",this.clearComposerMedia(),this.notificationFocusPostId=null,this.notificationFocusPost=null,this.globalFireworkPosts.length?this.updateFloatingWordsFromPosts(this.globalFireworkPosts):this.updateFloatingWordsFromPosts([]),this.forceUi(),setTimeout(()=>this.globeService.resize(),0),setTimeout(()=>this.globeService.resize(),60),!e?.skipRouteUpdate&&t&&this.updateRouteState()}goToMyCountry(){let e=this.effectiveCountryCode,t=null;if(e&&(t=this.ui.countries.find(i=>String(i.code??"").trim().toUpperCase()===e)??null),!t){let i=this.effectiveCountryName.trim();if(i){let n=this.search.normalizeName(i);n&&(t=this.ui.countries.find(r=>r.norm===n||n.startsWith(r.norm)||r.norm.startsWith(n)||n.includes(r.norm))??null,t||(t=this.search.prefixSuggest(this.ui.countries,n,1)[0]??null))}}if(!t){this.activeTab="countries",this.searchOpen=!0,this.countrySearchTerm="",this.countrySuggestions=[],this.forceUi();return}this.focusCountry(t)}returnToGlobe(){this.clearSelectedCountry({skipRouteUpdate:!0}),this.pendingRouteState=null,this.lastSyncedRouteState={country:null,tab:null,panel:null},this.router.navigate([],{relativeTo:this.route,queryParams:{country:null,tab:null,panel:null,resetGlobe:"1"},replaceUrl:!0})}async loadPostsForCountry(e){if(!e?.code){this.posts=[],this.postsError="",this.postsRenderLimit=this.POSTS_RENDER_START,this.forceUi();return}this.postsLoading=!0,this.postsError="",this.forceUi();try{if(this.posts=this.sortPostsDesc(await this.postsService.listByCountry(e.code)),this.postsRenderLimit=this.POSTS_RENDER_START,this.notificationFocusPostId){let t=this.posts.find(i=>i.id===this.notificationFocusPostId);t&&(this.notificationFocusPost=t)}this.updateFloatingWordsFromPosts(this.posts)}catch(t){this.postsError=t?.message??String(t),this.updateFloatingWordsFromPosts([])}finally{this.postsLoading=!1,this.forceUi(),this.tryScrollToPendingPost()}}async loadFollowingFeed(){if(!this.followingLoading){this.followingLoaded=!0,this.followingLoading=!0,this.followingError="",this.forceUi();try{if(!this.meId){this.followingPosts=[],this.followingError="Sign in to view your following feed.";return}let e=await this.followService.listFollowingIds(this.meId);if(!e.length){this.followingPosts=[];return}let t=6,n=(await Promise.all(e.map(r=>this.postsService.listForAuthor(r,t)))).flat();this.followingPosts=this.sortPostsDesc(n),this.postsRenderLimit=this.POSTS_RENDER_START,this.updateFloatingWordsFromPosts(this.followingPosts)}catch(e){this.followingError=e?.message??String(e),this.updateFloatingWordsFromPosts([])}finally{this.followingLoading=!1,this.forceUi()}}}async seedGlobalFireworkWords(e){if(this.globalFireworkSeeded)return;this.globalFireworkSeeded=!0;let t=this.pickSampleCountries(e,12);if(t.length)try{let i=t.map(_=>{let v=_.code??"";return v?this.postsService.listByCountry(v,18,{skipComments:!0,demoLimit:160}):Promise.resolve([])}),n=await Promise.allSettled(i),r=[];for(let _ of n)_.status==="fulfilled"&&r.push(..._.value);this.globalFireworkPosts=this.sortPostsDesc(r).slice(0,200),this.selectedCountry||this.updateFloatingWordsFromPosts(this.globalFireworkPosts)}catch{this.globalFireworkSeeded=!1}}pickSampleCountries(e,t){let i=(e||[]).filter(r=>!!r?.code);if(i.length<=t)return i;let n=[...i];for(let r=n.length-1;r>0;r-=1){let _=Math.floor(Math.random()*(r+1));[n[r],n[_]]=[n[_],n[r]]}return n.slice(0,t)}updateFloatingWordsFromPosts(e){let t=this.extractWordsFromPosts(e),i=this.extractWordGroupsFromPosts(e);this.globeService.setFloatingWords(t),this.globeService.setFireworkWordGroups(i)}extractWordsFromPosts(e){if(!e?.length)return[];let t=this.getStopWords(),i=[];for(let r of e){let _=[r?.title,r?.body,r?.media_caption].filter(m=>!!m).join(" ").trim();if(!_)continue;let v=_.split(/[^\p{L}\p{N}]+/u);for(let m of v){let u=m.trim();if(u.length<4)continue;let y=u.toLowerCase();if(!t.has(y)&&(i.push(u),i.length>360))break}if(i.length>360)break}return Array.from(new Set(i.map(r=>r.slice(0,24)))).slice(0,160)}extractWordGroupsFromPosts(e){if(!e?.length)return[];let t=this.getStopWords(),i=[];for(let n of e){let r=[n?.title,n?.body,n?.media_caption].filter(u=>!!u).join(" ").trim();if(!r)continue;let _=r.split(/[^\p{L}\p{N}]+/u),v=[],m=new Set;for(let u of _){let y=u.trim();if(y.length<4)continue;let b=y.toLowerCase();if(!(t.has(b)||m.has(b))&&(m.add(b),v.push(y.slice(0,24)),v.length>=8))break}if(v.length&&i.push(v),i.length>=140)break}return i}getStopWords(){return new Set(["the","and","with","from","that","this","have","has","had","your","you","for","are","was","were","not","but","like","into","what","when","where","who","why","how","can","could","should","just","about","than","them","then","there","here","over","under","out","off","our","their","they","she","him","her","his","hers","its","we","us","a","an","to","of","in","on","at","by","as","or","if","it"])}get visiblePosts(){if(!this.notificationFocusPostId)return this.limitPosts(this.posts);let e=this.posts.find(t=>t.id===this.notificationFocusPostId);return e?[e]:this.notificationFocusPost?[this.notificationFocusPost]:[]}get visibleFollowingPosts(){return this.limitPosts(this.followingPosts)}get mediaPosts(){return this.posts.filter(e=>!!e.media_url&&e.media_type!=="none")}get visibleMediaPosts(){return this.limitPosts(this.mediaPosts)}get hasMorePosts(){return this.notificationFocusPostId?!1:(this.countryTab==="following"?this.followingPosts:this.countryTab==="media"?this.mediaPosts:this.posts).length>this.postsRenderLimit}trackPostById(e,t){return t?.id??String(e)}loadMorePosts(){this.postsRenderLimit=Math.max(this.POSTS_RENDER_START,this.postsRenderLimit+this.POSTS_RENDER_STEP),this.forceUi()}limitPosts(e){return e?.length?e.slice(0,this.postsRenderLimit):[]}isPostExpanded(e){return this.expandedPosts.has(e)}isPostExpandable(e){return e?[e.title,e.body,e.media_caption].filter(i=>!!i).join(" ").trim().length>this.POST_TEXT_LIMIT:!1}isTextExpandable(e){let t=String(e||"").replace(/\s+/g," ").trim();return t?t.length>this.getPostPreviewLimit():!1}postPreview(e){let t=String(e||"").replace(/\s+/g," ").trim();if(!t)return"";let i=this.getPostPreviewLimit();if(t.length<=i)return t;let n=t.slice(0,i),r=n.lastIndexOf(" ");return(r>40?n.slice(0,r):n).trim()}togglePostExpanded(e,t){t&&(t.stopPropagation(),t.preventDefault()),e&&(this.expandedPosts.has(e)?this.expandedPosts.delete(e):this.expandedPosts.add(e),this.forceUi())}onPostTextClick(e,t){!this.expandedPosts.has(e)||t.target?.closest("button")||(t.stopPropagation(),this.expandedPosts.delete(e),this.forceUi())}getPostPreviewLimit(){if(typeof window>"u")return this.POST_TEXT_PREVIEW;let e=window.innerWidth||0;return e<480?60:e<720?80:e<1024?105:this.POST_TEXT_PREVIEW}postHasVideo(e){return e?String(e.media_type||"").toLowerCase()==="video"?!0:this.postMediaTypes(e).includes("video"):!1}postCaptionText(e){if(!e)return"";let t=String(e.media_caption||"").trim();return t||(this.postHasVideo(e)?String(e.body||"").trim():"")}openImageLightbox(e){let t=String(e||"").trim();t&&(this.lightboxUrl=t,this.forceUi())}closeImageLightbox(){this.lightboxUrl&&(this.lightboxUrl=null,this.forceUi())}tryScrollToPendingPost(){let e=this.pendingPostId;e&&this.posts.some(t=>t.id===e)&&(this.pendingPostId=null,window.setTimeout(()=>this.scrollToPost(e),0))}scrollToPost(e){if(!e)return;let t=document.getElementById(`post-${e}`);t&&(this.highlightedPostId=e,this.forceUi(),t.scrollIntoView({behavior:"smooth",block:"start"}),window.setTimeout(()=>{this.highlightedPostId===e&&(this.highlightedPostId=null,this.forceUi())},1500))}handleCountryPostEvent(e){let t=this.selectedCountry?.code?.toUpperCase()??null,i=e.country_code?.toUpperCase()??null;!t||!i||t!==i||!(e.visibility==="public"||e.visibility==="country")&&!this.isAuthorSelf(e.author_id)&&!this.isFollowingAuthor(e.author_id)||this.posts.some(r=>r.id===e.id)||(this.posts=this.sortPostsDesc([e,...this.posts]),this.forceUi())}handleCountryPostInsert(e){let t=this.selectedCountry?.code?.toUpperCase(),i=e.country_code?.toUpperCase();!t||!i||t===i&&this.selectedCountry&&this.loadPostsForCountry(this.selectedCountry)}handleCountryPostUpdated(e){this.applyPostUpdate(e)}handleCountryPostUpdateEvent(e){let t=this.selectedCountry?.code?.toUpperCase(),i=e.country_code?.toUpperCase();!t||!i||t===i&&this.selectedCountry&&this.loadPostsForCountry(this.selectedCountry)}handleCountryPostDeleteEvent(e){if(!e?.id)return;let t=this.selectedCountry?.code?.toUpperCase()??null,i=e.country_code?.toUpperCase()??null;if(i&&t&&i!==t)return;let n=this.posts.filter(r=>r.id!==e.id);n.length!==this.posts.length&&(this.posts=n,this.editingPostId===e.id&&this.cancelPostEdit(),this.openPostMenuId===e.id&&(this.openPostMenuId=null),this.confirmDeletePostId===e.id&&(this.confirmDeletePostId=null),this.forceUi())}applyPostUpdate(e){let t=this.followingPosts.findIndex(u=>u.id===e.id);if(t>=0){let u=[...this.followingPosts];u[t]=e,this.followingPosts=this.sortPostsDesc(u)}let i=this.selectedCountry?.code?.toUpperCase()??null,n=e.country_code?.toUpperCase()??null;if(!i||!n||i!==n)return;let r=e.visibility==="public"||e.visibility==="country",_=this.isAuthorSelf(e.author_id),v=this.isFollowingAuthor(e.author_id);if(!r&&!_&&!v){let u=this.posts.filter(y=>y.id!==e.id);u.length!==this.posts.length&&(this.posts=u,this.forceUi());return}let m=this.posts.findIndex(u=>u.id===e.id);if(m>=0){let u=[...this.posts];u[m]=e,this.posts=this.sortPostsDesc(u),this.forceUi();return}this.posts=this.sortPostsDesc([e,...this.posts]),this.forceUi()}async refreshNotifications(){if(!this.meId){this.notifications=[],this.notificationsError="",this.notificationsLoading=!1,this.forceUi();return}this.notificationsLoading=!0,this.notificationsError="",this.forceUi();try{let{notifications:e}=await this.notificationsService.list(40),t=(e??[]).filter(i=>!this.isMessageNotification(i));this.notifications=t,this.notificationsUnreadCount=t.filter(i=>!i.read_at).length}catch(e){this.notificationsError=e?.message??String(e)}finally{this.notificationsLoading=!1,this.forceUi()}}async refreshBadgeCounts(){if(!this.meId){this.messagesUnreadCount=0,this.notificationsUnreadCount=0,this.forceUi();return}try{let e=this.notificationsUnreadCount,{notifications:t}=await this.notificationsService.list(80),i=(t??[]).filter(r=>!r.read_at),n=i.filter(r=>this.isMessageNotification(r));this.messagesUnreadCount=n.length,this.notificationsUnreadCount=Math.max(0,i.length-n.length),this.notificationCountInitialized&&this.notificationsUnreadCount>e&&this.triggerBellPulse(),this.notificationCountInitialized=!0}catch{}this.forceUi()}isMessageNotification(e){return String(e?.type??"").toLowerCase()==="message"}triggerBellPulse(){this.bellPulse=!0,this.bellPulseTimer&&window.clearTimeout(this.bellPulseTimer),this.bellPulseTimer=window.setTimeout(()=>{this.bellPulse=!1,this.bellPulseTimer=null,this.forceUi()},900),this.forceUi()}startNotificationPolling(){this.notificationPollTimer||(this.notificationPollTimer=window.setInterval(()=>{this.refreshBadgeCounts()},5e3))}stopNotificationPolling(){this.notificationPollTimer&&(window.clearInterval(this.notificationPollTimer),this.notificationPollTimer=null)}startNotificationClock(){this.notificationClockTimer||(this.notificationNow=Date.now(),this.notificationClockTimer=window.setInterval(()=>{this.notificationNow=Date.now(),this.forceUi()},6e4))}stopNotificationClock(){this.notificationClockTimer&&(window.clearInterval(this.notificationClockTimer),this.notificationClockTimer=null)}async markAllNotificationsRead(){if(!(!this.meId||this.notificationsActionBusy)){this.notificationsActionBusy=!0,this.notificationsError="",this.forceUi();try{let e=this.notifications.filter(i=>!i.read_at);if(!e.length){this.notificationsUnreadCount=0;return}await Promise.all(e.map(i=>this.notificationsService.markRead(i.id)));let t=new Date().toISOString();this.notifications=this.notifications.map(i=>i.read_at?i:q(R({},i),{read_at:t})),this.notificationsUnreadCount=0}catch(e){this.notificationsError=e?.message??String(e)}finally{this.notificationsActionBusy=!1,this.forceUi()}}}async markNotificationRead(e){if(!(!this.meId||!e||e.read_at))try{let{markNotificationRead:t}=await this.notificationsService.markRead(e.id);if(t){let i=new Date().toISOString();this.notifications=this.notifications.map(n=>n.id===e.id?q(R({},n),{read_at:i}):n),this.notificationsUnreadCount=Math.max(0,this.notificationsUnreadCount-1),this.forceUi()}}catch{}}looksLikeId(e){let t=e.trim();return t?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t):!1}parseNotificationDate(e){let t=String(e??"").trim();if(!t||this.looksLikeId(t))return null;let i=Date.parse(t);if(!Number.isFinite(i)){let n=t.includes("T")?t:t.replace(" ","T");i=Date.parse(n)}if(!Number.isFinite(i)){let n=Number(t);Number.isFinite(n)&&(i=n>1e12?n:n*1e3)}return Number.isFinite(i)?i:null}notificationActorName(e){let t=(e.actor?.display_name||e.actor?.username||"").trim();return!t||this.looksLikeId(t)?"Someone":t}notificationMessage(e){let t=(e.type||"").toLowerCase();return t==="follow"?"started following you.":t==="like"?"liked your post.":t==="comment"?"commented on your post.":t==="comment_like"?"liked your comment.":t==="comment_reply"?"replied to your comment.":t==="message"?"sent you a message.":t==="post"?"shared a post.":"sent you a notification."}openNotification(e){if(!e)return;this.markNotificationRead(e);let t=(e.type||"").toLowerCase();if(t==="follow"){let i=e.actor?.username?.trim()||e.actor_id;i&&this.router.navigate(["/user",i]);return}if(t==="message"&&e.entity_id){this.panel==="notifications"&&this.closePanel(),this.router.navigate(["/messages"],{queryParams:{c:e.entity_id}});return}(t==="like"||t==="comment"||t==="comment_like"||t==="comment_reply"||t==="post")&&e.entity_id&&this.navigateToNotificationPost(e.entity_id)}async navigateToNotificationPost(e){if(e)try{let t=await this.postsService.getPostById(e);if(!t)return;this.notificationFocusPostId=t.id,this.notificationFocusPost=t;let i=(t.country_code??"").toUpperCase(),n=(this.selectedCountry?.code??"").toUpperCase();if(this.panel==="notifications"&&this.closePanel(),n&&i&&n===i){this.setCountryTab("posts"),this.pendingPostId=t.id,this.tryScrollToPendingPost(),this.forceUi();return}let r=i?this.findCountryByRouteToken(i):null;if(!r)return;this.pendingPostId=t.id,this.closePanel({skipRouteUpdate:!0}),this.focusCountry(r,{tab:"posts",focusPostId:t.id,focusPost:t})}catch{}}tryOpenPendingNotificationPost(){if(!this.pendingNotificationPostId||!this.countriesReady||!this.globeReady)return;let e=this.pendingNotificationPostId;this.pendingNotificationPostId=null,this.navigateToNotificationPost(e)}formatDate(e){let t=this.parseNotificationDate(e);if(!t)return"Just now";let i=Math.max(0,this.notificationNow-t),n=Math.floor(i/6e4);if(n<1)return"Just now";if(n<60)return`${n}m`;let r=Math.floor(n/60);if(r<24)return`${r}h`;let _=Math.floor(r/24);return _<7?`${_}d`:new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}get messageBadgeCount(){return this.messagesUnreadCount}get bellBadgeCount(){return this.notificationsUnreadCount}visibilityLabel(e){let t=String(e||"").toLowerCase();return t==="private"?"Only me":t==="followers"?"Followers":"Public"}visibilityIcon(e){let t=String(e||"").toLowerCase();return t==="private"?"\u{1F512}":t==="followers"?"\u{1F465}":"\u{1F441}"}sortPostsAsc(e){return[...e].sort((t,i)=>{let n=new Date(t.created_at).getTime(),r=new Date(i.created_at).getTime();return n!==r?n-r:t.id.localeCompare(i.id)})}sortPostsDesc(e){return[...e].sort((t,i)=>{let n=new Date(t.created_at).getTime(),r=new Date(i.created_at).getTime();return n!==r?r-n:i.id.localeCompare(t.id)})}setComposerMediaMode(e){this.composerMediaMode!==e&&(this.composerMediaMode=e,this.clearComposerMedia())}onComposerMediaSelect(e){let t=e.target,i=Array.from(t.files??[]);if(!i.length)return;let n=this.composerMediaMode==="video"||this.composerMediaMode==="reel";if(i.some(m=>{let u=m.type.startsWith("image/"),y=m.type.startsWith("video/");return n?!y:!(u||y)})){this.composerMediaError=n?"Only videos are allowed for this mode.":"Only images or videos are allowed.",t.value="";return}if(this.composerMediaMode==="reel"&&i.length>1){this.composerMediaError="Reels can only contain one video.",t.value="";return}let _=i.find(m=>{let y=m.type.startsWith("video/")?40*1024*1024:12*1024*1024;return m.size>y});if(_){let m=_.type.startsWith("video/");this.composerMediaError=`File too large. Max ${m?"40MB":"12MB"}.`,t.value="";return}this.clearComposerMedia(),this.composerMediaFiles=i,this.composerMediaTypes=i.map(m=>m.type.startsWith("video/")?"video":"image"),new Set(this.composerMediaTypes).size===1?this.composerMediaType=this.composerMediaTypes[0]??null:this.composerMediaType="mixed",this.composerMediaPreviews=i.map(m=>URL.createObjectURL(m)),this.composerMediaPreview=this.composerMediaPreviews[0]??"",this.composerMediaError=""}clearComposerMedia(){for(let e of this.composerMediaPreviews)try{URL.revokeObjectURL(e)}catch{}this.composerMediaFiles=[],this.composerMediaPreviews=[],this.composerMediaTypes=[],this.composerMediaPreview="",this.composerMediaType=null,this.composerMediaError=""}async submitPost(){if(!this.profile||!this.meId){this.postComposerError="Sign in to share with your country.";return}if(!this.canPostHere){this.postComposerError="Switch to the country where you post from to post.";return}let e=this.newPostBody.trim(),t=this.composerMediaFiles.length>0;if(!e&&!t){this.postComposerError="Add text or media before posting.";return}let i=this.effectiveCountryCode,n=this.effectiveCountryName;if(!i||!n||n==="your country"){this.postComposerError="Profile country is missing.";return}this.postBusy=!0,this.postComposerError="",this.postFeedback="",this.forceUi();try{let r=null,_=null;if(this.composerMediaFiles.length){let m=[];for(let S of this.composerMediaFiles)m.push(await this.media.uploadPostMedia(S));let u=m.map(S=>S.publicUrl),y=this.composerMediaTypes.length?this.composerMediaTypes:this.composerMediaFiles.map(S=>S.type.startsWith("video/")?"video":"image");r=y.includes("video")?"video":"image",u.length>1||y.length>1||this.composerMediaMode==="reel"?_=JSON.stringify({urls:u,types:y,reel:this.composerMediaMode==="reel"}):_=u[0]??null}let v=await this.postsService.createPost({authorId:this.meId,title:this.newPostTitle.trim()||null,body:e,countryCode:i,countryName:n,cityName:this.profile?.city_name??null,mediaType:r,mediaUrl:_});this.newPostBody="",this.newPostTitle="",this.clearComposerMedia(),this.posts.some(m=>m.id===v.id)||(this.posts=this.sortPostsDesc([v,...this.posts])),this.composerOpen=!1,this.postFeedback=_?"Posted to Media (your country + followers feed).":"Shared with your country.",setTimeout(()=>{this.postFeedback="",this.cdr.detectChanges()},2e3)}catch(r){this.postComposerError=r?.message??String(r)}finally{this.postBusy=!1,this.forceUi()}}postMediaUrls(e){let t=String(e?.media_url||"").trim();if(!t)return[];if(t.startsWith("{")||t.startsWith("["))try{let i=JSON.parse(t);if(Array.isArray(i))return i.filter(Boolean).map(String);if(Array.isArray(i?.urls))return i.urls.filter(Boolean);if(i?.url)return[i.url]}catch{}return[t]}postMediaTypes(e){let t=String(e?.media_url||"").trim();if(!t)return[];if(t.startsWith("{")||t.startsWith("["))try{let i=JSON.parse(t);if(Array.isArray(i))return i.map(n=>this.inferMediaTypeFromUrl(n,e.media_type));if(Array.isArray(i?.types)&&i.types.length)return Array.isArray(i?.urls)&&i.urls.length?i.urls.map((n,r)=>{let _=i.types?.[r];return _==="video"||_==="image"?_:this.inferMediaTypeFromUrl(n,e.media_type)}):i.types.map(n=>n==="video"?"video":"image");if(Array.isArray(i?.urls))return i.urls.map(n=>this.inferMediaTypeFromUrl(n,e.media_type));if(i?.url)return[this.inferMediaTypeFromUrl(i.url,e.media_type)]}catch{}return[this.inferMediaTypeFromUrl(t,e.media_type)]}inferMediaTypeFromUrl(e,t){let i=String(e||"").toLowerCase();return/\.(mp4|webm|mov|m4v|avi|mkv)(\?|#|$)/.test(i)?"video":/\.(jpg|jpeg|png|gif|webp|avif)(\?|#|$)/.test(i)?"image":String(t||"").toLowerCase()==="video"?"video":"image"}postIsReel(e){let t=String(e?.media_url||"").trim();if(!t)return!1;if(t.startsWith("{")||t.startsWith("["))try{let n=JSON.parse(t)?.reel;return n===!0||n==="true"||n===1||n==="1"}catch{}return!1}postMediaIndexValue(e){return this.postMediaIndex[e.id]??0}onPostMediaScroll(e,t){let i=t?.target;if(!i)return;let n=i.clientWidth||1,r=Math.max(0,i.children.length-1),_=Math.round(i.scrollLeft/n);this.postMediaIndex[e.id]=Math.min(Math.max(_,0),r)}mediaTransform(e){return`translateX(-${this.postMediaIndexValue(e)*100}%)`}nextPostMedia(e,t){let i=this.postMediaIndexValue(e),n=Math.min(t-1,i+1);this.postMediaIndex[e.id]=n}prevPostMedia(e){let t=this.postMediaIndexValue(e),i=Math.max(0,t-1);this.postMediaIndex[e.id]=i}onPostVideoTap(e){this.postIsReel(e)&&this.openReels(e)}startPostEdit(e){if(!this.isAuthorSelf(e.author_id))return;this.openPostMenuId=null,this.confirmDeletePostId=null,this.editingPostId=e.id,this.editPostTitle=e.title??"",this.editPostBody=e.body??"";let t=e.visibility==="country"?"public":e.visibility;this.editPostVisibility=t==="followers"||t==="private"?t:"public",this.postEditError="",this.forceUi()}cancelPostEdit(){this.editingPostId=null,this.editPostTitle="",this.editPostBody="",this.editPostVisibility="public",this.postEditError="",this.openPostMenuId=null,this.confirmDeletePostId=null,this.forceUi()}async savePostEdit(e){if(!this.isAuthorSelf(e.author_id)||this.postEditBusy)return;let t=this.editPostBody.trim();if(!t){this.postEditError="Body is required.",this.forceUi();return}this.postEditBusy=!0,this.postEditError="",this.forceUi();try{let i=await this.postsService.updatePost(e.id,{title:this.editPostTitle.trim()||null,body:t,visibility:this.editPostVisibility});this.applyPostUpdate(i),this.cancelPostEdit()}catch(i){this.postEditError=i?.message??String(i)}finally{this.postEditBusy=!1,this.forceUi()}}togglePostMenu(e,t){t?.stopPropagation(),this.openPostMenuId===e?(this.openPostMenuId=null,this.confirmDeletePostId=null,this.reportingPostId=null):(this.openPostMenuId=e,this.confirmDeletePostId=null,this.reportingPostId=null),this.reportReason="",this.reportError="",this.reportFeedback="",this.forceUi()}requestPostDelete(e){this.isAuthorSelf(e.author_id)&&(this.confirmDeletePostId=e.id,this.reportingPostId=null,this.reportReason="",this.reportError="",this.reportFeedback="",this.forceUi())}cancelPostDelete(){this.confirmDeletePostId=null,this.forceUi()}async deletePost(e){if(!(!this.isAuthorSelf(e.author_id)||this.postEditBusy)){this.openPostMenuId=null,this.confirmDeletePostId=null,this.postEditBusy=!0,this.postEditError="",this.forceUi();try{await this.postsService.deletePost(e.id,{country_code:e.country_code??null,author_id:e.author_id??null})&&(this.posts=this.posts.filter(i=>i.id!==e.id),this.editingPostId===e.id&&this.cancelPostEdit())}catch(t){this.postEditError=t?.message??String(t)}finally{this.postEditBusy=!1,this.forceUi()}}}recordView(e){!e?.id||this.viewedPostIds.has(e.id)||(this.viewedPostIds.add(e.id),this.postsService.recordView(e),this.forceUi())}async togglePostLike(e){if(!this.meId||!e?.id){this.postActionError[e.id]="Sign in to like posts.",this.forceUi();return}if(!this.likeBusy[e.id]){this.likeBusy[e.id]=!0,this.postActionError[e.id]="",this.forceUi();try{let t=e.liked_by_me?await this.postsService.unlikePost(e.id):await this.postsService.likePost(e.id);this.applyPostUpdate(t),this.likeOpen[e.id]&&this.loadLikes(e.id)}catch(t){this.postActionError[e.id]=t?.message??String(t)}finally{this.likeBusy[e.id]=!1,this.forceUi()}}}toggleLikes(e){if(!e)return;let t=!this.likeOpen[e];this.likeOpen[e]=t,t&&!this.likeItems[e]&&!this.likeLoading[e]&&this.loadLikes(e),this.forceUi()}async sharePostToCountry(e,t){if(t?.stopPropagation?.(),!e?.id)return;if(!this.profile||!this.meId){this.postShareFeedback[e.id]="Sign in to share",this.forceUi();return}let i=this.effectiveCountryCode,n=this.effectiveCountryName;if(!i||!n){this.postShareFeedback[e.id]="Set your country to share",this.forceUi();return}if(this.postShareBusy[e.id])return;this.postShareBusy[e.id]=!0;let r=e.shared_post_id||e.id;try{await this.postsService.createPost({authorId:this.meId,title:null,body:"",countryName:n,countryCode:i,cityName:this.profile.city_name??null,visibility:"country",mediaType:"none",mediaUrl:null,thumbUrl:null,sharedPostId:r}),this.postShareFeedback[e.id]="Shared to your country"}catch(_){this.postShareFeedback[e.id]=_?.message??"Share failed"}finally{delete this.postShareBusy[e.id],this.forceUi(),window.setTimeout(()=>{this.postShareFeedback[e.id]&&(delete this.postShareFeedback[e.id],this.forceUi())},1800)}}async copyPostShareLink(e,t){if(t?.stopPropagation?.(),!e?.id)return;let i=this.buildPostShareUrl(e.id);try{await navigator.clipboard.writeText(i),this.postShareFeedback[e.id]="Link copied"}catch{this.postShareFeedback[e.id]="Copy failed"}this.forceUi(),window.setTimeout(()=>{this.postShareFeedback[e.id]&&(delete this.postShareFeedback[e.id],this.forceUi())},1600)}buildPostShareUrl(e){return`${window.location.origin||""}/post/${e}`}openSharedPost(e,t){if(t?.stopPropagation?.(),!e?.id)return;let i=e.shared_post_id||e.id;this.router.navigate(["/globe"],{queryParams:{post:i,tab:"posts",panel:null}})}async loadLikes(e){if(e){this.likeLoading[e]=!0,this.likeErrors[e]="",this.forceUi();try{let t=await this.postsService.listLikes(e,40);this.likeItems[e]=t}catch(t){this.likeErrors[e]=t?.message??String(t)}finally{this.likeLoading[e]=!1,this.forceUi()}}}toggleComments(e){if(!e)return;let t=!this.commentOpen[e];this.commentOpen[e]=t,t&&!this.commentItems[e]&&!this.commentLoading[e]&&this.loadComments(e),t||(this.commentReplyTarget[e]=null),this.forceUi()}async loadComments(e){if(e){this.commentLoading[e]=!0,this.commentErrors[e]="",this.forceUi();try{let t=await this.postsService.listComments(e,40);this.commentItems[e]=t,this.rebuildCommentThread(e)}catch(t){this.commentErrors[e]=t?.message??String(t)}finally{this.commentLoading[e]=!1,this.forceUi()}}}rebuildCommentThread(e){let t=this.commentItems[e]??[],i={},n=[];for(let m of t){let u=m.parent_id??"";u?(i[u]||(i[u]=[]),i[u].push(m)):n.push(m)}let r=[],_={},v=(m,u)=>{r.push(m),_[m.id]=u;let y=i[m.id]??[];for(let b of y)v(b,u+1)};for(let m of n)v(m,0);this.commentDisplay[e]=r,this.commentDepth[e]=_}applyCommentUpdate(e,t){let n=[...this.commentItems[e]??[]],r=n.findIndex(_=>_.id===t.id);r>=0?n[r]=R(R({},n[r]),t):n.push(t),this.commentItems[e]=n,this.rebuildCommentThread(e)}commentAuthorName(e){return e.author?.username||e.author?.display_name||"Member"}startCommentReply(e,t){!e||!t?.id||(this.commentReplyTarget[e]={commentId:t.id,authorName:this.commentAuthorName(t)},this.forceUi())}cancelCommentReply(e){e&&(this.commentReplyTarget[e]=null,this.forceUi())}async toggleCommentLike(e,t){if(!e||!t?.id)return;if(!this.meId){this.commentErrors[e]="Sign in to like comments.",this.forceUi();return}let i=R({},this.commentLikeBusy[e]??{});if(!i[t.id]){i[t.id]=!0,this.commentLikeBusy[e]=i,this.commentErrors[e]="",this.forceUi();try{let n=t.liked_by_me?await this.postsService.unlikeComment(t.id):await this.postsService.likeComment(t.id);this.applyCommentUpdate(e,n)}catch(n){this.commentErrors[e]=n?.message??String(n)}finally{this.commentLikeBusy[e]=q(R({},i),{[t.id]:!1}),this.forceUi()}}}async submitComment(e){if(!e?.id)return;if(!this.meId){this.commentErrors[e.id]="Sign in to comment.",this.forceUi();return}let t=(this.commentDrafts[e.id]??"").trim();if(!t){this.commentErrors[e.id]="Write something before commenting.",this.forceUi();return}if(!this.commentBusy[e.id]){this.commentBusy[e.id]=!0,this.commentErrors[e.id]="",this.forceUi();try{let i=this.commentReplyTarget[e.id]?.commentId??null,n=await this.postsService.addComment(e.id,t,i);this.applyCommentUpdate(e.id,n),this.commentDrafts[e.id]="",this.commentReplyTarget[e.id]=null;let r=q(R({},e),{comment_count:e.comment_count+1});this.applyPostUpdate(r)}catch(i){this.commentErrors[e.id]=i?.message??String(i)}finally{this.commentBusy[e.id]=!1,this.forceUi()}}}toggleReport(e){if(e){if(this.reportingPostId===e){this.cancelReport();return}this.reportingPostId=e,this.reportReason="",this.reportError="",this.reportFeedback="",this.confirmDeletePostId=null,this.forceUi()}}cancelReport(){this.reportingPostId=null,this.reportReason="",this.reportError="",this.reportFeedback="",this.forceUi()}async submitReport(e){if(!e?.id)return;if(!this.meId){this.reportError="Sign in to report posts.",this.forceUi();return}let t=this.reportReason.trim();if(!t){this.reportError="Tell us what is wrong.",this.forceUi();return}if(!this.reportBusy){this.reportBusy=!0,this.reportError="",this.reportFeedback="",this.forceUi();try{await this.postsService.reportPost(e.id,t),this.reportFeedback="Report sent.",this.reportReason="",setTimeout(()=>{this.reportingPostId===e.id&&(this.reportingPostId=null,this.openPostMenuId=null,this.reportFeedback="",this.forceUi())},900)}catch(i){this.reportError=i?.message??String(i)}finally{this.reportBusy=!1,this.forceUi()}}}isFollowingAuthor(e){return!!e&&this.followingIds.has(e)}isAuthorSelf(e){return!!e&&this.meId===e}openAuthorProfile(e,t){let i=t||e?.user_id||e?.username?.trim();i&&this.router.navigate(["/user",i])}openReels(e){if(!e)return;let t=e.country_code?.toUpperCase()||e.author?.country_code?.toUpperCase()||this.selectedCountry?.code?.toUpperCase();if(!t)return;let i=this.buildReelSeedPosts(e);this.router.navigate(["/reels",t],{queryParams:{postId:e.id},state:{seedPosts:i,seedCountry:t,countryName:this.selectedCountry?.name||e.country_name||null}})}buildReelSeedPosts(e){let t=[this.visibleMediaPosts,this.visiblePosts,this.visibleFollowingPosts].filter(m=>Array.isArray(m)&&m.length),n=(t.length?t[0]:[]).filter(m=>m.media_type==="video"&&!!m.media_url&&this.postIsReel(m)),r=[e,...n],_=new Set,v=[];for(let m of r)if(!(!m?.id||_.has(m.id))&&(_.add(m.id),v.push(m),v.length>=50))break;return v}followBusyFor(e){return this.followBusyMap.get(e)===!0}async toggleFollowAuthor(e){if(!(!this.meId||!e||this.meId===e)&&!this.followBusyFor(e)){this.followBusyMap.set(e,!0),this.forceUi();try{this.followingIds.has(e)?(await this.followService.unfollow(this.meId,e),this.followingIds.delete(e),this.postFeedback="Unfollowed"):(await this.followService.follow(this.meId,e),this.followingIds.add(e),this.postFeedback="Following"),setTimeout(()=>{this.postFeedback="",this.cdr.detectChanges()},2e3)}catch(t){this.postComposerError=t?.message??String(t)}finally{this.followBusyMap.delete(e),this.forceUi()}}}async refreshFollowingSnapshot(){if(!this.meId){this.followingIds.clear();return}try{let e=await this.followService.listFollowingIds(this.meId);this.followingIds=new Set(e),this.cdr.detectChanges()}catch(e){console.warn("following snapshot failed",e)}}startLocationRefresh(){this.locationRefreshTimer||!this.meId||!this.profile||(this.refreshLocationIfMoved(),this.locationRefreshTimer=window.setInterval(()=>{this.refreshLocationIfMoved()},this.LOCATION_REFRESH_MS))}async refreshLocationIfMoved(){if(!(this.locationRefreshInFlight||!this.meId||!this.profile)){this.locationRefreshInFlight=!0;try{let e=await this.location.detectViaGpsThenServer(9e3);if(!e)return;let t=String(e.countryCode??"").trim().toUpperCase(),i=String(e.countryName??"").trim(),n=String(e.cityName??"").trim(),r=String(this.profile?.country_code??"").trim().toUpperCase(),_=String(this.profile.country_name??"").trim(),v=String(this.profile?.city_name??"").trim(),m={};if(t&&t!==r&&(m.country_code=t),i&&i.toLowerCase()!=="unknown"&&i.toLowerCase()!==_.toLowerCase()&&(m.country_name=i),n&&n.toLowerCase()!==v.toLowerCase()&&(m.city_name=n),!Object.keys(m).length)return;let u=await this.profiles.updateProfile(m);this.profile=u.updateProfile,this.canPostHere||(this.composerOpen=!1),await this.presence.setMyLocation(this.profile?.country_code??null,this.profile.country_name??null,this.profile?.city_name??null),this.forceUi()}catch(e){console.warn("location refresh failed",e)}finally{this.locationRefreshInFlight=!1}}}onUserSearchInput(e){this.userSearchTerm=e,this.userSearchError="",this.scheduleUserSuggestionRefresh()}onUnifiedSearchInput(e){if(this.activeTab==="people"){this.onUserSearchInput(e);return}this.onCountrySearchInput(e)}scheduleUserSuggestionRefresh(){this.userSuggestionTimer&&(window.clearTimeout(this.userSuggestionTimer),this.userSuggestionTimer=null);let e=this.userSearchTerm.trim();if(!e){this.userSuggestions=[],this.userSearchError="",this.forceUi();return}this.userSuggestionTimer=window.setTimeout(()=>{this.userSuggestionTimer=null,this.refreshUserSuggestions(e)},260)}async refreshUserSuggestions(e){if(!e){this.userSuggestions=[],this.forceUi();return}this.userSuggestionsLoading=!0,this.forceUi();try{let{searchProfiles:t}=await this.profiles.searchProfiles(e,7);this.userSuggestions=t??[],this.userSuggestions.length?this.userSearchError="":this.userSearchError="No matches yet."}catch(t){this.userSuggestions=[],this.userSearchError=t?.message??"Unable to load suggestions."}finally{this.userSuggestionsLoading=!1,this.forceUi()}}onUserSearchKeydown(e){if(e.key==="Enter"){if(e.preventDefault(),!this.userSuggestions.length){this.userSearchTerm.trim()&&(this.userSearchError="No matches yet.",this.forceUi());return}this.selectUserSuggestion(this.userSuggestions[0])}}handleSearchKeydown(e){if(this.activeTab==="people"){this.onUserSearchKeydown(e);return}e.key==="Enter"&&(e.preventDefault(),this.visitCountry())}selectUserSuggestion(e){if(!e)return;this.userSuggestionTimer&&(window.clearTimeout(this.userSuggestionTimer),this.userSuggestionTimer=null);let t=e.username?.trim()||e.user_id;if(!t){this.userSearchError="Profile is missing routing info.",this.forceUi();return}this.userSearchTerm="",this.userSuggestions=[],this.userSearchError="",this.forceUi(),this.router.navigate(["/user",t])}isUserOnline(e){return e?this.onlineIds.has(e):!1}setActiveTab(e){this.activeTab!==e&&(this.activeTab=e,this.userSuggestions=[],this.countrySuggestions=[],this.userSearchError="",e==="people"?this.scheduleUserSuggestionRefresh():this.updateCountrySuggestions(this.countrySearchTerm),this.forceUi())}onCountrySearchInput(e){this.countrySearchTerm=e,this.updateCountrySuggestions(e)}updateCountrySuggestions(e){let t=(e||"").trim();if(!t||!this.countriesReady){this.countrySuggestions=[],this.forceUi();return}this.countrySuggestions=this.search.prefixSuggest(this.ui.countries,t,6),this.forceUi()}visitCountry(){if(!this.canVisitCountry())return;let e=this.search.bestCandidateForSearch(this.ui.countries,this.countrySearchTerm,this.countrySuggestions,-1);if(!e){this.countrySuggestions=[],this.forceUi();return}this.focusCountry(e)}canVisitCountry(){return this.countriesReady&&!!this.countrySearchTerm.trim()}tryApplyPendingRouteState(){if(!this.pendingRouteState||this.pendingRouteState.country&&(!this.countriesReady||!this.globeReady))return;let e=this.pendingRouteState;this.pendingRouteState=null,this.applyRouteState(e),this.tryOpenPendingNotificationPost()}applyRouteState(e){this.applyingRouteState=!0;try{let t=e.country;if(t){let i=this.findCountryByRouteToken(t);if(i){let n=e.tab??"posts";!this.selectedCountry||this.selectedCountry.id!==i.id?this.focusCountry(i,{tab:n,skipRouteUpdate:!0}):e.tab&&e.tab!==this.countryTab&&this.setCountryTab(e.tab,{skipRouteUpdate:!0})}else this.selectedCountry&&this.clearSelectedCountry({skipRouteUpdate:!0})}else this.selectedCountry&&this.clearSelectedCountry({skipRouteUpdate:!0});e.panel?this.panel!==e.panel&&this.openPanel(e.panel,{skipRouteUpdate:!0}):this.panel&&this.closePanel({skipRouteUpdate:!0})}finally{this.applyingRouteState=!1,this.lastSyncedRouteState=e}}updateRouteState(){if(this.applyingRouteState)return;let e=this.buildCurrentRouteState();if(this.routeStatesEqual(e,this.lastSyncedRouteState))return;this.lastSyncedRouteState=e;let t={country:e.country??null,tab:e.tab??null,panel:e.panel??null};this.router.navigate([],{relativeTo:this.route,queryParams:t,replaceUrl:!0})}buildCurrentRouteState(){let e=this.selectedCountry?.code?String(this.selectedCountry.code).toUpperCase():null,t=!e&&this.selectedCountry?String(this.selectedCountry.id):null;return{country:e??t,tab:this.selectedCountry?this.countryTab:null,panel:this.panel??null}}routeStatesEqual(e,t){return(e.country??null)===(t.country??null)&&(e.tab??null)===(t.tab??null)&&(e.panel??null)===(t.panel??null)}normalizeRouteState(e){let t=e.country?.trim()??null,i=t?t.toUpperCase():null,n=e.tab?.trim().toLowerCase()??null,r=this.isValidTab(n)?n:null,_=e.panel?.trim().toLowerCase()??null,v=this.isValidPanel(_)?_:null;return{country:i,tab:r,panel:v}}isValidTab(e){return e==="posts"||e==="stats"||e==="media"||e==="following"}isValidPanel(e){return e==="presence"||e==="posts"||e==="notifications"}findCountryByRouteToken(e){let t=e.trim();if(!t)return null;let i=t.toUpperCase(),n=this.ui.countries.find(_=>(_.code??"").toUpperCase()===i);if(n)return n;let r=Number(t);return Number.isFinite(r)?this.ui.countries.find(_=>_.id===r)??null:null}toggleSearch(){this.router.navigate(["/search"])}closeSearch(){this.searchOpen&&(this.searchOpen=!1,this.forceUi())}toggleMenu(){if(this.menuOpen){this.menuOpen=!1,this.forceUi();return}this.menuOpen=!0,this.searchOpen=!1,this.closePanel(),this.forceUi()}closeMenu(){this.menuOpen=!1}goToMe(){this.closeMenu(),this.closePanel(),this.closeSearch(),this.router.navigate(["/me"])}goToMessages(){this.closeMenu(),this.closePanel(),this.closeSearch(),this.push.enableFromUserGesture(),this.router.navigate(["/messages"])}openPanel(e,t){if(this.panel===e){this.closePanel(t);return}this.panel=e,this.menuOpen=!1,this.searchOpen=!1,this.msg="",this.saveState="idle",e==="notifications"&&(this.push.enableFromUserGesture(),this.refreshNotifications(),this.refreshBadgeCounts(),this.startNotificationClock()),this.forceUi(),t?.skipRouteUpdate||this.updateRouteState()}closePanel(e){if(!this.panel)return;let t=this.panel==="notifications";this.panel=null,this.adjustingAvatar=!1,this.dragging=!1,this.msg="",this.saveState="idle",this.avatarPreviewOpen=!1,this.forceUi(),t&&this.stopNotificationClock(),e?.skipRouteUpdate||this.updateRouteState()}startClock(){this.updateClockLabel(),this.clockTimer&&window.clearInterval(this.clockTimer),this.clockTimer=window.setInterval(()=>this.updateClockLabel(),1e3)}updateClockLabel(){let e=this.computeLocalTime();this.clockLabel=this.formatClock(e),this.forceUi()}computeLocalTime(){let e=String(this.profile?.country_code??"").trim().toUpperCase(),t=this.ui.countries.find(m=>String(m.code??"").toUpperCase()===e)||null,n=(this.selectedCountry||t)?.center?.lng;if(n==null||Number.isNaN(Number(n)))return new Date;let r=Math.round(Number(n)/15*4)/4,_=new Date,v=_.getTime()+_.getTimezoneOffset()*6e4;return new Date(v+r*60*6e4)}formatClock(e){let t=_=>String(_).padStart(2,"0"),i=e.getFullYear(),n=t(e.getMonth()+1);return`${t(e.getDate())}.${n}.${i}`}openAvatarPreview(){this.draftAvatarUrl&&(this.avatarPreviewOpen=!0,this.forceUi())}closeAvatarPreview(){this.avatarPreviewOpen=!1,this.forceUi()}toggleAdjustAvatar(){this.draftAvatarUrl&&(this.adjustingAvatar=!this.adjustingAvatar,this.forceUi())}resetAvatarPosition(){this.draftNormX=0,this.draftNormY=0,this.forceUi()}onAvatarDragStart(e){if(!this.adjustingAvatar||!this.draftAvatarUrl)return;this.dragging=!0,this.startX=e.clientX,this.startY=e.clientY;let t=this.maxOffset(this.EDIT_SIZE,this.EDIT_SCALE);this.basePxX=this.draftNormX*t,this.basePxY=this.draftNormY*t,e.target.setPointerCapture?.(e.pointerId);let i=r=>this.onAvatarDragMove(r),n=()=>this.onAvatarDragEnd(i,n);window.addEventListener("pointermove",i,{passive:!0}),window.addEventListener("pointerup",n,{passive:!0}),this.forceUi()}onAvatarDragMove(e){if(!this.dragging)return;let t=e.clientX-this.startX,i=e.clientY-this.startY,n=this.maxOffset(this.EDIT_SIZE,this.EDIT_SCALE),r=_=>Math.max(-n,Math.min(n,_));this.pendingPxX=r(this.basePxX+t),this.pendingPxY=r(this.basePxY+i),this.raf||(this.raf=requestAnimationFrame(()=>{this.draftNormX=this.clampNorm(n?this.pendingPxX/n:0),this.draftNormY=this.clampNorm(n?this.pendingPxY/n:0),this.raf=0}))}onAvatarDragEnd(e,t){this.dragging=!1,window.removeEventListener("pointermove",e),window.removeEventListener("pointerup",t),this.forceUi()}async cropAvatarToSquare(e){let t=(e.type||"").toLowerCase();if(t==="image/gif")throw new Error("GIF avatars are disabled for now.");if(!t.startsWith("image/"))throw new Error("Please choose an image file.");let i=t==="image/png"||t==="image/webp"?"image/png":"image/jpeg",n=i==="image/png"?"png":"jpg",r=await createImageBitmap(e),_=Math.min(r.width,r.height),v=Math.floor((r.width-_)/2),m=Math.floor((r.height-_)/2),u=document.createElement("canvas");u.width=this.AVATAR_OUT_SIZE,u.height=this.AVATAR_OUT_SIZE;let y=u.getContext("2d",{alpha:!0});if(!y)throw new Error("Canvas not supported.");y.imageSmoothingEnabled=!0,y.imageSmoothingQuality="high",y.clearRect(0,0,u.width,u.height),y.drawImage(r,v,m,_,_,0,0,u.width,u.height),r.close?.();let b=await new Promise((S,E)=>{u.toBlob(T=>T?S(T):E(new Error("Failed to crop image.")),i,i==="image/jpeg"?.92:void 0)});return new File([b],`avatar.${n}`,{type:i})}async onAvatar(e){let t=e.target,i=t.files?.[0];if(i){this.msg="",this.uploadingAvatar=!0,this.forceUi();try{let n=await this.cropAvatarToSquare(i),_=(await this.media.uploadAvatar(n))?.url;if(!_)throw new Error("Upload succeeded but returned no URL.");this.draftAvatarUrl=_,this.preloadImage(_),this.draftNormX=0,this.draftNormY=0,this.msg="Uploaded. Press SAVE to apply."}catch(n){this.msg=n?.message??String(n)}finally{this.uploadingAvatar=!1,t.value="",this.forceUi()}}}async saveProfileAndClose(){this.msg="",this.saveState="saving",this.forceUi();try{let e=this.editDisplayName.trim(),t=this.editBio.trim();if(!e)throw new Error("Display name is required.");let i=await this.profiles.updateProfile({display_name:e,bio:t?t.slice(0,160):null,avatar_url:this.draftAvatarUrl||null});this.profile=i.updateProfile,this.nodeAvatarUrl=this.normalizeAvatarUrl(this.profile?.avatar_url??""),this.nodeNormX=this.draftNormX,this.nodeNormY=this.draftNormY,this.nodeAvatarUrl&&this.preloadImage(this.nodeAvatarUrl);try{await this.presence.setMyLocation(this.profile?.country_code??null,this.profile?.country_name??null,this.profile?.city_name??null)}catch{}this.saveState="saved",this.forceUi(),window.setTimeout(()=>{this.zone.run(()=>this.closePanel())},220)}catch(e){this.msg=e?.message??String(e),this.saveState="idle",this.forceUi()}}async logout(){this.presence.stop(),await this.auth.logout(),await this.router.navigateByUrl("/auth")}preloadImage(e){let t=new Image;t.decoding="async",t.loading="eager",t.src=e}normalizeAvatarUrl(e){let t=String(e||"").trim();if(!t)return"";if(/^https?:\/\//i.test(t)||t.startsWith("data:")||t.startsWith("blob:")||t.startsWith("/")||t.includes("/storage/v1/object/"))return t;let i=t.replace(/^\/+/,"");return`${Ct}/storage/v1/object/public/avatars/${i}`}forceUi(){this.zone.run(()=>this.cdr.detectChanges())}static \u0275fac=function(t){return new(t||o)(I(wt),I(it),I(nt),I(ot),I(Pt),I(Rt),I(yt),I(bt),I(Vt),I(St),I(Nt),I(zt),I(Bt),I(Dt),I(Wt),I(At),I($t),I(Ht),I(lt),I(_t))};static \u0275cmp=ct({type:o,selectors:[["app-globe-page"]],hostVars:4,hostBindings:function(t,i){t&2&&M("search-open",i.searchOpen)("country-open",!!i.selectedCountry)},decls:12,vars:14,consts:[["postListTpl",""],["composerMediaInput",""],["reportMenu",""],["mediaGallery",""],["commentSignIn",""],["class","top-overlay",3,"search-open","click",4,"ngIf"],["aria-hidden","true",1,"space-backdrop"],["class","globe-logo","type","button",3,"click",4,"ngIf"],["id","globe",1,"globe-bg"],[1,"stage"],["class","map-pane",4,"ngIf"],["class","main-pane",4,"ngIf"],["class","node-backdrop",3,"click",4,"ngIf"],["class","lightbox","role","dialog","aria-modal","true",3,"click",4,"ngIf"],["class","notif-hub",3,"click",4,"ngIf"],["class","overlay",3,"click",4,"ngIf"],[1,"top-overlay",3,"click"],[1,"overlay-inner"],[1,"travel-title"],["class","search-control",4,"ngIf"],[1,"search-control"],["type","text","placeholder","Type a country...","autocomplete","off","name","globalSearch",3,"ngModelChange","keydown","ngModel"],["class","country-suggestions",4,"ngIf"],[1,"country-suggestions"],["class","country-option","role","button","tabindex","0",3,"click","keyup.enter",4,"ngFor","ngForOf"],["role","button","tabindex","0",1,"country-option",3,"click","keyup.enter"],["type","button",1,"globe-logo",3,"click"],["src","/logo.png?v=3","alt","Matterya logo"],[1,"map-pane"],[1,"map-glass"],[1,"main-pane"],[1,"main-card","white-card"],[1,"feed-top"],[1,"main-head"],[1,"mh-text"],[1,"mh-title-row"],["type","button","aria-label","Back to globe",1,"feed-logo",3,"click"],[1,"mh-title"],["class","feed-return","type","button",3,"click",4,"ngIf"],[1,"mh-sub"],["class","mh-clock",4,"ngIf"],[1,"mh-country-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"tabs"],[1,"tab",3,"click"],[1,"tab-body",3,"scroll"],[3,"ngSwitch"],["class","posts-pane",4,"ngSwitchCase"],["class","stats-pane",4,"ngSwitchCase"],["type","button",1,"feed-return",3,"click"],[1,"mh-clock"],[3,"value"],[1,"posts-pane"],["class","composer",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"composer"],[1,"composer-row"],[1,"composer-avatar"],["alt","me",3,"src",4,"ngIf"],["class","composer-initials",4,"ngIf"],[1,"composer-main"],[1,"composer-top"],[1,"composer-title"],["class","composer-hint",4,"ngIf"],[1,"composer-cta"],["class","flat-action ghost","type","button",3,"click",4,"ngIf"],["class","flat-action","type","button",3,"click",4,"ngIf"],["class","composer-trigger","type","button",3,"click",4,"ngIf"],["class","composer-note",4,"ngIf"],[4,"ngIf"],["class","composer-actions",4,"ngIf"],["alt","me",3,"src"],[1,"composer-initials"],[1,"composer-hint"],["type","button",1,"flat-action","ghost",3,"click"],["type","button",1,"flat-action",3,"click"],["type","button",1,"composer-trigger",3,"click"],[1,"composer-note"],["placeholder","Add a headline (optional)",1,"composer-input",3,"ngModelChange","ngModel"],["rows","3","maxlength","5000",1,"composer-textarea",3,"ngModelChange","placeholder","ngModel"],[1,"composer-media"],["type","file",2,"display","none",3,"change"],[1,"composer-type"],["type","button",1,"type-chip",3,"click"],[1,"composer-media-actions"],["class","flat-action danger","type","button",3,"click",4,"ngIf"],["class","composer-media-name",4,"ngIf"],["class","composer-media-error",4,"ngIf"],["class","composer-media-preview",4,"ngIf"],["type","button",1,"flat-action","danger",3,"click"],[1,"composer-media-name"],[1,"composer-media-error"],[1,"composer-media-preview"],[1,"composer-preview-strip"],["class","composer-preview-item",4,"ngFor","ngForOf"],[1,"composer-preview-item"],["alt","media preview",3,"src",4,"ngIf"],["muted","","playsinline","",3,"src",4,"ngIf"],["alt","media preview",3,"src"],["muted","","playsinline","",3,"src"],[1,"composer-actions"],["type","button",1,"btn",3,"click","disabled"],["class","composer-status",3,"error",4,"ngIf"],[1,"composer-status"],[1,"posts-state","hint"],["class","posts-state",4,"ngIf"],["class","posts-state error",4,"ngIf"],["class","posts-list",4,"ngIf"],[1,"posts-state"],[1,"posts-state","error"],[1,"posts-list"],["class","posts-empty",4,"ngIf"],["class","post-card",3,"media","post-highlight",4,"ngFor","ngForOf","ngForTrackBy"],["class","load-more","type","button",3,"click",4,"ngIf"],[1,"posts-empty"],[1,"post-card"],[1,"post-author"],["role","button","tabindex","0",1,"author-core",3,"click","keyup.enter"],[1,"author-avatar"],["alt","avatar",3,"src",4,"ngIf"],["class","author-initials",4,"ngIf"],[1,"author-info"],[1,"author-name"],[1,"author-meta"],["class","post-visibility",4,"ngIf"],["class","follow-chip","type","button",3,"following","disabled","click",4,"ngIf"],["class","post-menu",3,"click",4,"ngIf"],["class","post-body",4,"ngIf"],["class","post-shared",4,"ngIf"],["class","post-media",4,"ngIf"],["class","post-caption post-text",3,"clamped","click",4,"ngIf"],["class","post-actions",4,"ngIf"],["class","post-action-error",4,"ngIf"],["class","post-likes",4,"ngIf"],["class","post-comments",4,"ngIf"],["class","post-edit",4,"ngIf"],["alt","avatar",3,"src"],[1,"author-initials"],[1,"post-visibility"],["type","button",1,"follow-chip",3,"click","disabled"],[1,"post-menu",3,"click"],[1,"post-visibility-icon"],["type","button","aria-label","Post options",1,"post-menu-trigger",3,"click"],["class","post-menu-dropdown",4,"ngIf"],[1,"post-menu-dropdown"],[4,"ngIf","ngIfElse"],["type","button",1,"menu-item",3,"click"],["type","button",1,"menu-item","danger",3,"click"],["class","menu-confirm",4,"ngIf"],[1,"menu-confirm"],[1,"menu-confirm-title"],[1,"menu-confirm-actions"],["type","button",1,"menu-item","ghost",3,"click"],["class","menu-report",4,"ngIf"],[1,"menu-report"],["rows","2","maxlength","2000","placeholder","Tell us what is wrong",1,"menu-report-input",3,"ngModelChange","ngModel"],["type","button",1,"menu-item","danger",3,"click","disabled"],["class","menu-report-error",4,"ngIf"],["class","menu-report-success",4,"ngIf"],[1,"menu-report-error"],[1,"menu-report-success"],[1,"post-body"],["class","post-title",4,"ngIf"],["class","post-text",3,"clamped","click",4,"ngIf"],[1,"post-title"],[1,"post-text",3,"click"],["class","see-more inline","type","button",3,"click",4,"ngIf"],["type","button",1,"see-more","inline",3,"click"],[1,"post-shared"],[1,"shared-label"],["role","button","tabindex","0",1,"shared-card",3,"click","keyup.enter"],[1,"shared-author"],[1,"shared-avatar"],["class","shared-initials",4,"ngIf"],[1,"shared-info"],[1,"shared-name"],[1,"shared-meta"],["class","shared-title",4,"ngIf"],["class","shared-body",4,"ngIf"],["class","shared-media",4,"ngIf"],[1,"shared-initials"],[1,"shared-title"],[1,"shared-body"],[1,"shared-media"],["alt","shared media",3,"src",4,"ngIf"],["class","shared-video",4,"ngIf"],["alt","shared media",3,"src"],[1,"shared-video"],["alt","video thumbnail",3,"src",4,"ngIf"],[1,"shared-video-tag"],["alt","video thumbnail",3,"src"],[1,"post-media"],["class","zoomable","alt","post media",3,"src","click",4,"ngIf"],[3,"src","tapBehavior","viewed","videoTap",4,"ngIf"],["alt","post media",1,"zoomable",3,"click","src"],[3,"viewed","videoTap","src","tapBehavior"],[1,"media-gallery"],[1,"media-strip",3,"scroll"],["class","media-item",4,"ngFor","ngForOf"],[1,"media-dots"],[3,"active",4,"ngFor","ngForOf"],[1,"media-count"],[1,"media-item"],[1,"post-caption","post-text",3,"click"],[1,"post-actions"],[1,"post-action-group"],["type","button",1,"post-action","like",3,"click","disabled"],[1,"icon"],["type","button",1,"post-action","count",3,"click"],[1,"count"],["type","button",1,"post-action","comment",3,"click"],["type","button","aria-label","Share to your country",1,"post-action","share",3,"click"],["class","post-share-feedback",4,"ngIf"],["aria-label","Views",1,"post-action","view"],[1,"post-share-feedback"],[1,"post-action-error"],[1,"post-likes"],["class","like-status",4,"ngIf"],["class","like-status error",4,"ngIf"],["class","like-list",4,"ngIf"],[1,"like-status"],[1,"like-status","error"],[1,"like-list"],["class","like-empty",4,"ngIf"],["class","like-row","type","button",3,"click",4,"ngFor","ngForOf"],[1,"like-empty"],["type","button",1,"like-row",3,"click"],[1,"like-avatar"],["class","like-initials",4,"ngIf"],[1,"like-body"],[1,"like-name"],[1,"like-handle"],[1,"like-time"],[1,"like-initials"],[1,"post-comments"],["class","comment-status",4,"ngIf"],["class","comment-status error",4,"ngIf"],["class","comment-list",4,"ngIf"],["class","comment-compose",4,"ngIf","ngIfElse"],[1,"comment-status"],[1,"comment-status","error"],[1,"comment-list"],["class","comment-empty",4,"ngIf"],["class","comment",3,"marginLeft",4,"ngFor","ngForOf"],[1,"comment-empty"],[1,"comment"],[1,"comment-avatar"],["class","comment-initials",4,"ngIf"],[1,"comment-body"],[1,"comment-meta"],[1,"comment-name"],[1,"comment-time"],[1,"comment-text"],[1,"comment-actions"],["type","button",1,"comment-action",3,"click","disabled"],["class","comment-heart","aria-hidden","true",4,"ngIf"],["class","comment-heart active","aria-hidden","true",4,"ngIf"],["class","comment-like-count",4,"ngIf"],[1,"comment-initials"],["aria-hidden","true",1,"comment-heart"],["aria-hidden","true",1,"comment-heart","active"],[1,"comment-like-count"],[1,"comment-compose"],["class","comment-reply",4,"ngIf"],["placeholder","Write a comment",1,"comment-input",3,"ngModelChange","disabled","ngModel"],["type","button",1,"comment-submit",3,"click","disabled"],[1,"comment-reply"],["type","button",1,"ghost-link",3,"click"],[1,"comment-hint"],[1,"post-edit"],["placeholder","Edit title",1,"post-edit-title",3,"ngModelChange","ngModel"],["rows","3","maxlength","5000",1,"post-edit-body",3,"ngModelChange","ngModel"],[1,"post-edit-footer"],[1,"post-edit-visibility",3,"ngModelChange","ngModel"],["value","public"],["value","followers"],["value","private"],[1,"post-edit-actions"],["type","button",1,"pill-link","ghost",3,"click","disabled"],["type","button",1,"pill-link",3,"click","disabled"],["class","post-edit-error",4,"ngIf"],[1,"post-edit-error"],["type","button",1,"load-more",3,"click"],[1,"stats-pane"],[1,"stats-card"],[1,"stats-title"],[1,"stats-row"],["class","stats-card mood-card",4,"ngIf"],["class","stats-card",4,"ngIf"],["id","heartbeatState"],["id","authState"],["class","stats-row muted",4,"ngIf"],["class","stats-row error",4,"ngIf"],[1,"stats-card","mood-card"],[1,"mood-bars"],[1,"mood-seg","positive"],[1,"mood-seg","neutral"],[1,"mood-seg","negative"],[1,"mood-legend"],[1,"positive"],[1,"neutral"],[1,"negative"],["class","topic-row",4,"ngIf"],["class","mood-insight",4,"ngIf"],[1,"topic-row"],["class","topic-chip",4,"ngFor","ngForOf"],[1,"topic-chip"],[1,"mood-insight"],[1,"stats-row","muted"],[1,"stats-row","error"],[1,"node-backdrop",3,"click"],["role","dialog","aria-modal","true",1,"lightbox",3,"click"],[1,"lightbox-frame",3,"click"],["type","button","aria-label","Close",1,"lightbox-close",3,"click"],["alt","Expanded media",3,"src"],[1,"notif-hub",3,"click"],[1,"node-menu","notif-menu"],[1,"node-head"],[1,"node-title"],[1,"node-sub2"],[1,"notif-actions"],["type","button",1,"ghost",3,"click","disabled"],["class","notif-state",4,"ngIf"],["class","notif-state error",4,"ngIf"],["class","notif-list",4,"ngIf"],[1,"node-foot"],["type","button",1,"ghost",3,"click"],[1,"notif-state"],[1,"notif-state","error"],[1,"notif-list"],["class","notif-empty",4,"ngIf"],["class","notif-item","type","button",3,"click",4,"ngFor","ngForOf"],[1,"notif-empty"],["type","button",1,"notif-item",3,"click"],[1,"notif-avatar"],[1,"notif-body"],[1,"notif-line"],[1,"notif-name"],[1,"notif-text"],[1,"notif-time"],["class","notif-unread",4,"ngIf"],[1,"notif-unread"],[1,"overlay",3,"click"],[1,"panel",3,"click"],[1,"panel-head"],[1,"panel-title"],["type","button",1,"x",3,"click"],["class","panel-body",4,"ngIf"],[1,"panel-body"],[1,"presence-box"],[1,"presence-line"],[1,"k"],[1,"v"]],template:function(t,i){t&1&&(h(0,oe,5,3,"div",5),k(1,"div",6),h(2,re,2,0,"button",7),k(3,"div",8),l(4,"div",9),h(5,ae,2,0,"div",10)(6,vn,33,20,"div",11),c(),h(7,xn,1,0,"div",12)(8,bn,5,1,"div",13)(9,En,16,5,"div",14)(10,Un,9,3,"div",15),k(11,"app-bottom-tabs")),t&2&&(d("ngIf",i.searchOpen),a(2),d("ngIf",!i.selectedCountry),a(),M("bg-static",!!i.selectedCountry),a(),M("focus",!!i.selectedCountry)("feed-full",i.countryFeedFull),a(),d("ngIf",i.selectedCountry),a(),d("ngIf",i.selectedCountry),a(),d("ngIf",i.panel==="notifications"),a(),d("ngIf",i.lightboxUrl),a(),d("ngIf",i.panel==="notifications"),a(),d("ngIf",i.panel&&i.panel!=="notifications"))},dependencies:[xt,ut,mt,ht,gt,ft,Ft,Ot,Tt,Mt,Et,kt,Ut,It,Gt,Lt,vt],styles:['[_nghost-%COMP%]{--safe-top: env(safe-area-inset-top, 0px);--safe-right: env(safe-area-inset-right, 0px);--safe-left: env(safe-area-inset-left, 0px);--safe-bottom: env(safe-area-inset-bottom, 0px);--ui-edge: 16px;--ui-edge-top: calc(var(--ui-edge) + var(--safe-top));--ui-edge-right: calc(var(--ui-edge) + var(--safe-right));--ui-edge-left: calc(var(--ui-edge) + var(--safe-left));--ui-edge-bottom: calc(var(--ui-edge) + var(--safe-bottom));--node-size: 44px;--ui-gap: 16px;--top-overlay-height-open: 76px;--top-overlay-height-closed: 0px;--top-overlay-height: var(--top-overlay-height-open);--top-overlay-bottom: calc(var(--ui-edge-bottom) + var(--tabs-height, 64px) + 10px);--stage-top-pad-open: var(--stage-top-pad-closed);--stage-top-pad-closed: calc(var(--ui-edge-top) + var(--node-size) + 8px);--stage-top-pad: var(--stage-top-pad-open)}[_nghost-%COMP%]:not(.search-open){--top-overlay-height: var(--top-overlay-height-closed);--stage-top-pad: var(--stage-top-pad-closed)}.country-open[_nghost-%COMP%]{--stage-top-pad: var(--safe-top)}.space-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:0;width:100%;height:100%;background:#000;pointer-events:none}.globe-logo[_ngcontent-%COMP%]{position:fixed;top:var(--ui-edge-top);left:var(--ui-edge-left);z-index:6;pointer-events:auto;width:var(--node-size);height:var(--node-size);padding:0;box-sizing:border-box;display:flex;align-items:center;justify-content:center;background:#080c12a6;border-radius:50%;border:0;cursor:pointer}.globe-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:var(--node-size);height:var(--node-size);object-fit:contain;border-radius:10px;box-shadow:none}.feed-logo[_ngcontent-%COMP%]{width:calc(var(--node-size) - 4px);height:calc(var(--node-size) - 4px);display:grid;place-items:center;border:0;padding:0;background:transparent!important;box-shadow:none;cursor:pointer;flex:0 0 auto}.feed-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;border-radius:8px;background:transparent;box-shadow:none}.build-tag-corner[_ngcontent-%COMP%]{position:fixed;right:var(--ui-edge-right);bottom:calc(var(--ui-edge-bottom) + var(--tabs-height, 64px));z-index:11000;font-size:10px;letter-spacing:.18em;text-transform:uppercase;color:#fffc;background:#060e1ab3;border:1px solid rgba(255,255,255,.2);padding:4px 8px;border-radius:999px;line-height:1;pointer-events:none}.country-open[_nghost-%COMP%]   .build-tag-corner[_ngcontent-%COMP%]{bottom:auto;top:calc(var(--ui-edge-top) + var(--node-size) + 6px);right:var(--ui-edge-right)}.top-overlay[_ngcontent-%COMP%]{position:fixed;top:auto;bottom:var(--top-overlay-bottom);right:var(--ui-edge-right);left:auto;transform:none;width:min(420px,calc(100vw - (var(--ui-edge-left) + var(--ui-edge-right))));max-height:var(--top-overlay-height);padding:4px 10px;border-radius:20px;background:#05091440;border:1px solid rgba(0,199,255,.35);display:flex;justify-content:center;z-index:12000;box-shadow:0 10px 25px #00000059;pointer-events:auto;-webkit-backdrop-filter:blur(18px);backdrop-filter:blur(18px);gap:4px;overflow:visible}.top-overlay[_ngcontent-%COMP%]:not(.search-open){padding:6px 10px}.overlay-inner[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:4px;min-height:0;max-height:100%}.top-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:12px}.ghost-btn[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.4);background:transparent;color:#fff;border-radius:999px;padding:6px 14px;letter-spacing:.2em;font-size:10px;text-transform:uppercase;cursor:pointer;opacity:.8}.tab-row[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}.tab[_ngcontent-%COMP%]{border:1px solid transparent;border-radius:999px;padding:6px 16px;letter-spacing:.2em;font-size:10px;text-transform:uppercase;color:#ffffffb3;background:transparent;cursor:pointer;transition:background .2s ease,color .2s ease}.tab[_ngcontent-%COMP%]:hover{background:#ffffff14;color:#ffffffe6}.tab.active[_ngcontent-%COMP%]{background:#ffffff1f;color:#fffffff2}.search-control[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:6px;min-height:0}.search-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:min(420px,100%);border:none;border-radius:14px;padding:12px 14px;font-size:14px;background:#ffffff0f;color:#ffffffeb;outline:none;font-weight:500}.search-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #00ffd166}.user-loader[_ngcontent-%COMP%]{position:absolute;top:12px;right:14px;width:10px;height:10px;border-radius:50%;border:2px solid rgba(255,255,255,.6);border-top-color:#fff0;animation:_ngcontent-%COMP%_spin .9s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.tab-banner[_ngcontent-%COMP%]{margin-top:6px;font-size:11px;color:#ffffffbf}.user-suggestions[_ngcontent-%COMP%], .country-suggestions[_ngcontent-%COMP%]{position:absolute;top:auto;bottom:calc(100% + 8px);left:0;right:0;z-index:12001;border-radius:16px;border:1px solid rgba(0,199,255,.35);background:#05091447;box-shadow:0 20px 40px #00000073;padding:6px;display:grid;gap:6px;max-height:min(36vh,calc(var(--top-overlay-height) - 96px));overflow:auto;backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);background-clip:padding-box}.user-suggestion[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;border-radius:12px;padding:10px;border:1px solid rgba(0,199,255,.6);background:#009bff1f;color:#fff;cursor:pointer;text-align:left}.suggestion-avatar[_ngcontent-%COMP%]{position:relative;width:36px;height:36px;border-radius:50%;border:1px solid rgba(255,255,255,.12);display:grid;place-items:center;background:#ffffff14;font-size:12px;color:#ffffffe6}.presence-dot[_ngcontent-%COMP%]{position:absolute;right:-2px;bottom:-2px;width:10px;height:10px;border-radius:999px;background:#ff5a5af2;border:2px solid rgba(5,9,20,.9);box-shadow:0 0 10px #ff5a5a73}.presence-dot.online[_ngcontent-%COMP%]{background:#00ff9cf2;box-shadow:0 0 10px #00ff9c73}.suggestion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover}.suggestion-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.profile-name[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:#fff}.profile-handle[_ngcontent-%COMP%]{font-size:12px;opacity:.75;letter-spacing:.08em;color:#ffffffbf}.user-search-error[_ngcontent-%COMP%]{margin-top:6px;font-size:12px;color:#ff7a93;letter-spacing:.08em}.country-option[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid rgba(255,255,255,.08);cursor:pointer;transition:background .2s ease}.country-option[_ngcontent-%COMP%]:last-child{border-bottom:none}.country-option[_ngcontent-%COMP%]:hover{background:#ffffff0f}.country-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#fff}.country-option[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px;opacity:.6;letter-spacing:.1em;color:#fff}.country-hint[_ngcontent-%COMP%]{margin-top:10px;font-size:12px;opacity:.6}.globe-bg[_ngcontent-%COMP%]{position:fixed;inset:0;width:100%;height:100%;z-index:1;pointer-events:auto;touch-action:auto;filter:saturate(1.2) contrast(1.18) brightness(1.05);transform:translate3d(0,-18px,0);background:#000}.globe-bg.bg-static[_ngcontent-%COMP%]{pointer-events:none;touch-action:none}.stage[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:5;pointer-events:none}.stage.focus[_ngcontent-%COMP%]{pointer-events:auto;padding-top:var(--stage-top-pad);padding-left:var(--ui-edge-left);padding-right:var(--ui-edge-right);padding-bottom:calc(var(--ui-edge-bottom) + var(--tabs-height, 64px));box-sizing:border-box;display:grid;grid-template-columns:min(420px,34vw) 1fr;grid-template-rows:minmax(0,1fr);gap:var(--ui-gap);min-height:0;height:calc(100vh - var(--stage-top-pad) - var(--tabs-height, 64px));align-items:stretch;justify-items:stretch}.stage.focus.feed-full[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:minmax(0,1fr);padding-top:var(--stage-top-pad);padding-left:0;padding-right:0;gap:0;min-height:0;padding-bottom:0;height:calc(100vh - var(--stage-top-pad))}.stage.focus.feed-full[_ngcontent-%COMP%]   .map-pane[_ngcontent-%COMP%]{display:none}.stage.focus.feed-full[_ngcontent-%COMP%]   .main-pane[_ngcontent-%COMP%]{width:100%}.stage.focus.feed-full[_ngcontent-%COMP%]   .main-card[_ngcontent-%COMP%]{width:100%;max-width:none;border-radius:0;padding:10px 8px 14px;--card-pad-x: 8px}.stage.focus.feed-full[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]{margin-left:calc(-1 * var(--card-pad-x));margin-right:calc(-1 * var(--card-pad-x));width:calc(100% + (var(--card-pad-x) * 2));border-radius:0}.map-pane[_ngcontent-%COMP%]{position:relative;min-height:0}.map-glass[_ngcontent-%COMP%]{position:relative;height:100%;border-radius:22px;border:1px solid rgba(255,255,255,.12);background:#0a0c142e;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 30px 90px #00000073;overflow:hidden;pointer-events:none}.stage.focus[_ngcontent-%COMP%]   .globe-bg[_ngcontent-%COMP%]{transform:translate3d(0,-10px,0)}.main-pane[_ngcontent-%COMP%]{pointer-events:auto;min-width:0;min-height:0;height:100%;align-self:stretch}.main-card[_ngcontent-%COMP%]{height:100%;min-height:0;border-radius:26px;padding:16px;--card-pad-x: 16px;--feed-top-space: 132px;box-shadow:0 30px 90px #0006;overflow:hidden;display:flex;flex-direction:column;width:100%;box-sizing:border-box;position:relative}.white-card[_ngcontent-%COMP%]{background:#f5f7faeb;border:1px solid rgba(0,0,0,.08);-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);color:#0a0c12e6}.feed-top[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:6;display:flex;flex-direction:column;gap:10px;background:#f5f7faeb;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);padding:10px 0 8px;transition:opacity .22s ease,transform .22s ease}.feed-top.hidden[_ngcontent-%COMP%]{opacity:0;transform:translateY(-100%);pointer-events:none}.main-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:0}.mh-text[_ngcontent-%COMP%]{min-width:0;display:flex;flex-direction:column;justify-content:center}.mh-title-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-wrap:wrap}.feed-return[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12);background:#ffffffe6;color:#0a0c12cc;border-radius:14px;padding:8px 14px;font-size:10px;letter-spacing:.18em;text-transform:uppercase;font-weight:800;cursor:pointer;white-space:nowrap}.mh-title[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.16em;font-size:12px;text-transform:uppercase}.mh-sub[_ngcontent-%COMP%]{margin-top:4px;opacity:.72;font-weight:800;letter-spacing:.08em;font-size:12px;display:flex;align-items:center;gap:6px;flex-wrap:wrap}.mh-clock[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.08em;text-transform:uppercase;opacity:.8;white-space:nowrap}.mh-country-select[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12);border-radius:12px;background:#ffffffe6;color:#0a0c12cc;font-size:11px;letter-spacing:.06em;padding:4px 8px;text-transform:uppercase;font-weight:700}.mh-country-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#0000003d}.tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin:0;flex-wrap:wrap}.tab[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);background:#ffffffb3;color:#0a0c12db;padding:10px 12px;border-radius:14px;font-weight:900;letter-spacing:.14em;font-size:11px;cursor:pointer}.tab.active[_ngcontent-%COMP%]{border-color:#00ffd147;background:#00ffd11a;box-shadow:0 0 0 1px #00ffd11f inset}.tab-body[_ngcontent-%COMP%]{flex:1;min-height:0;overflow:auto;overflow-x:hidden;scrollbar-gutter:stable both-edges;-webkit-overflow-scrolling:touch;touch-action:pan-y;overscroll-behavior:contain;padding-top:var(--feed-top-space);padding-bottom:calc(18px + var(--tabs-safe, 64px))}.placeholder[_ngcontent-%COMP%]{border-radius:18px;padding:14px}.placeholder.light[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.08);background:#ffffffd1}.ph-title[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.1em;font-size:12px;text-transform:uppercase}.ph-sub[_ngcontent-%COMP%]{margin-top:6px;opacity:.75;font-size:12px;line-height:1.4}.posts-pane[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;box-sizing:border-box;overflow-x:hidden}.posts-pane[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-right:0;box-sizing:border-box}.composer[_ngcontent-%COMP%]{border-radius:20px;border:1px solid rgba(0,0,0,.06);background:#fffffff2;padding:16px;box-shadow:0 20px 60px #0000001a;box-sizing:border-box}.composer-row[_ngcontent-%COMP%]{display:flex;gap:14px;align-items:flex-start}.composer-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:999px;overflow:hidden;border:1px solid rgba(0,0,0,.08);background:#f5f7fae6;display:grid;place-items:center;flex:0 0 auto}.composer-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.composer-initials[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.12em;color:#0a0c12cc}.composer-main[_ngcontent-%COMP%]{flex:1}.composer-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}.composer-cta[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.composer-title[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.12em;font-size:12px}.composer-hint[_ngcontent-%COMP%]{font-size:12px;opacity:.7;margin-top:4px}.pill-link[_ngcontent-%COMP%]{border:0;border-radius:999px;padding:6px 16px;font-size:10px;letter-spacing:.18em;font-weight:900;text-transform:uppercase;background:#0000000d;color:#0a0c12bf;cursor:pointer}.pill-link.ghost[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(10,12,18,.15)}.composer-trigger[_ngcontent-%COMP%]{width:100%;margin-top:10px;border-radius:10px;border:1px solid rgba(0,0,0,.08);background:#f5f7fae6;text-align:left;padding:12px;font-weight:600;color:#0a0c12a6;cursor:pointer}.composer-note[_ngcontent-%COMP%]{margin-top:10px;font-size:12px;opacity:.72}.composer-input[_ngcontent-%COMP%], .composer-textarea[_ngcontent-%COMP%]{width:100%;margin-top:10px;border-radius:10px;border:1px solid rgba(0,0,0,.08);background:#f5f7fae6;padding:12px;font-family:inherit;font-size:14px;color:#0a0c12e6}.composer-textarea[_ngcontent-%COMP%]{min-height:90px;resize:vertical}.composer-media[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap}.composer-type[_ngcontent-%COMP%]{display:flex;gap:6px;align-items:center}.type-chip[_ngcontent-%COMP%]{border:1px solid rgba(8,12,20,.15);background:#ffffffe6;color:#080c14bf;font-size:10px;letter-spacing:.18em;font-weight:800;text-transform:uppercase;padding:6px 12px;border-radius:8px;cursor:pointer}.type-chip.active[_ngcontent-%COMP%]{background:#0f172a;border-color:#0f172a;color:#fff}.composer-media-actions[_ngcontent-%COMP%]{display:flex;gap:6px;align-items:center}.flat-action[_ngcontent-%COMP%]{border:1px solid rgba(10,12,18,.15);background:#fffffff2;color:#0a0c12cc;font-size:10px;letter-spacing:.14em;font-weight:800;text-transform:uppercase;padding:6px 12px;border-radius:8px;cursor:pointer}.flat-action.ghost[_ngcontent-%COMP%]{background:transparent}.flat-action.danger[_ngcontent-%COMP%]{border-color:#c800004d;color:#a11;background:#fff0f0e6}.composer-media-name[_ngcontent-%COMP%]{font-size:11px;opacity:.7;font-weight:700;letter-spacing:.06em}.composer-media-error[_ngcontent-%COMP%]{margin-top:6px;font-size:11px;font-weight:700;color:#c33;letter-spacing:.06em}.composer-media-preview[_ngcontent-%COMP%]{margin-top:10px;border-radius:12px;overflow:hidden;border:1px solid rgba(0,0,0,.08);background:#fff}.composer-preview-strip[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;grid-auto-columns:minmax(120px,1fr);gap:8px;padding:10px}.composer-preview-strip.single[_ngcontent-%COMP%]{grid-auto-columns:1fr}.composer-preview-item[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden;background:#0b0f19;border:1px solid rgba(0,0,0,.12)}.composer-preview-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .composer-preview-item[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;display:block;height:140px;object-fit:cover;background:#000}.composer-actions[_ngcontent-%COMP%]{margin-top:12px;display:flex;align-items:center;gap:12px;flex-wrap:wrap}.composer-status[_ngcontent-%COMP%]{font-size:12px;font-weight:700;letter-spacing:.08em;color:#0078ffe6}.composer-status.error[_ngcontent-%COMP%]{color:#ff6b81}.posts-state[_ngcontent-%COMP%]{font-size:13px;font-weight:700;opacity:.7}.posts-state.hint[_ngcontent-%COMP%]{opacity:.6}.posts-state.error[_ngcontent-%COMP%]{color:#ff6b81}.posts-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;box-sizing:border-box;padding-bottom:10px;overflow-x:hidden}.posts-empty[_ngcontent-%COMP%]{text-align:center;font-size:13px;opacity:.65}.load-more[_ngcontent-%COMP%]{align-self:center;border:1px solid rgba(0,0,0,.18);border-radius:999px;padding:10px 16px;background:#ffffffeb;font-size:11px;font-weight:900;letter-spacing:.12em;cursor:pointer;color:#0a0c12d9}.post-card[_ngcontent-%COMP%]{position:relative;border-radius:20px;border:1px solid rgba(0,0,0,.06);background:#fffffffa;--post-pad-x: 16px;padding:var(--post-pad-x);box-shadow:0 18px 60px #00000026;box-sizing:border-box;overflow-x:hidden}.post-author[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;flex-wrap:wrap}.author-core[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1;cursor:default}.author-core.clickable[_ngcontent-%COMP%]{cursor:pointer}.author-core[_ngcontent-%COMP%]:focus{outline:2px solid rgba(10,12,18,.18);outline-offset:2px}.author-avatar[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:999px;overflow:hidden;background:#f5f7faf2;border:1px solid rgba(0,0,0,.08);box-shadow:0 10px 24px #0000001f;display:grid;place-items:center;color:#0a0c12cc;font-weight:900;letter-spacing:.08em}.author-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.author-info[_ngcontent-%COMP%]{flex:1;min-width:0}.author-name[_ngcontent-%COMP%]{font-weight:900;font-size:13px;letter-spacing:.04em}.author-meta[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.follow-chip[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.18);border-radius:999px;padding:6px 14px;background:transparent;color:#000000bf;font-size:11px;font-weight:900;letter-spacing:.12em;text-transform:uppercase;cursor:pointer}.follow-chip.following[_ngcontent-%COMP%]{background:#0a0c120f;color:#0a0c12c7;border-color:#0000001f;box-shadow:none}.follow-chip[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.post-body[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;line-height:1.4;color:#0a0c12d9}.post-shared[_ngcontent-%COMP%]{margin-top:12px}.shared-label[_ngcontent-%COMP%]{font-size:11px;font-weight:800;letter-spacing:.08em;text-transform:uppercase;color:#0a0c128c;margin-bottom:6px}.shared-card[_ngcontent-%COMP%]{border:1px solid rgba(10,12,18,.08);border-radius:14px;padding:12px;background:#f5f7fb;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease}.shared-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 10px 24px #0000001f}.shared-author[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.shared-avatar[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;overflow:hidden;background:#0a0c121a;display:grid;place-items:center;flex-shrink:0}.shared-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.shared-initials[_ngcontent-%COMP%]{font-weight:800;font-size:12px;letter-spacing:.08em}.shared-info[_ngcontent-%COMP%]{min-width:0}.shared-name[_ngcontent-%COMP%]{font-weight:800;font-size:13px}.shared-meta[_ngcontent-%COMP%]{font-size:11px;opacity:.7}.shared-title[_ngcontent-%COMP%]{margin-top:10px;font-weight:800;font-size:12px;letter-spacing:.06em;text-transform:uppercase}.shared-body[_ngcontent-%COMP%]{margin-top:6px;font-size:13px;line-height:1.4;color:#0a0c12cc}.shared-media[_ngcontent-%COMP%]{margin-top:10px;border-radius:12px;overflow:hidden;background:#000}.shared-media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.shared-video[_ngcontent-%COMP%]{position:relative;display:grid;place-items:center;min-height:120px;background:#0b0f18;color:#e6eefc;font-size:12px;letter-spacing:.08em;text-transform:uppercase}.shared-video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.shared-video-tag[_ngcontent-%COMP%]{position:absolute;right:8px;bottom:8px;background:#000000a6;color:#fff;padding:4px 6px;border-radius:8px;font-size:10px;letter-spacing:.12em;text-transform:uppercase}.post-text[_ngcontent-%COMP%]{display:inline;line-height:1.4;margin:0}.post-text.clamped[_ngcontent-%COMP%]{display:inline;padding-bottom:0}.post-caption[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;line-height:1.45;color:#0a0c12bf}.post-text[_ngcontent-%COMP%]   .see-more.inline[_ngcontent-%COMP%]{margin-left:6px;padding:0;border:0;background:transparent;font-size:12px;font-weight:800;letter-spacing:.02em;color:#0a0c1299;text-decoration:underline;cursor:pointer;white-space:nowrap}.post-media[_ngcontent-%COMP%]{margin-top:12px;margin-left:calc(-1 * var(--post-pad-x));margin-right:calc(-1 * var(--post-pad-x));border-radius:0;overflow:hidden;border:1px solid rgba(0,0,0,.06);background:#fff;position:relative;width:calc(100% + (var(--post-pad-x) * 2))}.post-media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .post-media[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;display:block;height:auto;max-height:none;object-fit:contain;background:#000}.media-gallery[_ngcontent-%COMP%]{position:relative;width:100%;background:#000;padding-bottom:34px;box-sizing:border-box}.media-strip[_ngcontent-%COMP%]{display:flex;width:100%;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;scrollbar-width:none}.media-strip[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.media-item[_ngcontent-%COMP%]{min-width:100%;flex:0 0 100%;scroll-snap-align:center}.media-dots[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:50%;transform:translate(-50%);display:flex;gap:6px;padding:4px 8px;border-radius:999px;background:#0006;z-index:2;align-items:center}.media-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;background:#ffffff80;display:inline-block}.media-dots[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{background:#fff}.media-dots[_ngcontent-%COMP%]   .media-count[_ngcontent-%COMP%]{width:auto;height:auto;border-radius:12px;padding:1px 6px;font-size:10px;font-weight:800;background:#ffffff29;color:#fff}.media-badge[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;padding:4px 8px;border-radius:10px;background:#0000008c;color:#fff;font-size:10px;letter-spacing:.12em;font-weight:800;z-index:2}.post-title[_ngcontent-%COMP%]{font-weight:900;margin-bottom:6px;letter-spacing:.06em;text-transform:uppercase;font-size:12px}.post-visibility[_ngcontent-%COMP%]{font-weight:800;font-size:10px;letter-spacing:.16em;text-transform:uppercase;opacity:.7}.post-actions[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;align-items:center;flex-wrap:wrap}.post-action-group[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px}.post-action[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;border-radius:999px;border:1px solid rgba(0,199,255,.45);background:#f5f7faeb;padding:6px 12px;font-size:12px;font-weight:800;letter-spacing:.06em;color:#0a0c12b3;cursor:pointer}.post-action[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:14px}.post-action[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:11px;font-weight:800}.post-action.active[_ngcontent-%COMP%]{border-color:#00c7ffb3;background:#00c7ff1f;color:#0a0c12bf}.post-action.like.active[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#c33}.post-action.count[_ngcontent-%COMP%]{padding:6px 10px;min-width:36px;justify-content:center}.post-action.share[_ngcontent-%COMP%]{padding:6px 10px}.post-share-feedback[_ngcontent-%COMP%]{font-size:11px;font-weight:800;letter-spacing:.08em;text-transform:uppercase;color:#0a0c12a6}.post-action[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.post-action-error[_ngcontent-%COMP%]{margin-top:6px;font-size:11px;font-weight:700;color:#c33;letter-spacing:.06em}.post-comments[_ngcontent-%COMP%]{margin-top:10px;padding-top:10px;border-top:1px solid rgba(0,0,0,.06);display:flex;flex-direction:column;gap:10px}.comment-status[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.comment-status.error[_ngcontent-%COMP%]{color:#c33}.comment-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.comment-empty[_ngcontent-%COMP%]{font-size:12px;opacity:.6}.comment[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:flex-start}.comment-avatar[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:999px;overflow:hidden;background:#f5f7faf2;border:1px solid rgba(0,0,0,.08);display:grid;place-items:center;font-weight:900;font-size:11px;color:#0a0c12cc}.comment-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.comment-body[_ngcontent-%COMP%]{flex:1;min-width:0}.comment-meta[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;font-size:11px;opacity:.65}.comment-name[_ngcontent-%COMP%]{font-weight:800;text-transform:uppercase;letter-spacing:.08em}.comment-text[_ngcontent-%COMP%]{font-size:12px;color:#0a0c12d9;margin-top:2px}.comment-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:4px;font-size:11px}.comment-action[_ngcontent-%COMP%]{border:0;background:transparent;padding:0;color:#0a0c1294;font-weight:800;letter-spacing:.08em;text-transform:uppercase;display:inline-flex;align-items:center;gap:6px;cursor:pointer}.comment-action.active[_ngcontent-%COMP%]{color:#009bdce0}.comment-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.comment-heart[_ngcontent-%COMP%]{font-size:12px;line-height:1}.comment-heart.active[_ngcontent-%COMP%]{color:#009bdcf2}.comment-like-count[_ngcontent-%COMP%]{font-size:11px;font-weight:800;color:#0a0c12bf}.comment-reply[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:11px;font-weight:800;letter-spacing:.06em;color:#0a0c1299;text-transform:uppercase}.comment-reply[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#009bdcd9}.comment-compose[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap}.comment-input[_ngcontent-%COMP%]{flex:1;min-width:180px;border-radius:12px;border:1px solid rgba(0,0,0,.08);background:#f5f7fae6;padding:8px 10px;font-family:inherit;font-size:12px;color:#0a0c12d9}.comment-submit[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(0,0,0,.12);background:#fffffff5;padding:6px 12px;font-size:11px;font-weight:800;letter-spacing:.08em;text-transform:uppercase;color:#0a0c12b3;cursor:pointer}.post-likes[_ngcontent-%COMP%]{margin-top:10px;padding-top:10px;border-top:1px solid rgba(0,0,0,.06);display:flex;flex-direction:column;gap:10px}.like-status[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.like-status.error[_ngcontent-%COMP%]{color:#c33}.like-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.like-empty[_ngcontent-%COMP%]{font-size:12px;opacity:.6}.like-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;border:0;background:transparent;padding:4px 0;text-align:left;cursor:pointer;color:inherit}.like-avatar[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:999px;overflow:hidden;background:#f5f7faf2;border:1px solid rgba(0,0,0,.08);display:grid;place-items:center;font-weight:900;font-size:11px;color:#0a0c12cc}.like-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.like-body[_ngcontent-%COMP%]{flex:1;min-width:0}.like-name[_ngcontent-%COMP%]{font-weight:800;text-transform:uppercase;letter-spacing:.08em;font-size:11px}.like-handle[_ngcontent-%COMP%]{font-size:11px;opacity:.6}.like-time[_ngcontent-%COMP%]{font-size:11px;opacity:.55}.post-card.post-highlight[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #00c7ff59,0 18px 60px #00000026}.comment-submit[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.comment-hint[_ngcontent-%COMP%]{font-size:12px;opacity:.6}.post-edit[_ngcontent-%COMP%]{margin-top:12px;display:grid;gap:10px}.post-edit-title[_ngcontent-%COMP%], .post-edit-body[_ngcontent-%COMP%], .post-edit-visibility[_ngcontent-%COMP%]{width:100%;border-radius:14px;border:1px solid rgba(0,0,0,.08);background:#f5f7fae6;padding:10px 12px;font-family:inherit;font-size:13px;color:#0a0c12e6}.post-edit-body[_ngcontent-%COMP%]{min-height:90px;resize:vertical}.post-edit-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.post-edit-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.post-edit-error[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#ff6b81;letter-spacing:.08em}.post-menu[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center;gap:6px;position:relative}.post-visibility-icon[_ngcontent-%COMP%]{font-size:14px;line-height:1;opacity:.7}.post-menu-trigger[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:999px;border:1px solid rgba(0,0,0,.12);background:#ffffffe6;color:#0a0c12b3;font-size:18px;line-height:1;cursor:pointer}.post-menu-trigger[_ngcontent-%COMP%]:focus{outline:2px solid rgba(10,12,18,.18);outline-offset:2px}.post-menu-dropdown[_ngcontent-%COMP%]{position:absolute;top:34px;right:0;min-width:170px;background:#fffffffa;border:1px solid rgba(0,0,0,.08);border-radius:14px;box-shadow:0 18px 60px #0000001f;padding:8px;display:flex;flex-direction:column;gap:6px;z-index:5}.menu-item[_ngcontent-%COMP%]{border:0;background:transparent;text-align:left;padding:6px 8px;border-radius:10px;font-size:12px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:#0a0c12b3;cursor:pointer}.menu-item[_ngcontent-%COMP%]:hover{background:#0a0c120f}.menu-item.danger[_ngcontent-%COMP%]{color:#c33}.menu-item.ghost[_ngcontent-%COMP%]{color:#0a0c128c}.menu-confirm[_ngcontent-%COMP%]{margin-top:6px;padding-top:6px;border-top:1px solid rgba(0,0,0,.08);display:flex;flex-direction:column;gap:6px}.menu-confirm-title[_ngcontent-%COMP%]{font-size:11px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:#0a0c1299}.menu-confirm-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px}.menu-report[_ngcontent-%COMP%]{margin-top:6px;padding-top:6px;border-top:1px solid rgba(0,0,0,.08);display:grid;gap:8px}.menu-report-input[_ngcontent-%COMP%]{width:100%;border-radius:10px;border:1px solid rgba(0,0,0,.1);background:#f5f7faf0;padding:8px;font-family:inherit;font-size:12px;color:#0a0c12d9}.menu-report-error[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#c33;letter-spacing:.06em}.menu-report-success[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#0a0c12b3;letter-spacing:.06em}.stats-pane[_ngcontent-%COMP%]{display:grid;gap:14px}.stats-card[_ngcontent-%COMP%]{border-radius:18px;padding:14px;border:1px solid rgba(7,20,40,.08);background:#ffffffb3;display:grid;gap:10px}.mood-card[_ngcontent-%COMP%]{gap:8px}.mood-bars[_ngcontent-%COMP%]{height:10px;border-radius:999px;overflow:hidden;display:grid;grid-template-columns:1fr 1fr 1fr;background:#00000014}.mood-seg[_ngcontent-%COMP%]{height:100%}.mood-seg.positive[_ngcontent-%COMP%]{background:#3ad29f}.mood-seg.neutral[_ngcontent-%COMP%]{background:#f0c35a}.mood-seg.negative[_ngcontent-%COMP%]{background:#f06b6b}.mood-legend[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:11px;text-transform:uppercase;letter-spacing:.08em;color:#0a0c12cc;flex-wrap:wrap}.mood-legend[_ngcontent-%COMP%]   .positive[_ngcontent-%COMP%]{color:#3ad29f}.mood-legend[_ngcontent-%COMP%]   .neutral[_ngcontent-%COMP%]{color:#f0c35a}.mood-legend[_ngcontent-%COMP%]   .negative[_ngcontent-%COMP%]{color:#f06b6b}.topic-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.topic-chip[_ngcontent-%COMP%]{padding:4px 8px;border-radius:999px;background:#0a0c1214;font-size:11px;letter-spacing:.04em;color:#0a0c12bf}.mood-insight[_ngcontent-%COMP%]{font-size:12px;line-height:1.4;color:#0a0c12bf}.stats-title[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.18em;font-size:11px;color:#0a0c12ad;text-transform:uppercase}.stats-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px;font-size:13px;color:#0a0c12cc}.stats-row[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#0a0c12eb}.stats-row[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{opacity:.7}.stats-row.muted[_ngcontent-%COMP%]{opacity:.6}.stats-row.error[_ngcontent-%COMP%]{color:#ff6b81;font-weight:700}.node-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:11900;background:transparent}.lightbox[_ngcontent-%COMP%]{position:fixed;inset:0;background:#050a12b3;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);display:grid;place-items:center;z-index:12050}.lightbox-frame[_ngcontent-%COMP%]{position:relative;max-width:min(92vw,860px);max-height:82vh;background:#fffffffa;border-radius:18px;padding:10px;box-shadow:0 25px 60px #00000059}.lightbox-frame[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:auto;max-height:72vh;border-radius:12px;object-fit:contain}.lightbox-close[_ngcontent-%COMP%]{position:absolute;top:6px;right:6px;width:28px;height:28px;border-radius:50%;border:1px solid rgba(7,20,40,.2);background:#fff;cursor:pointer;font-weight:800;display:grid;place-items:center}.user-node[_ngcontent-%COMP%]{position:fixed;top:var(--ui-edge-top);right:var(--ui-edge-right);z-index:13010;-webkit-user-select:none;user-select:none;pointer-events:auto;display:flex;align-items:center;gap:10px}.node-orb[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:999px;border:1px solid rgba(0,255,209,.28);background:#0a0c148c;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);box-shadow:0 18px 60px #00000073,0 0 0 1px #00ffd12e inset,0 0 38px #00ffd11f;position:relative;overflow:hidden;cursor:pointer;padding:0;display:grid;place-items:center;pointer-events:auto}.orb-img[_ngcontent-%COMP%]{width:120%;height:120%;object-fit:cover;border-radius:999px;will-change:transform;transform:translateZ(0);transition:transform 90ms linear}.orb-initials[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.12em;font-size:11px;color:#ffffffeb;text-transform:uppercase}.node-menu[_ngcontent-%COMP%]{position:absolute;top:52px;right:0;width:min(320px,calc(100vw - (var(--ui-edge-left) + var(--ui-edge-right))));border-radius:22px;padding:14px;background:#0a0c149e;border:1px solid rgba(0,255,209,.2);-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);box-shadow:0 30px 90px #00000080;overflow:hidden;z-index:13020;pointer-events:auto}.node-menu[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border-radius:24px;background:conic-gradient(from 180deg,#00ffd100,#00ffd18c,#8c00ff73,#00ffd100);filter:blur(14px);opacity:.22;pointer-events:none}.node-menu[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.notif-hub[_ngcontent-%COMP%]{position:fixed;top:var(--ui-edge-top);right:var(--ui-edge-right);z-index:13020;pointer-events:auto}.node-bell-wrap[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.node-msg[_ngcontent-%COMP%]{position:relative;width:38px;height:38px;border-radius:999px;border:1px solid rgba(0,255,209,.2);background:#0a0c148c;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);box-shadow:0 12px 35px #0006,0 0 0 1px #00ffd12e inset;color:#fffffff2;display:grid;place-items:center;font-size:18px;cursor:pointer;padding:0}.node-msg[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 1px #00ffd140 inset,0 12px 35px #00000073}.node-search.active[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #00ffd159 inset,0 12px 35px #0000008c}.notif-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 10px);right:0;left:auto;transform:none;width:min(320px,calc(100vw - (var(--ui-edge-left) + var(--ui-edge-right))));max-height:calc(100vh - 140px);display:flex;flex-direction:column}.notif-menu[_ngcontent-%COMP%]   .notif-list[_ngcontent-%COMP%]{max-height:calc(100vh - 280px);overflow-y:auto}.notif-menu[_ngcontent-%COMP%]   .node-foot[_ngcontent-%COMP%]{margin-top:auto}.node-head[_ngcontent-%COMP%]{margin-bottom:10px}.node-title[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.18em;font-size:12px;color:#ffffffe6}.node-sub[_ngcontent-%COMP%]{margin-top:6px;font-weight:800;letter-spacing:.08em;color:#00ffd1eb;font-size:12px}.node-sub2[_ngcontent-%COMP%]{margin-top:3px;opacity:.68;font-size:12px;color:#ffffffd6}.node-actions[_ngcontent-%COMP%]{display:grid;gap:8px;margin-top:10px}.node-btn[_ngcontent-%COMP%]{width:100%;border:0;border-radius:16px;padding:12px;cursor:pointer;background:#ffffff0f;color:#ffffffdb;display:flex;align-items:center;gap:10px;letter-spacing:.14em;font-weight:900;font-size:11px;pointer-events:auto}.node-badge[_ngcontent-%COMP%]{margin-left:auto;padding:2px 8px;border-radius:999px;background:#ffffff1f;border:1px solid rgba(255,255,255,.24);font-size:10px;letter-spacing:.12em;font-weight:900;color:#ffffffeb}.node-btn[_ngcontent-%COMP%]:hover{background:#00ffd11f;box-shadow:0 0 0 1px #00ffd133 inset,0 0 24px #00ffd11a}.node-btn[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:999px;background:#00ffd1eb;box-shadow:0 0 16px #00ffd18c;flex:0 0 auto}.node-btn.danger[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background:#ff7878f2;box-shadow:0 0 16px #ff787873}.node-bell[_ngcontent-%COMP%]{position:relative;width:38px;height:38px;border-radius:999px;border:1px solid rgba(0,255,209,.2);background:#0a0c148c;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);box-shadow:0 12px 35px #0006,0 0 0 1px #00ffd12e inset;color:#fffffff2;display:grid;place-items:center;font-size:18px;cursor:pointer;padding:0}.node-bell.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bellPulse .9s ease}@keyframes _ngcontent-%COMP%_bellPulse{0%{transform:scale(1)}30%{transform:scale(1.08)}60%{transform:scale(.98)}to{transform:scale(1)}}.node-bell[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 1px #00ffd140 inset,0 12px 35px #00000073}.bell-badge[_ngcontent-%COMP%]{position:absolute;top:-6px;left:-6px;min-width:18px;height:18px;padding:0 6px;border-radius:999px;background:#ff7878fa;color:#080a0ef2;font-size:11px;font-weight:900;display:flex;align-items:center;justify-content:center;letter-spacing:.02em;box-shadow:0 0 10px #ff78788c}.bell-badge.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_badgePop .7s ease}@keyframes _ngcontent-%COMP%_badgePop{0%{transform:scale(1)}40%{transform:scale(1.25)}70%{transform:scale(.95)}to{transform:scale(1)}}.node-foot[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:flex-end}.ghost[_ngcontent-%COMP%]{border:0;background:transparent;color:#00ffd1eb;font-weight:900;letter-spacing:.14em;cursor:pointer;font-size:11px;text-decoration:underline}.node-btn-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.node-btn-row[_ngcontent-%COMP%]   .node-btn[_ngcontent-%COMP%]{flex:1}.node-edit[_ngcontent-%COMP%]{border:0;background:transparent;cursor:pointer;font-weight:900;letter-spacing:.06em;font-size:11px;opacity:.75;color:#ffffffe6;text-decoration:underline;padding:10px 6px;pointer-events:auto}.node-edit[_ngcontent-%COMP%]:hover{opacity:1}.overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000059;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);z-index:14000;display:grid;place-items:center;padding:18px;pointer-events:auto}.panel[_ngcontent-%COMP%]{width:min(620px,94vw);border-radius:26px;padding:16px;background:#0a0c1499;border:1px solid rgba(0,255,209,.2);box-shadow:0 30px 90px #0000008c,0 0 50px #00ffd11a;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);color:#ffffffeb;position:relative;overflow:hidden}.panel[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border-radius:28px;background:conic-gradient(from 180deg,#00ffd100,#00ffd18c,#8c00ff73,#00ffd100);filter:blur(16px);opacity:.18;pointer-events:none}.panel[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.panel-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.panel-title[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.18em;font-size:12px}.x[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:14px;border:1px solid rgba(255,255,255,.1);background:#ffffff0f;color:#ffffffe6;cursor:pointer;font-size:18px}.x[_ngcontent-%COMP%]:hover{background:#00ffd11a;border-color:#00ffd133}.panel-body[_ngcontent-%COMP%]{display:grid;gap:12px}.notif-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px}.notif-count[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.16em;font-weight:900;opacity:.8}.notif-state[_ngcontent-%COMP%]{font-size:12px;opacity:.75}.notif-state.error[_ngcontent-%COMP%]{color:#ff7878f2}.notif-list[_ngcontent-%COMP%]{display:grid;gap:10px}.notif-empty[_ngcontent-%COMP%]{font-size:12px;opacity:.65;text-align:center}.notif-item[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);background:#ffffff0f;border-radius:18px;padding:10px;display:flex;gap:12px;align-items:center;text-align:left;cursor:pointer;color:#ffffffeb;position:relative}.notif-item[_ngcontent-%COMP%]:hover{background:#ffffff1a}.notif-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:999px;overflow:hidden;border:1px solid rgba(255,255,255,.14);background:#ffffff14;display:grid;place-items:center;flex:0 0 auto;font-weight:900;letter-spacing:.1em;font-size:11px}.notif-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.notif-body[_ngcontent-%COMP%]{flex:1;min-width:0}.notif-line[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;font-size:12px}.notif-name[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.06em}.notif-text[_ngcontent-%COMP%]{opacity:.82}.notif-time[_ngcontent-%COMP%]{font-size:11px;opacity:.6;margin-left:auto}.notif-unread[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:999px;background:#ffffffe6;flex:0 0 auto;margin-left:6px}.field[_ngcontent-%COMP%]{display:grid;gap:8px}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px;opacity:.72;letter-spacing:.14em;font-weight:900}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:12px;border-radius:16px;border:1px solid rgba(255,255,255,.12);background:#00000047;color:#ffffffeb;outline:none;resize:none}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#00ffd159;box-shadow:0 0 0 3px #00ffd11a}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}.row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-top:2px}.cta[_ngcontent-%COMP%]{border:0;border-radius:16px;padding:12px 14px;cursor:pointer;background:linear-gradient(90deg,#00ffd1d9,#8c00ffbf);color:#06080ef5;font-weight:900;letter-spacing:.16em;font-size:12px;box-shadow:0 18px 50px #00ffd129}.cta[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.msg[_ngcontent-%COMP%]{font-size:12px;opacity:.85}.presence-box[_ngcontent-%COMP%]{border-radius:18px;border:1px solid rgba(255,255,255,.1);background:#ffffff0d;padding:12px;display:grid;gap:10px}.presence-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;align-items:center}.presence-line[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%]{opacity:.65;letter-spacing:.16em;font-weight:900;font-size:11px}.presence-line[_ngcontent-%COMP%]   .v[_ngcontent-%COMP%]{color:#00ffd1eb;font-weight:900;letter-spacing:.08em;font-size:12px}@media(max-width:900px){.stage.focus[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:auto minmax(0,1fr)}.map-glass[_ngcontent-%COMP%]{height:min(240px,32vh)}.main-card[_ngcontent-%COMP%]{border-radius:22px}}@media(max-width:720px){[_nghost-%COMP%]{--ui-edge: 12px;--node-size: 40px;--top-overlay-height-open: 64px;--top-overlay-height-closed: 0px;--top-overlay-height: var(--top-overlay-height-open);--stage-top-pad-open: var(--stage-top-pad-closed);--stage-top-pad-closed: calc(var(--ui-edge-top) + var(--node-size) + 8px);--stage-top-pad: var(--stage-top-pad-open)}.top-overlay[_ngcontent-%COMP%]{left:var(--ui-edge-left);right:var(--ui-edge-right);transform:none;width:auto;padding:4px 8px}.top-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:flex-start;gap:6px}.search-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;font-size:13px}.tab[_ngcontent-%COMP%]{padding:5px 12px;font-size:9px}.user-suggestions[_ngcontent-%COMP%], .country-suggestions[_ngcontent-%COMP%]{max-height:40vh;overflow:auto}.main-card[_ngcontent-%COMP%]{padding:14px;--card-pad-x: 14px;--feed-top-space: 150px}.feed-return[_ngcontent-%COMP%]{padding:6px 12px;font-size:9px}.composer-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.composer-avatar[_ngcontent-%COMP%]{width:42px;height:42px}.user-node[_ngcontent-%COMP%]{top:var(--ui-edge-top);right:var(--ui-edge-right);gap:8px}.node-orb[_ngcontent-%COMP%]{width:40px;height:40px}.node-msg[_ngcontent-%COMP%], .node-bell[_ngcontent-%COMP%]{width:34px;height:34px;font-size:16px}.bell-badge[_ngcontent-%COMP%]{min-width:16px;height:16px;font-size:10px}}@media(max-width:520px){[_nghost-%COMP%]{--top-overlay-height-open: 70px;--top-overlay-height-closed: 0px;--top-overlay-height: var(--top-overlay-height-open);--stage-top-pad-open: var(--stage-top-pad-closed);--stage-top-pad-closed: calc(var(--ui-edge-top) + var(--node-size) + 8px);--stage-top-pad: var(--stage-top-pad-open)}.main-card[_ngcontent-%COMP%]{--feed-top-space: 168px}.top-overlay[_ngcontent-%COMP%]{top:auto;bottom:var(--top-overlay-bottom)}.top-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.tab-row[_ngcontent-%COMP%]{gap:4px}.tab[_ngcontent-%COMP%]{flex:1;text-align:center}.map-glass[_ngcontent-%COMP%]{height:min(200px,28vh)}.author-avatar[_ngcontent-%COMP%]{width:38px;height:38px}.post-card[_ngcontent-%COMP%]{padding:14px}.node-menu[_ngcontent-%COMP%]:not(.notif-menu){left:auto;right:0;transform:none}.notif-menu[_ngcontent-%COMP%]{left:auto;right:0;transform:none}}']})};export{jt as GlobePageComponent};
